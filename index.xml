<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Home Page on gmgall.net</title>
    <link>https://gmgall.net/</link>
    <description>Recent content in Home Page on gmgall.net</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>pt-br</language>
    <lastBuildDate>Tue, 10 Jan 2023 23:02:00 -0300</lastBuildDate><atom:link href="https://gmgall.net/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Shortcodes no Hugo Inserem Quebras de Linha Indesejadas</title>
      <link>https://gmgall.net/blog/shortcodes-no-hugo-inserem-quebras-de-linha-indesejadas/</link>
      <pubDate>Wed, 08 Feb 2023 11:57:12 -0300</pubDate>
      
      <guid>https://gmgall.net/blog/shortcodes-no-hugo-inserem-quebras-de-linha-indesejadas/</guid>
      <description>&lt;p&gt;Essa j√° &amp;ldquo;me pegou&amp;rdquo; algumas vezes e demorei um pouco para encontrar solu√ß√£o, ent√£o documento aqui.&lt;/p&gt;
&lt;p&gt;O &lt;a href=&#34;https://gohugo.io/&#34;&gt;Hugo&lt;/a&gt; insere quebras de linha ap√≥s o conte√∫do gerado pelos &lt;a href=&#34;https://gohugo.io/content-management/shortcodes/&#34;&gt;shortcodes&lt;/a&gt; que podem causar a renderiza√ß√£o do HTML de forma indesejada.&lt;/p&gt;
&lt;p&gt;Exemplo: suponha que no seu site voc√™ queira tratar das palavras sagradas protegidas pelos &lt;a href=&#34;https://youtu.be/0e2kaQqxmQ0&#34;&gt;Cavaleiros que Dizem Ni&lt;/a&gt;. Voc√™ quer usar um &lt;em&gt;snippet&lt;/em&gt; de c√≥digo para inseri-las, afinal s√£o sagradas e voc√™ n√£o quer correr o risco de digit√°-las errado.&lt;/p&gt;
&lt;p&gt;Ent√£o cria o seguinte &lt;em&gt;shortcode&lt;/em&gt; em &lt;code&gt;layouts/shortcodes/sacred_words.html&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;words&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;slice&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ni&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;peng&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;neee-won&amp;#34;&lt;/span&gt; }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ &lt;span style=&#34;color:#a6e22e&#34;&gt;upper&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;delimit&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;words&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;, &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; e &amp;#34;&lt;/span&gt; ) }}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;E usa o &lt;em&gt;shortcode&lt;/em&gt; no meio do markdown em alguma p√°gina de conte√∫do. Exemplo:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-markdown&#34; data-lang=&#34;markdown&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Os Cavaleiros que Dizem &amp;#34;Ni&amp;#34; s√£o os quardi√µes das palavras sagradas {{&amp;lt; &lt;span style=&#34;color:#f92672&#34;&gt;sacred_words&lt;/span&gt; &amp;gt;}}.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Ao visualizar o HTML gerado para esse trecho, v√™ algo como:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;p&lt;/span&gt;&amp;gt;Os Cavaleiros que Dizem &amp;amp;ldquo;Ni&amp;amp;rdquo; s√£o os quardi√µes das palavras sagradas 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;NI, PENG E NEEE-WON
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;p&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Tem uma quebra de linha indesejada no final do conte√∫do gerado pelo &lt;em&gt;shortcode&lt;/em&gt;.&lt;/strong&gt; O c√≥digo do &lt;em&gt;shortcode&lt;/em&gt; n√£o insere essa quebra, mas ela est√° l√°. Isso faz esse trecho ser renderizado da seguinte forma pelos navegadores:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Os Cavaleiros que Dizem ‚ÄúNi‚Äù s√£o os quardi√µes das palavras sagradas NI, PENG E NEEE-WON .
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Tem um espa√ßo entre a √∫ltima palavra e o ponto final da frase&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Encontrei &lt;strike&gt;as gambiarras&lt;/strike&gt;
 os &lt;em&gt;workarounds&lt;/em&gt; para resolver esse problema numa &lt;a href=&#34;https://github.com/gohugoio/hugo/issues/1753&#34;&gt;issue do pr√≥prio projeto Hugo&lt;/a&gt;, mas parece que a discuss√£o sobre mudar esse comportamento dos &lt;em&gt;shortcodes&lt;/em&gt; n√£o andou muito. Resta-nos nos adaptar.&lt;/p&gt;
&lt;p&gt;&lt;strike&gt;Uma das gambiarras&lt;/strike&gt;
Um dos recursos t√©cnicos √© truncar o arquivo do &lt;em&gt;shortcode&lt;/em&gt; com o comando &lt;code&gt;truncate -s -1 layouts/shortcodes/sacred_words.html&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Depois disso, o HTML gerado para o trecho que usa o &lt;em&gt;shortcode&lt;/em&gt; fica assim:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;p&lt;/span&gt;&amp;gt;Os Cavaleiros que Dizem &amp;amp;ldquo;Ni&amp;amp;rdquo; s√£o os quardi√µes das palavras sagradas 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;NI, PENG E NEEE-WON.&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;p&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;E √© renderizado da seguinte forma:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Os Cavaleiros que Dizem ‚ÄúNi‚Äù s√£o os quardi√µes das palavras sagradas NI, PENG E NEEE-WON.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Vit√≥ria!&lt;/p&gt;
&lt;p&gt;Satisfeito, voc√™ decide que s√≥ falta uma coisa para o seu &lt;em&gt;shortcode&lt;/em&gt; ficar perfeito: ele precisa inserir c√≥digo para gerar um alerta gritando &amp;ldquo;ni&amp;rdquo; a cada vez que a p√°gina √© (re)carregada. Por sorte, pouco c√≥digo precisa ser adicionado para isso. O &lt;em&gt;shortcode&lt;/em&gt; agora tem a seguinte implementa√ß√£o:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;words&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;slice&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ni&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;peng&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;neee-won&amp;#34;&lt;/span&gt; }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ &lt;span style=&#34;color:#a6e22e&#34;&gt;upper&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;delimit&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;words&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;, &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; e &amp;#34;&lt;/span&gt; ) }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;&lt;span style=&#34;color:#a6e22e&#34;&gt;script&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;alert&lt;/span&gt;(&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NI&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;)&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;script&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Dessa vez voc√™ est√° esperto e &lt;strong&gt;lembra de truncar o arquivo&lt;/strong&gt;. Quando vai ver a p√°gina gerada num navegador, o alerta aparece, mas&amp;hellip;&lt;/p&gt;
&lt;p&gt;O espa√ßo entre a √∫ltima palavra sagrada e o ponto final est√° l√° de novo! Mesmo ap√≥s usar o &lt;code&gt;truncate&lt;/code&gt;! O HTML foi gerado com uma quebra de linha indesejada novamente:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;p&lt;/span&gt;&amp;gt;Os Cavaleiros que Dizem &amp;amp;ldquo;Ni&amp;amp;rdquo; s√£o os quardi√µes das palavras sagradas 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;NI, PENG E NEEE-WON
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;script&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;alert&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;NI&amp;#39;&lt;/span&gt;)&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;script&lt;/span&gt;&amp;gt;.&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;p&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Se o seu &lt;em&gt;shortcode&lt;/em&gt; vai inserir mais coisa do que a sa√≠da gerada pelos comandos da linguagem de &lt;em&gt;template&lt;/em&gt; do Go, como √© o trecho &lt;code&gt;&amp;lt;script&amp;gt;alert(&#39;NI&#39;)&amp;lt;/script&amp;gt;.&amp;lt;/p&amp;gt;&lt;/code&gt; no exemplo acima, voc√™ precisa retirar aquela quebra antes do trecho tamb√©m.&lt;/p&gt;
&lt;p&gt;Isso pode ser feito deixando o shortcode assim:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;words&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;slice&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ni&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;peng&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;neee-won&amp;#34;&lt;/span&gt; }}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{{ &lt;span style=&#34;color:#a6e22e&#34;&gt;upper&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;delimit&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;words&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;, &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; e &amp;#34;&lt;/span&gt; ) }}{{&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;&lt;span style=&#34;color:#a6e22e&#34;&gt;script&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;alert&lt;/span&gt;(&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NI&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;)&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;script&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Agora sim, as quebras de linha que fazem a p√°gina ser renderizada erradamente est√£o fora. O espa√ßo antes do ponto final n√£o aparece mais e o alerta ocorre.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;A vers√£o dos softwares envolvidos no momento em que escrevo esse texto s√£o as seguintes:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ go version
go version go1.19.4 linux/amd64
$ hugo version
hugo v0.109.0+extended linux/amd64 BuildDate=unknown
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
    <item>
      <title>Feeds</title>
      <link>https://gmgall.net/feeds/</link>
      <pubDate>Mon, 06 Feb 2023 11:48:43 -0300</pubDate>
      
      <guid>https://gmgall.net/feeds/</guid>
      <description>&lt;p&gt;Minha web ideal se parece mais com m√∫ltiplas pra√ßas p√∫blicas ligadas por vias livremente transit√°veis do que com um conjunto de condom√≠nios fechados.&lt;/p&gt;
&lt;p&gt;Por isso, todo o conte√∫do aqui pode ser acessado via &lt;em&gt;feeds&lt;/em&gt; &lt;a href=&#34;https://pt.wikipedia.org/wiki/RSS&#34;&gt;RSS&lt;/a&gt;. Voc√™ n√£o √© &lt;code&gt;obrigad[aeo]&lt;/code&gt;&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt; a visitar meu site para ler nada que escrevo. üòä&lt;/p&gt;
&lt;h2 id=&#34;feeds-desse-site&#34;&gt;&lt;em&gt;Feeds&lt;/em&gt; desse site&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://gmgall.net/blog/index.xml&#34;&gt;Blog&lt;/a&gt;: todos os posts do &lt;a href=&#34;https://gmgall.net/blog/&#34;&gt;blog&lt;/a&gt; independente de categoria&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt; ou tag&lt;sup id=&#34;fnref1:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gmgall.net/categories/tech/index.xml&#34;&gt;Tech&lt;/a&gt;: todos os textos na categoria&lt;sup id=&#34;fnref2:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt; de &lt;a href=&#34;https://gmgall.net/categories/tech/&#34;&gt;textos t√©cnicos&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gmgall.net/categories/non-tech/index.xml&#34;&gt;Non-tech&lt;/a&gt;: todos os textos na categoria&lt;sup id=&#34;fnref3:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt; de &lt;a href=&#34;https://gmgall.net/categories/non-tech/&#34;&gt;textos n√£o t√©cnicos&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gmgall.net/books/index.xml&#34;&gt;Books&lt;/a&gt;: s√≥ os textos da se√ß√£o&lt;sup id=&#34;fnref4:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt; com minhas &lt;a href=&#34;https://gmgall.net/books&#34;&gt;impress√µes de leitura&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tamb√©m existem &lt;em&gt;feeds&lt;/em&gt; para os textos marcados com cada uma das &lt;a href=&#34;https://gmgall.net/tags/&#34;&gt;tags&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;As URLs para esses &lt;em&gt;feeds&lt;/em&gt; seguem o formato &lt;code&gt;https://gmgall.net/tags/NOME_TAG/index.xml&lt;/code&gt;. Exemplo: o &lt;em&gt;feed&lt;/em&gt; apenas com os posts marcados com a tag &lt;a href=&#34;https://gmgall.net/tags/sysadmin/&#34;&gt;sysadmin&lt;/a&gt; est√° em &lt;code&gt;https://gmgall.net/tags/sysadmin/index.xml&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;
&lt;p&gt;&lt;code&gt;obrigad[aeo]&lt;/code&gt; √© uma &lt;a href=&#34;https://aurelio.net/regex/&#34;&gt;express√£o regular&lt;/a&gt; que casa &lt;code&gt;obrigada&lt;/code&gt;, &lt;code&gt;obrigade&lt;/code&gt; e &lt;code&gt;obrigado&lt;/code&gt;&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:2&#34;&gt;
&lt;p&gt;sobre a organiza√ß√£o do conte√∫do em categorias e tags, leia o post &lt;a href=&#34;https://gmgall.net/blog/hello-world/&#34;&gt;Hello World&lt;/a&gt;&amp;#160;&lt;a href=&#34;#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&amp;#160;&lt;a href=&#34;#fnref1:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&amp;#160;&lt;a href=&#34;#fnref2:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&amp;#160;&lt;a href=&#34;#fnref3:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&amp;#160;&lt;a href=&#34;#fnref4:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Licen√ßa</title>
      <link>https://gmgall.net/license/</link>
      <pubDate>Tue, 31 Jan 2023 11:08:22 -0300</pubDate>
      
      <guid>https://gmgall.net/license/</guid>
      <description>&lt;p&gt;Salvo indica√ß√£o em contr√°rio, os textos nesse site est√£o licenciados sob a &lt;a href=&#34;http://creativecommons.org/licenses/by-nc-sa/4.0/deed.pt_BR&#34;&gt;CC BY-NC-SA 4.0&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://creativecommons.org/licenses/by-nc-sa/4.0/deed.pt_BR&#34;&gt;

&lt;figure&gt;
  &lt;img src=&#34;https://mirrors.creativecommons.org/presskit/icons/by.svg&#34; alt=&#34;atribui√ß√£o&#34; /&gt;
&lt;/figure&gt;




&lt;figure&gt;
  &lt;img src=&#34;https://mirrors.creativecommons.org/presskit/icons/nc.svg&#34; alt=&#34;n√£o comercial&#34; /&gt;
&lt;/figure&gt;




&lt;figure&gt;
  &lt;img src=&#34;https://mirrors.creativecommons.org/presskit/icons/sa.svg&#34; alt=&#34;mesmos termos&#34; /&gt;
&lt;/figure&gt;



&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Build Websites With Hugo</title>
      <link>https://gmgall.net/books/build-websites-with-hugo/</link>
      <pubDate>Sun, 15 Jan 2023 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/build-websites-with-hugo/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://gohugo.io/&#34;&gt;Hugo&lt;/a&gt; √© o gerador de sites est√°ticos usado para gerar esse site. Depois de alguma pesquisa, me pareceu a melhor ferramenta do tipo dispon√≠vel.&lt;/p&gt;
&lt;p&gt;Adot√°-lo n√£o foi um processo r√°pido para mim. Sempre que eu parava para estud√°-lo por tutoriais no YouTube ou pela documenta√ß√£o oficial, acabava um pouco frustrado por n√£o estar entendendo 100% do que estava acontecendo. A√≠ deixava ele de lado por um tempo.&lt;/p&gt;
&lt;p&gt;O Hugo n√£o √© uma ferramenta dif√≠cil de usar, longe disso. O problema √© que com frequ√™ncia eu esbarrava em termos espec√≠ficos dele nos tutoriais. Nunca existia muita preocupa√ß√£o em explicar o que eles significavam. Parecia que os autores sempre assumiam algum conhecimento pr√©vio da ferramenta e eu n√£o tinha conhecimento algum.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://gohugo.io/content-management/front-matter/&#34;&gt;&lt;em&gt;Front matter&lt;/em&gt;&lt;/a&gt;, &lt;a href=&#34;https://gohugo.io/content-management/archetypes/&#34;&gt;&lt;em&gt;archetypes&lt;/em&gt;&lt;/a&gt;, &lt;a href=&#34;https://gohugo.io/content-management/page-bundles/&#34;&gt;&lt;em&gt;page bundles&lt;/em&gt;&lt;/a&gt;, &lt;a href=&#34;https://gohugo.io/content-management/shortcodes/&#34;&gt;&lt;em&gt;shortcodes&lt;/em&gt;&lt;/a&gt;, &lt;a href=&#34;https://gohugo.io/content-management/taxonomies/&#34;&gt;&lt;em&gt;taxonomies&lt;/em&gt;&lt;/a&gt;&amp;hellip; Um ou mais termos desses eventualmente apareciam &amp;ldquo;jogados&amp;rdquo; no meio da explica√ß√£o e isso me fazia adiar o consumo daquela documenta√ß√£o para depois que eu tivesse dominado esses conceitos.&lt;/p&gt;
&lt;p&gt;A documenta√ß√£o oficial √© boa, mas mais como guia de refer√™ncia do que para aprender do zero.&lt;/p&gt;
&lt;p&gt;O livro &lt;em&gt;Build Websites With Hugo&lt;/em&gt; foi o livro que me fez sair desse zero para decidir manter esse site com o Hugo. &lt;strong&gt;√â um livro 100% orientado pela pr√°tica.&lt;/strong&gt; A proposta dele √© fazer um site de portf√≥lio pessoal que sai do mais simples poss√≠vel e vai ficando mais sofisticado a cada cap√≠tulo.&lt;/p&gt;
&lt;p&gt;Eu fui lendo, tomando notas e fazendo o site proposto pelo livro. Mantive a evolu√ß√£o do site em &lt;a href=&#34;https://github.com/gmgall/hugo-example&#34;&gt;um reposit√≥rio git&lt;/a&gt; e tentei fazer mensagens de &lt;em&gt;commit&lt;/em&gt; informativas para eu poder rever algum conceito depois caso fosse necess√°rio.&lt;/p&gt;
&lt;p&gt;2 coisas &amp;ldquo;clarearam&amp;rdquo; bastante o Hugo para mim:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ler esse livro, fazendo o site proposto e&lt;/li&gt;
&lt;li&gt;fazer esse site que voc√™ est√° lendo com ele.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Escolhi &lt;a href=&#34;https://themes.gohugo.io/themes/smol/&#34;&gt;um tema&lt;/a&gt; &lt;a href=&#34;https://themes.gohugo.io/tags/minimal/&#34;&gt;minimalista&lt;/a&gt; e fiz umas poucas adapta√ß√µes. Al√©m da minha prefer√™ncia por sites em que o foco √© o conte√∫do, ser um tema simples tornou mais f√°cil fazer pequenas altera√ß√µes.&lt;/p&gt;
&lt;p&gt;Al√©m de interessante, foi bem divertido. Esse livro √© o manual que falta para o Hugo.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Hello World</title>
      <link>https://gmgall.net/blog/hello-world/</link>
      <pubDate>Thu, 12 Jan 2023 13:45:38 -0300</pubDate>
      
      <guid>https://gmgall.net/blog/hello-world/</guid>
      <description>&lt;p&gt;Eu j√° tentei manter um site pessoal na internet N vezes. Nunca foi &amp;ldquo;pra frente&amp;rdquo;. Essa √© a tentativa N + 1.&lt;/p&gt;
&lt;p&gt;N√£o preciso ser convencido da import√¢ncia da escrita, sei dos benef√≠cios que posso tirar dela. Escrever nos ajuda a entender as coisas, robustece nosso pensamento. Existem coisas que parecem bem estruturadas na nossa cabe√ßa at√© que tentemos escrever ou conversar com algu√©m sobre. Escrever √© &lt;a href=&#34;https://en.wikipedia.org/wiki/Debugging&#34;&gt;&lt;em&gt;debugar&lt;/em&gt;&lt;/a&gt; a si mesmo.&lt;/p&gt;
&lt;p&gt;Depois que entendi isso, abandonei qualquer pretens√£o de originalidade, que, ali√°s, √© &lt;a href=&#34;https://guzey.com/personal/why-have-a-blog/#but-i-dont-have-anything-original-to-say-and-i-would-be-just-repeating-things-said-elsewhere-on-the-internet&#34;&gt;superestimada&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Ainda assim, a procrastina√ß√£o seguia. Eu implicava com 2 coisas principalmente: a organiza√ß√£o do conte√∫do e a &lt;em&gt;stack&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id=&#34;organiza√ß√£o-do-conte√∫do&#34;&gt;Organiza√ß√£o do conte√∫do&lt;/h2&gt;
&lt;p&gt;Ter um blog em que escrevesse tudo que eu quisesse, usando apenas tags para organizar o conte√∫do, n√£o me parecia ideal. E se algu√©m de TI entrasse no site buscando conte√∫do t√©cnico e tivesse que navegar por um monte de textos opinativos? E se alguma amiga de fora da √°rea de tecnologia entrasse no site e visse um monte de textos sobre desenvolvimento de software?&lt;/p&gt;
&lt;p&gt;Quero poder escrever sobre tudo que me interessa, mas tamb√©m n√£o quero alienar uma potencial audi√™ncia apresentando tudo &amp;ldquo;junto e misturado&amp;rdquo;, numa forma dif√≠cil de navegar.&lt;/p&gt;
&lt;p&gt;Considerei sites separados para cada tipo de conte√∫do, mas o trabalho extra necess√°rio para manter mais de um site me demoveu dessa ideia. Fora que suscita a pergunta: qual crit√©rio eu deveria usar para colocar determinado conte√∫do num site e n√£o no outro? Os sites pessoais mais &lt;a href=&#34;https://aurelio.net/&#34;&gt;interessantes&lt;/a&gt; &lt;a href=&#34;https://epxx.co/&#34;&gt;que&lt;/a&gt; &lt;a href=&#34;https://thobias.org/&#34;&gt;conhe√ßo&lt;/a&gt; tratam de &lt;a href=&#34;https://epxx.co/artigos/index_pens.html&#34;&gt;tudo&lt;/a&gt; &lt;a href=&#34;https://aurelio.net/fvm/&#34;&gt;que &amp;ldquo;d√° na telha&amp;rdquo;&lt;/a&gt; dos donos. O meu seria assim tamb√©m.&lt;/p&gt;
&lt;p&gt;Foi remoendo as quest√µes acima que decidi usar a organiza√ß√£o com 2 &lt;a href=&#34;https://gohugo.io/content-management/taxonomies/&#34;&gt;taxonomias&lt;/a&gt; (&lt;strong&gt;categorias e tags&lt;/strong&gt;), que j√° √© usada em muitos blogs.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Uma &lt;a href=&#34;https://gmgall.net/categories&#34;&gt;categoria&lt;/a&gt; √© uma classifica√ß√£o mais ampla e dificilmente um post vai estar em mais de uma categoria. Para come√ßar, terei 2 categorias: uma para posts &lt;a href=&#34;https://gmgall.net/categories/tech&#34;&gt;t√©cnicos&lt;/a&gt; e outra para posts &lt;a href=&#34;https://gmgall.net/categories/non-tech&#34;&gt;n√£o t√©cnicos&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Uma &lt;a href=&#34;https://gmgall.net/tags&#34;&gt;tag&lt;/a&gt; √© uma classifica√ß√£o mais estrita e frequentemente um post ter√° mais de uma tag.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Al√©m disso, existem as se√ß√µes de conte√∫do separadas. Nelas cada p√°gina pode receber categorias e tags tamb√©m, mas elas s√£o apresentadas de forma diferente dos textos. A √∫nica se√ß√£o separada hoje √© a de &lt;a href=&#34;https://gmgall.net/books&#34;&gt;leituras&lt;/a&gt;. Pretendo que cada p√°gina sobre um livro mostre ao menos uma imagem da capa e informa√ß√µes do livro em destaque.&lt;/p&gt;
&lt;p&gt;Cada categoria, tag e se√ß√£o separada ter√° seu pr√≥prio &lt;em&gt;feed&lt;/em&gt; RSS. Um potencial leitor pode assinar o &lt;em&gt;feed&lt;/em&gt; espec√≠fico e acompanhar apenas o conte√∫do de seu interesse.&lt;/p&gt;
&lt;h2 id=&#34;stack&#34;&gt;Stack&lt;/h2&gt;
&lt;p&gt;Depois de algumas tentativas de usar &lt;a href=&#34;https://en.wikipedia.org/wiki/Content_management_system&#34;&gt;CMS&lt;/a&gt;s, ficou claro que eu n√£o queria ter o trabalho de instalar e manter atualizados os softwares de uma pilha &lt;a href=&#34;https://en.wikipedia.org/wiki/LAMP_(software_bundle)&#34;&gt;LAMP&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Static_site_generator&#34;&gt;Geradores de sites est√°ticos&lt;/a&gt; seriam meu caminho. Li sobre as op√ß√µes dispon√≠veis e fiquei convencido de que o melhor &amp;ldquo;no mercado&amp;rdquo; √© o &lt;a href=&#34;https://gohugo.io/&#34;&gt;Hugo&lt;/a&gt;. Decidi us√°-lo. Gostei do que vi nos primeiros usos, mas demorei um pouco at√© encontrar um &lt;a href=&#34;https://www.pragprog.com/titles/bhhugo/build-websites-with-hugo/&#34;&gt;livro que me ensinou decentemente&lt;/a&gt; sobre ele.&lt;/p&gt;
&lt;p&gt;Para hospedagem, estou usando &lt;a href=&#34;https://pages.github.com/&#34;&gt;GitHub Pages&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Para fazer o &lt;em&gt;build&lt;/em&gt; e o &lt;em&gt;deploy&lt;/em&gt;, estou usando &lt;a href=&#34;https://github.com/features/actions&#34;&gt;GitHub Actions&lt;/a&gt;. Existem &lt;em&gt;actions&lt;/em&gt; prontas para &lt;a href=&#34;https://github.com/marketplace/actions/hugo-setup&#34;&gt;instalar o Hugo&lt;/a&gt; e &lt;a href=&#34;https://github.com/marketplace/actions/github-pages-action&#34;&gt;fazer o &lt;em&gt;deploy&lt;/em&gt; no GitHub Actions&lt;/a&gt;, ent√£o o &lt;a href=&#34;https://github.com/gmgall/gmgall.net/blob/main/.github/workflows/gh-pages-deployment.yml&#34;&gt;&lt;em&gt;workflow&lt;/em&gt;&lt;/a&gt; fica relativamente simples.&lt;/p&gt;
&lt;p&gt;O primeiro lugar em que li sobre esse tipo de &lt;em&gt;workflow&lt;/em&gt; foi em &lt;a href=&#34;https://www.morling.dev&#34;&gt;morling.dev&lt;/a&gt;, no post &lt;a href=&#34;https://www.morling.dev/blog/automatically-deploying-hugo-website-via-github-actions/&#34;&gt;&lt;em&gt;Automatically Deploying a Hugo Website via GitHub Actions&lt;/em&gt;&lt;/a&gt;. Seguindo esse caminho, voc√™ fica com um reposit√≥rio √∫nico que cont√©m o c√≥digo fonte do site (em um &lt;em&gt;branch&lt;/em&gt; principal) e os arquivos que efetivamente s√£o servidos (em um &lt;em&gt;branch&lt;/em&gt; &lt;a href=&#34;https://dev.to/mcaci/how-to-create-an-orphan-branch-in-git-35ac&#34;&gt;√≥rf√£o&lt;/a&gt; &lt;code&gt;gp-pages&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Outro padr√£o que vi sendo bastante usado √© ter 2 reposit√≥rios: um s√≥ para o c√≥digo fonte e outro s√≥ para os arquivos que ser√£o servidos pelo GitHub Pages. Veja um exemplo em &lt;a href=&#34;https://ruddra.com/hugo-deploy-static-page-using-github-actions/&#34;&gt;&lt;em&gt;Hugo: Deploy Static Site using GitHub Actions&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Pensar nisso tudo acima antes mesmo de ter o que postar √© complicar demais o que √© simples, voc√™ deve estar pensando. O ideal seria simplesmente come√ßar e ir ajustando o que fosse necess√°rio pelo caminho.&lt;/p&gt;
&lt;p&gt;E voc√™ estaria certa. Procrastinei manter um site na web por muito mais tempo do que me orgulho. Estou com o dom√≠nio gmgall.net &amp;ldquo;parado&amp;rdquo; h√° v√°rios anos.&lt;/p&gt;
&lt;p&gt;Protelei tanto por uma ansiedade de me expor que s√≥ consegui lidar melhor com &lt;a href=&#34;https://pt.wikipedia.org/wiki/Psicoterapia&#34;&gt;ajuda&lt;/a&gt;. Ent√£o deseje-me sorte e seja bem vinda, pessoa leitora! üòÅ&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>A Arte de Pedir</title>
      <link>https://gmgall.net/books/a-arte-de-pedir/</link>
      <pubDate>Mon, 29 Aug 2022 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/a-arte-de-pedir/</guid>
      <description>&lt;p&gt;Esse livro √© uma elabora√ß√£o mais longa dos assuntos abordados no TED Talk da Amanda Palmer.&lt;/p&gt;

&lt;div style=&#34;position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe src=&#34;https://www.youtube.com/embed/xMj_P_6H69g&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;&#34; allowfullscreen title=&#34;YouTube Video&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;

&lt;p&gt;Hoje √© rotineiro, mas no tempo de publica√ß√£o do livro, &lt;em&gt;crowdfunding&lt;/em&gt; n√£o era uma coisa t√£o comum. Abandonar os intermedi√°rios e pedir financiamento aos f√£s diretamente parecia uma loucura, alguns interpretavam como mendic√¢ncia.&lt;/p&gt;
&lt;p&gt;Ela pr√≥pria enfrentou d√∫vidas no processo, mesmo compreendendo que pedir ajuda √© um processo de troca, humano e natural. Mesmo j√° tendo pedido ajuda n√£o financeira em v√°rios momentos de sua vida de artista, seja por um lugar para dormir, comida ou instrumentos musicais.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[&amp;hellip;] n√£o √© tanto o ato de pedir que trava a gente. √â o que est√° por tr√°s: o medo de ser vulner√°vel, o medo de ser rejeitado, o medo de parecer fraco ou carente. O medo de ser visto como um estorvo, e n√£o como agente ativo da comunidade. Isso leva essencialmente ao distanciamento entre as pessoas [&amp;hellip;]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Muitas vezes, o que nos imobiliza √© a pr√≥pria sensa√ß√£o de que n√£o merecemos ajuda.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Esse √© o tema principal: &lt;strong&gt;o valor em pedir e aceitar ajuda&lt;/strong&gt;. O individualismo exacerbado promovido pelo capitalismo nos tira essa perspectiva, de que √© normal ser ajudado. Quem pede ajuda receia ser visto como um fardo. Perdemos nossa capacidade de pedir ajuda, especialmente no campo emocional.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Em geral, eles n√£o tinham muita dificuldade em certos departamentos do pedir, mas, quando se tratava das suas necessidades emocionais, isso virava um problema. Sabiam pedir aumento, mas n√£o conseguiam pedir um abra√ßo.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;√â inspirador e n√£o √© um livro de autoajuda. √â a jornada da autora de sua √©poca de est√°tua viva at√© o rompimento com sua gravadora e campanha recordista no &lt;a href=&#34;https://www.kickstarter.com/&#34;&gt;Kickstarter&lt;/a&gt;, passando pelo adoecimento de seu melhor amigo, o casamento com Neil Gaiman, um aborto e muito mais.&lt;/p&gt;
&lt;p&gt;Nesse caminho, vemos as dificuldades e sucessos de Amanda no processo de pedir e a comunidade criada com ela e seus ajudadores.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Uma √∫ltima nota: como a vis√£o de que produzir arte n√£o √© trabalho √© tacanha, n√£o? E quando √© percebido como trabalho, √© valorado de acordo com algum validador externo. Irritante.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Ningu√©m teria gritado VAI TRABALHAR para o cara que estivesse pegando os ingressos na porta de uma galeria em que A Noiva estivesse em exposi√ß√£o. √â como se, com o passar do tempo, tanto os artistas quanto o p√∫blico tivessem se acostumado √† presen√ßa de um agente legitimador, um intermedi√°rio comercial que lan√ßa um pozinho de pirlimpimpim profissional sobre a troca.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>Engenheiros do Caos</title>
      <link>https://gmgall.net/books/engenheiros-do-caos/</link>
      <pubDate>Sun, 21 Aug 2022 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/engenheiros-do-caos/</guid>
      <description>&lt;p&gt;Esse livro apresenta um hist√≥rico recente dos m√©todos de comunica√ß√£o dessa &amp;ldquo;nova&amp;rdquo; direita populista que tem &amp;ldquo;nadado de bra√ßada&amp;rdquo; nas redes sociais.&lt;/p&gt;
&lt;p&gt;Uma combina√ß√£o de l√≠deres populistas com t√©cnicas sofisticadas de persuas√£o baseadas em &lt;em&gt;microtargeting&lt;/em&gt;, &lt;em&gt;big data&lt;/em&gt; e &lt;em&gt;fake news&lt;/em&gt; resultou em dividendos eleitorais por todo o mundo, especialmente em uma conjuntura de revolta intensa  - por√©m difusa - com os ditos pol√≠ticos &amp;ldquo;tradicionais&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Brexit, Donald Trump, Boris Johnson, Matteo Salvini e Jair Bolsonaro s√£o flagelos paridos por esse processo. Compreender as ferramentas usadas por esses engenheiros do caos √© um pequeno passo para sairmos desse buraco.&lt;/p&gt;
&lt;p&gt;Esse √© o livro que mais recomendei em 2022.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Em termos pol√≠ticos, a chegada do Big Data poderia ser comparada √† inven√ß√£o do microsc√≥pio. No passado, a partir de sondagens sempre aleat√≥rias, os comunicadores pol√≠ticos podiam atingir grandes aglomerados demogr√°ficos ou profissionais: os jovens, os professores do setor p√∫blico, as donas de casa e assim por diante. Hoje, o trabalho dos f√≠sicos estat√≠sticos permite enviar uma mensagem personalizada a cada eleitor com base nas caracter√≠sticas individuais.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>C.S. Lewis, Richard Dawkins e o Sentido da Vida</title>
      <link>https://gmgall.net/books/sentido-da-vida/</link>
      <pubDate>Sun, 07 Aug 2022 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/sentido-da-vida/</guid>
      <description>&lt;p&gt;O autor Alister McGrath √© um ex-ateu, te√≥logo e apologista crist√£o. Nesse livro, ele se prop√µe a &amp;ldquo;mediar um debate&amp;rdquo; entre &lt;a href=&#34;https://pt.wikipedia.org/wiki/C._S._Lewis&#34;&gt;C.S. Lewis&lt;/a&gt; e &lt;a href=&#34;https://pt.wikipedia.org/wiki/Richard_Dawkins&#34;&gt;Richard Dawkins&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Lido h√° 10 anos, certamente me empolgaria muito. Lido em 2022, depois de alguns anos pensando e lendo sobre as quest√µes tratadas no livro, pareceu-me que n√£o fui apresentado a nada muito novo.&lt;/p&gt;
&lt;p&gt;Fiquei com a sensa√ß√£o que j√° tinha antes da leitura: crist√£os - e religiosos em geral - n√£o est√£o preocupados em discutir se suas cren√ßas est√£o pr√≥ximas da materialidade ou n√£o, est√£o interessados em dar sentido √†s suas vidas.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Lewis sugere que julguemos um conjunto de cren√ßas por sua capacidade de dar sentido √†s coisas. Mas, certamente, devemos perguntar que evid√™ncia pode nos levar, em primeiro lugar, a adotar essas cren√ßas, em vez de apenas tom√°-las como certas e, em seguida, proceder √† avalia√ß√£o delas.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Essa busca por sentido √© muito leg√≠tima, n√£o h√° nada errado nisso.&lt;/strong&gt; S√≥ me parece uma complica√ß√£o absurda adotar toda uma mitologia para isso.&lt;/p&gt;
&lt;p&gt;Em outros momentos, o autor parece tangenciar o caminho batido de afirmar que conhecer propriedades do universo √© pouco importante ou mon√≥tono.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Aqui est√£o tr√™s afirma√ß√µes que acredito estar corretas, com base nas evid√™ncias dispon√≠veis para mim:
1. A precipita√ß√£o pluviom√©trica anual na cidade inglesa de Durham em 1870 foi de 604,8 mm.
2. O peso at√¥mico do √∫nico is√≥topo est√°vel de ouro √© 197.
3. A f√≥rmula qu√≠mica da √°gua √© H2O.&lt;/p&gt;
&lt;p&gt;Todas essas tr√™s afirma√ß√µes atendem ao padr√£o ouro de confiabilidade, pois cada uma delas √© rigorosamente baseada em evid√™ncias. No entanto, nenhuma delas parece muito importante. Um mundo baseado nessas afirma√ß√µes n√£o √© apenas muito pequeno e mon√≥tono, √© existencialmente insatisfat√≥rio ‚Äì n√£o passa de uma agrega√ß√£o de fatos. Acho que viver em um mundo t√£o mental n√£o seria grande coisa, e certamente n√£o seria significativo. N√≥s precisamos de mais.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Acho isso de uma falta de curiosidade absurda. Citando &lt;a href=&#34;https://pt.wikipedia.org/wiki/Douglas_Adams&#34;&gt;Douglas Adams&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;N√£o basta apreciar a beleza de um jardim, sem ter que imaginar que h√° fadas nele?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Ficando s√≥ no fato 2: o que &lt;strong&gt;exatamente&lt;/strong&gt; significa ter peso at√¥mico 197? Isso torna o ouro parecido com mais algum elemento no universo? Qual a diferen√ßa entre um is√≥topo est√°vel e um inst√°vel? O modelo at√¥mico em si, surgiu como? √â √∫til por qu√™? Que fen√¥menos ele explica? Se explica, significa que n√≥s, feitos de mat√©ria, somos, como disse &lt;a href=&#34;https://pt.wikipedia.org/wiki/Carl_Sagan&#34;&gt;Carl Sagan&lt;/a&gt;, o universo pensando sobre si pr√≥prio.&lt;/p&gt;
&lt;p&gt;Como isso √© &amp;ldquo;pequeno e mon√≥tono&amp;rdquo; ou &amp;ldquo;existencialmente insatisfat√≥rio&amp;rdquo;?&lt;/p&gt;
&lt;p&gt;Dou cr√©ditos ao autor por se dedicar a apresentar com algum cuidado as posi√ß√µes do Dawkins - apesar de &amp;ldquo;puxar a sardinha&amp;rdquo; para o Lewis - e por tratar brevemente dos limites epistemol√≥gicos dos humanos. Na minha experi√™ncia, √© mais boa vontade com um ateu do que demonstra a m√©dia dos crist√£os.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Misto-Quente</title>
      <link>https://gmgall.net/books/misto-quente/</link>
      <pubDate>Sat, 06 Aug 2022 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/misto-quente/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;Reunidos ao meu redor estavam os fracos em vez dos fortes, os feios em vez dos belos, os perdedores em vez dos vencedores. Era como se meu destino fosse cruzar a vida em companhia deles. Isto n√£o me incomodava tanto quanto o fato de que para esses cretinos, para esses companheiros idiotas, eu era um cara irresist√≠vel. Eu era como um monte de bosta que atra√≠a moscas em vez de ser uma flor desejada por borboletas e abelhas.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Esse √© um romance de forma√ß√£o com aspectos autobiogr√°ficos. O protagonista n√£o teve uma inf√¢ncia e adolesc√™ncia f√°ceis.&lt;/p&gt;
&lt;p&gt;Nasceu pobre, em fam√≠lia de origem alem√£. Cresceu em plena &lt;a href=&#34;https://en.wikipedia.org/wiki/Wall_Street_Crash_of_1929&#34;&gt;recess√£o p√≥s-1929&lt;/a&gt;, sem perspectivas de ser mais que m√£o de obra superexplorada. Na adolesc√™ncia teve um caso grave de acne, que o afastou das garotas. O pai era violento e autorit√°rio. A m√£e era passiva.&lt;/p&gt;
&lt;p&gt;O √∫nico al√≠vio para aquela realidade desgra√ßada era a literatura e o √°lcool.&lt;/p&gt;
&lt;p&gt;√â um livro bom e ruim. Bom porque voc√™ se envolve com o estilo do narrador, com as observa√ß√µes √°cidas que ele faz. Ruim porque parece que nada vai melhorar nunca, para ningu√©m.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Por que tudo se reduz sempre a escolher entre algo ruim ou algo ainda pior?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Acho que a √∫nica sensa√ß√£o boa que o leitor tem em alguns momentos √© a de que ele lidaria melhor com algumas das situa√ß√µes narradas. O protagonista &amp;ldquo;n√£o se ajuda&amp;rdquo;. Essa sensa√ß√£o some logo quando voc√™ percebe que √© privilegiado comparado com ele. A√≠ sobra a culpa por ter se achado superior.&lt;/p&gt;
&lt;p&gt;Recomendo, mas leia ciente que n√£o √© uma hist√≥ria feliz. N√£o tem reden√ß√£o no final. N√£o tem her√≥is.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>A Constru√ß√£o de Mim Mesma: Uma Hist√≥ria de Transi√ß√£o de G√™nero</title>
      <link>https://gmgall.net/books/a-construcao-de-mim-mesma/</link>
      <pubDate>Sun, 31 Jul 2022 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/a-construcao-de-mim-mesma/</guid>
      <description>&lt;p&gt;Esse livro narra a hist√≥ria da autora, mulher transg√™nero, que decidiu transicionar aos 50 anos de idade ap√≥s um infarto que a fez perceber que n√£o era vi√°vel continuar vivendo como vinha at√© aquele ponto.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Ser voc√™ mesma √© algo que pode ser reprimido e recalcado, mas nunca riscado da sua lista de desejos absolutamente fundamentais. O destino de cada pessoa √© ser e se expressar no mundo tal como ela √©. Essa √© a principal, talvez a √∫nica, raz√£o de ser da exist√™ncia humana, e ningu√©m vai se livrar de ao menos tentar realizar essa tarefa enquanto estiver viva.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Por mais que o nosso desejo pare√ßa abomin√°vel aos olhos da sociedade, tudo que temos a fazer, se quisermos ser criaturas minimamente equilibradas e felizes, √© correr atr√°s dele, com todas as nossas for√ßas. Como prop√¥s Lacan, a √∫nica coisa da qual se pode ser culpado √© de ter desistido do seu desejo.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;A narrativa come√ßa com a inf√¢ncia da autora, per√≠odo em que ela j√° era pressionada por um sentimento de inadequa√ß√£o muito forte.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Desde a minha primeira volta nos sapatos de salto da minha m√£e, a percep√ß√£o que me acompanha √© que eu faria um favor enorme ao mundo n√£o sendo quem eu sou.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;O livro n√£o √© meramente um relato autobiogr√°fico das dificuldades enfrentadas por uma pessoa transg√™nero, os cap√≠tulos tamb√©m s√£o recheados com as reflex√µes da Let√≠cia sobre pap√©is de g√™nero e o car√°ter revolucion√°rio da transi√ß√£o de g√™nero. Esse √∫ltimo aspecto s√≥ fui enxergar ap√≥s essa leitura.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A cren√ßa comum entre pessoas transg√™neras √© que realizar a transi√ß√£o de g√™nero implica a ado√ß√£o integral de padr√µes de conduta e pap√©is sociais determinados pelo binarismo de g√™nero. Tal procedimento elimina o car√°ter transgressivo e revolucion√°rio da transi√ß√£o de g√™nero, fazendo dela nada mais do que simples readequa√ß√£o da pessoa ao arbitr√°rio e opressivo dispositivo bin√°rio de g√™nero vigente na sociedade.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;O paradoxo √© que, para tornar-se algu√©m perfeitamente pass√°vel, √© preciso abdicar inteiramente de qualquer visibilidade social como pessoa transg√™nera. A pessoa deve diluir-se no contexto geral da sociedade [&amp;hellip;]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;√â um texto muito franco. A autora n√£o tem problemas em admitir, por exemplo, que sentiu al√≠vio ao descobrir que o pai mantinha uma segunda fam√≠lia porque isso o tirava do pedestal de pessoa perfeita&amp;hellip;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;O pai que, durante toda a minha vida, tinha sido o basti√£o da moral e dos bons costumes, aparecia agora como uma pessoa comum, sujeita aos desejos e √†s falhas de qualquer mortal.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ou que projetava na esposa a feminilidade que n√£o conseguia realizar, o que felizmente n√£o resultou em separa√ß√£o, mas gerava conflitos entre o casal.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Eu buscava realizar nela a mulher que eu n√£o tinha for√ßas para realizar em mim. Na perspectiva do olhar masculino,&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Recomendo especialmente para pessoas cis, que frequentemente ficam a vida inteira sem conhecer as dificuldades enfrentadas pelas pessoas transg√™nero ou sem questionar pap√©is de g√™nero.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Demian</title>
      <link>https://gmgall.net/books/demian/</link>
      <pubDate>Wed, 27 Jul 2022 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/demian/</guid>
      <description>&lt;p&gt;Uma das melhores leituras do ano at√© agora, mas dif√≠cil de resenhar. √â um &lt;a href=&#34;https://en.wikipedia.org/wiki/Bildungsroman&#34;&gt;romance de forma√ß√£o&lt;/a&gt; que narra o amadurecimento do menino Emil Sinclair.&lt;/p&gt;
&lt;p&gt;√â a trajet√≥ria de um garoto tentando tornar-se si mesmo. Isso exige o rompimento com o passado e com o &amp;ldquo;ninho&amp;rdquo; e a concilia√ß√£o do &amp;ldquo;mundo luminoso&amp;rdquo; com o &amp;ldquo;mundo sombrio&amp;rdquo; (essa dualidade permeia toda a obra).&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Hoje sei muito bem que nada na vida repugna tanto ao homem do que seguir pelo caminho que o conduz a si mesmo!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Todavia, s√≥ me interessam os passos que tive de dar na vida para chegar a mim mesmo. Deixo resplandecer na dist√¢ncia todos os pontos de repouso, ilhas encantadas e para√≠sos, cujo sortil√©gio provei e aos quais n√£o desejo voltar.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;E h√° muitos tamb√©m que se embara√ßam para sempre nesses escolhos e permanecem a vida toda agarrados a um passado sem retorno, ao sonho do para√≠so perdido, o pior e o mais assassino de todos os sonhos.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Vejo que pensas mais do que podes exprimir. Mas vejo tamb√©m que nunca viveste completamente aquilo que pensas, e isso n√£o √© bom. Somente as ideias que vivemos √© que t√™m valor. Percebeste que o ‚Äúmundo permitido‚Äù era apenas a metade do mundo, e trataste de ocultar a outra metade, como fazem os religiosos e os professores. Jamais o conseguir√°s! Ningu√©m o consegue, a partir do momento em que come√ßa a pensar.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Quanto a mim, me sentia sem cuidados. Mantinha √† minha maneira, t√£o singular quanto pouco atrativa ‚Äî com bebedeira e jogo ‚Äî a luta contra o mundo: era minha forma de protesto. Mas com ela me aniquilava, e ao perceber isso equacionava √†s vezes a quest√£o nos seguintes termos: ‚ÄúSe o mundo n√£o podia utilizar homens como eu, se n√£o tinha para mim nenhum lugar melhor nem podia arranjar-me uma fun√ß√£o mais alta, ent√£o n√£o me restava outro caminho sen√£o o aniquilamento. Pior para o mundo.‚Äù&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Quando me comparava com os demais, sentia-me muitas vezes orgulhoso e satisfeito comigo mesmo, e em outras tantas deprimido e humilhado. Ora me acreditava um verdadeiro g√™nio, ora meio maluco. N√£o me era poss√≠vel compartilhar a vida e as alegrias dos outros rapazes de minha idade, e √†s vezes reprovava asperamente o meu isolamento e sentia profunda tristeza, crendo-me definitivamente afastado deles, sentindo-me exclu√≠do da vida.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;√Äs vezes voc√™ se considera demasiado esquisito e se reprova por seguir caminhos diversos dos da maioria. Deixe disso. Contemple o fogo, as nuvens e quando surgirem press√°gios e as vozes soarem em sua alma abandone-se a elas sem perguntar se isso conv√©m ou √© do gosto do senhor seu pai ou do professor ou de algum bom deus qualquer. Com isso s√≥ conseguimos perder-nos, entrar na escala burguesa e fossilizar-nos.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;N√£o devemos temer nem julgar il√≠cito nada do que nossa alma deseja em n√≥s mesmos.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Mas o que impulsionava minha evolu√ß√£o interior n√£o era essa ocupa√ß√£o erudita, mas algo totalmente contr√°rio. O que verdadeiramente me fazia bem era o progresso do conhecimento de mim mesmo, minha confian√ßa crescente em meus pr√≥prios sonhos, ideias e intui√ß√µes; a revela√ß√£o, cada dia mais clara, do poder que em mim mesmo levava.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;‚ÄúQuem quiser nascer tem de destruir um mundo‚Äù ‚Äî eis a mensagem ‚Äî destruir no sentido de romper com o passado e as tradi√ß√µes j√° mortas, de desvincular-se do meio excessivamente c√¥modo e seguro da inf√¢ncia para a consequente dolorosa busca da pr√≥pria raz√£o de existir: ser √© ousar ser.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;O pouco que escrevi e esses trechos que destaquei n√£o fazem jus √† leitura da obra completa. Recomendo demais.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Herland: A Terra das Mulheres</title>
      <link>https://gmgall.net/books/herland/</link>
      <pubDate>Wed, 20 Jul 2022 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/herland/</guid>
      <description>&lt;p&gt;Esse livro √© uma utopia de 1915 que descreve uma sociedade formada unicamente por mulheres.&lt;/p&gt;
&lt;p&gt;A hist√≥ria √© narrada por um soci√≥logo, que junto de outros 2 companheiros, fazem uma expedi√ß√£o at√© esse pa√≠s. O narrador seria o personagem com a vis√£o mais &amp;ldquo;neutra&amp;rdquo; e &amp;ldquo;cient√≠fica&amp;rdquo; dos 3. Um outro √© um sulista estadunidense que idealiza as mulheres como criaturas perfeitas e o terceiro √© um tradicional &amp;ldquo;mach√£o&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;A autora questiona pap√©is de g√™nero por meio do choque cultural que esses 3 personagens t√™m com as nativas.&lt;/p&gt;
&lt;p&gt;√â uma hist√≥ria interessante, mas muito dos questionamentos que a autora levanta sobre as quest√µes de g√™nero n√£o foram novidade para mim. J√° esperava alguns deles.&lt;/p&gt;
&lt;p&gt;A sociedade ut√≥pica d√° uma √™nfase muito grande na maternidade. Era o servi√ßo social mais importante para as habitantes. A forma como tudo √© organizado em torno da educa√ß√£o da pr√≥xima gera√ß√£o me chamou bem mais a aten√ß√£o do que a quest√£o de g√™nero em si. Esse tema dialoga um pouco com &lt;em&gt;A M√£o Esquerda da Escurid√£o&lt;/em&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Nenhuma filha daquela terra deparava com a grosseria excessiva que frequentemente dirigimos √†s nossas crian√ßas. Elas eram pessoas tamb√©m, desde pequenas; o maior tesouro da na√ß√£o.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;A princ√≠pio, eu havia me perguntado quando iriam para a escola, ent√£o descobri que nunca iam. Tudo dizia respeito √† educa√ß√£o, mas n√£o havia escola.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Existem alguns temas secund√°rios que tamb√©m s√£o interessantes e infelizmente n√£o foram t√£o desenvolvidos quanto a quest√£o de g√™nero. Falo de alguns abaixo.&lt;/p&gt;
&lt;p&gt;Relacionamentos amorosos eram radicalmente diferentes, com praticamente nenhuma ideia de posse.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Agora tinha ficado claro para n√≥s que aquelas mulheres tinham a mais alta, intensa e delicada ideia de privacidade, e nem a mais vaga no√ß√£o da &lt;em&gt;solitude a deux&lt;/em&gt; que tanto apreciamos. Todas elas pareciam defender a teoria de quartos e banheiros separados. Desde a mais tenra inf√¢ncia, cada uma tinha uma su√≠te pr√≥pria, e um dos marcos de entrada na vida adulta era a adi√ß√£o de um c√¥modo onde receber as amigas.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;‚Äî Mas &lt;em&gt;estamos&lt;/em&gt; sozinhos, querido - Ellador me explicou com toda a paci√™ncia. ‚Äî Estamos sozinhos nesta enorme floresta; podemos comer em qualquer lugar: s√≥ eu e voc√™, ou em uma mesa separada, ou ainda cada um em seu quarto. Como poder√≠amos ficar ainda mais sozinhos?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;T√≠nhamos nossa solid√£o m√∫tua e agrad√°vel enquanto trabalh√°vamos, e longas e agrad√°veis conversas na casa delas ou na nossa; t√≠nhamos, por assim dizer, todos os prazeres do namoro; mas n√£o havia nada do que acho que poderia ser chamado de &amp;ldquo;posse&amp;rdquo;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Patriotismo √© brevemente comentado. Esse √© outro tema que aparece em &lt;em&gt;A M√£o Esquerda da Escurid√£o&lt;/em&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Nutriam um afeto praticamente universal umas pelas outras, estabelecendo amizades fortes e inquebrant√°veis, dedicando sua devo√ß√£o ao seu pa√≠s e ao seu povo de uma maneira que nosso termo &amp;ldquo;patriotismo&amp;rdquo; n√£o √© suficiente para definir.
O patriotismo em si √© compat√≠vel com a exist√™ncia de interesses nacionais negligenciados, desonestidade, uma indiferen√ßa fria ao sofrimento de milh√µes. Patriotismo √© em grande parte orgulho e combatividade. O patriotismo em geral envolve sentimentos de superioridade e inferioridade.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Uma religi√£o n√£o baseada na dualidade bem/mal e uma sociedade antipunitivista fecham os temas que considerei interessantes. Como comentei, s√£o temas secund√°rios. O foco √© na quest√£o de g√™nero mesmo.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>A M√£o Esquerda da Escurid√£o</title>
      <link>https://gmgall.net/books/a-mao-esquerda-da-escuridao/</link>
      <pubDate>Sun, 26 Jun 2022 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/a-mao-esquerda-da-escuridao/</guid>
      <description>&lt;p&gt;Essa fic√ß√£o cient√≠fica narra a miss√£o de um humano, Genly Ai, no planeta Gethen (tamb√©m chamado de Inverno). O objetivo da miss√£o √© persuadir os l√≠deres das na√ß√µes do planeta a unirem Gethen a uma esp√©cie de comunidade universal, algo como uma &amp;ldquo;ONU planet√°ria&amp;rdquo;, que objetiva interc√¢mbio cultural e cient√≠fico.&lt;/p&gt;
&lt;p&gt;A cultura getheniana √© ricamente descrita e difere da nossa num aspecto muito fundamental: a diferen√ßa entre os g√™neros. Os gethenianos n√£o assumem permanentemente pap√©is masculinos ou femininos. Eles passam a maior parte do m√™s num estado n√£o f√©rtil, com apar√™ncia andr√≥gina. S√≥ desenvolvem caracter√≠sticas sexuais durante o per√≠odo denominado &lt;em&gt;kemmer&lt;/em&gt;, uma esp√©cie de cio, e um mesmo getheniano pode assumir caracter√≠sticas masculinas e femininas ao longo da vida, de acordo com vari√°veis ambientais.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Choque cultural n√£o era quase nada comparado ao choque biol√≥gico que sofri como macho humano em meio a seres que eram, oitenta por cento do tempo, hermafroditas assexuados.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Os efeitos sociais e culturais dessa diferen√ßa biol√≥gica s√£o grandes:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Considere: qualquer um pode trabalhar em qualquer coisa. Parece muito simples, mas os efeitos psicol√≥gicos s√£o incalcul√°veis. O fato de toda a popula√ß√£o, entre dezessete e trinta e cinco anos de idade, estar sujeita a ficar (como Nim definiu) &amp;ldquo;amarrada √† gravidez&amp;rdquo; sugere que ningu√©m aqui fica t√£o completamente &amp;ldquo;amarrado&amp;rdquo; como, provavelmente, ficam as mulheres em outros lugares - psicol√≥gica ou fisicamente. Fardo e privil√©gio s√£o compartilhados de modo bem igualit√°rio; todos t√™m o mesmo risco a correr ou a mesma escolha a fazer. Portanto, ningu√©m aqui √© t√£o completamente livre quanto um macho livre, em qualquer outro lugar.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Considere: n√£o existe nenhuma divis√£o da humanidade em metades forte e fraca, protetora/protegida, dominante/submissa, dona/escrava, ativa/passiva. Na verdade, pode-se verificar que toda a tend√™ncia ao dualismo que permeia o pensamento humano √© muito reduzida, ou alterada, aqui em Inverno.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Um homem deseja que sua virilidade seja reconhecida, uma mulher deseja que sua feminilidade seja apreciada, por mais indiretos que sejam esse reconhecimento ou essa aprecia√ß√£o. Em Inverno, isso n√£o vai existir. Julga-se ou respeita-se uma pessoa apenas como ser humano.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;O carinho pelos filhos pareceu-me profundo, efetivo e quase que desprovido de possessividade. S√≥ nessa falta de possessividade ele talvez se diferencie do que chamamos instinto &amp;ldquo;materno&amp;rdquo;. Desconfio que a distin√ß√£o entre instintos materno e paterno nem mere√ßa ser mencionada; o instinto, o desejo de proteger e de favorecer, n√£o √© uma caracter√≠stica ligada ao sexo&amp;hellip;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;O livro n√£o te coloca para pensar s√≥ em pap√©is de g√™nero. Nos trechos abaixo, temos uma reflex√£o sobre patriotismo:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Conhe√ßo pessoas, conhe√ßo cidades, fazendas, montanhas, rios e rochas, sei como o sol poente do outono se esparrama pela face de um certo tipo de terra arada nas montanhas; mas o sentido de impor uma fronteira a isso tudo, dar-lhe um nome e deixar de amar o lugar onde o nome n√£o se aplica? O que √© o amor pelo seu pa√≠s? √â o √≥dio pelo seu n√£o-pa√≠s? Ent√£o, n√£o √© uma coisa boa. √â apenas amor pr√≥prio? Isso √© bom, mas n√£o se deve fazer dele uma virtude ou uma profiss√£o de f√©&amp;hellip;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;E me perguntei, n√£o pela primeira vez, o que √© patriotismo, no que consiste verdadeiramente o amor pelo pa√≠s, como surge a terna lealdade que deixara embargada a voz de meu amigo - e como esse amor t√£o real pode se transformar, com frequ√™ncia, em intoler√¢ncia t√£o vil e insensata. Em que ponto ele se torna nocivo?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Foi uma leitura sensacional, pelos questionamentos e pelo enredo. Certamente lerei mais coisas da autora.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Fraude, Fome &amp; Fascismo: O Mito do Genoc√≠dio Ucraniano de Harvard √† Hitler</title>
      <link>https://gmgall.net/books/fraude-fome-fascismo/</link>
      <pubDate>Sat, 04 Jun 2022 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/fraude-fome-fascismo/</guid>
      <description>&lt;p&gt;O livro contesta o mito da fome-genoc√≠dio de 1932-1933, que teria sido perpetrado pela URSS contra a Ucr√¢nia. Essa √© das principais armas do arsenal de propaganda anticomunista e antissovi√©tica.&lt;/p&gt;
&lt;p&gt;As refer√™ncias s√£o abundantes: 27 p√°ginas s√£o necess√°rias s√≥ para listar a bibliografia e as notas. Quem quiser se aprofundar no assunto, est√° muito bem servido.&lt;/p&gt;
&lt;p&gt;Li j√° esperando relatos de manipula√ß√£o hist√≥rica para demonizar a URSS, mas mesmo assim fui surpreendido com a escala da campanha de desinforma√ß√£o levada a cabo por imprensa, acad√™micos, igrejas, fascistas e burgueses.&lt;/p&gt;
&lt;p&gt;Existem &amp;ldquo;fontes&amp;rdquo; que n√£o estiveram nem perto dos locais dos eventos que relataram, fotos de fomes anteriores sendo apresentadas como a de 32-33, material nazista usado como &amp;ldquo;prova&amp;rdquo;. N√∫meros de mortos eram atribu√≠dos ao evento de forma bastante arbitr√°ria, ignorando fluxos migrat√≥rios e epidemias. A ajuda enviada por Moscou e a colabora√ß√£o dos nacionalistas ucranianos (um dos principais grupos pol√≠ticos envolvidos na populariza√ß√£o do mito) aos nazistas s√£o escondidas. Esse um resumo super sucinto.&lt;/p&gt;
&lt;p&gt;O √∫nico lado ruim dessa leitura foram os erros de revis√£o da edi√ß√£o (a primeira) mas n√£o h√° nada que prejudique o entendimento do conte√∫do. Recomendo a leitura.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Ser√° que Isso Presta?</title>
      <link>https://gmgall.net/books/sera-que-isso-presta/</link>
      <pubDate>Wed, 23 Mar 2022 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/sera-que-isso-presta/</guid>
      <description>&lt;p&gt;Esse livro traz os textos de stand-up do Seinfeld desde o in√≠cio de sua carreira na d√©cada de 70. Precisava de um livro leve e que me distra√≠sse dado o &lt;a href=&#34;https://pt.wikipedia.org/wiki/Enchentes_e_deslizamentos_de_terra_em_Petr%C3%B3polis_em_2022&#34;&gt;momento em que iniciei a leitura&lt;/a&gt;. &lt;em&gt;Ser√° que isso presta?&lt;/em&gt; cumpriu esse papel.&lt;/p&gt;
&lt;p&gt;Alguns textos me pareceram geniais, fruto de uma observa√ß√£o muito astuta da realidade. Outros, achei bem clich√™s. Natural em uma carreira t√£o longa. No geral, √© uma leitura divertida. Os textos mais clich√™s n√£o &amp;ldquo;estragam&amp;rdquo; a leitura.&lt;/p&gt;
&lt;p&gt;O livro √© dividido nas d√©cadas de carreira do autor e cada d√©cada √© iniciada com um texto dele falando sobre sua vida e o processo de cria√ß√£o das piadas. Esses textos s√£o curtos. Uma pena porque talvez um livro s√≥ com isso fosse mais interessante do que uma colet√¢nea de piadas.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Ningu√©m Escreve ao Coronel</title>
      <link>https://gmgall.net/books/ninguem-escreve-ao-coronel/</link>
      <pubDate>Sun, 13 Mar 2022 00:58:37 -0300</pubDate>
      
      <guid>https://gmgall.net/books/ninguem-escreve-ao-coronel/</guid>
      <description>&lt;p&gt;A hist√≥ria angustiante de um coronel que lutou numa revolu√ß√£o e fica no aguardo de uma carta sobre a pens√£o a que tem direito por ser veterano. Enquanto espera muitos anos pela carta que nunca chega, precisa lidar com a mis√©ria, com a mulher doente e o luto pela morte do filho.&lt;/p&gt;
&lt;p&gt;O pequeno povoado em que vive √© modorrento, pacato. O coronel √© um homem determinado (alguns diriam teimoso) e suporta a espera imposta pela burocracia estatal desumanizante com uma dignidade inabal√°vel.&lt;/p&gt;
&lt;p&gt;Entendo que tem um coment√°rio sobre a Am√©rica do Sul aqui, especialmente sobre a Col√¥mbia do autor, mas n√£o foi um livro que me arrebatou.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Sobre a Brevidade da Vida</title>
      <link>https://gmgall.net/books/sobre-a-brevidade-da-vida-sobre-a-firmeza-do-sabio/</link>
      <pubDate>Mon, 07 Mar 2022 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/sobre-a-brevidade-da-vida-sobre-a-firmeza-do-sabio/</guid>
      <description>&lt;p&gt;Dois textos do fil√≥sofo S√™neca em formato epistolar. Ambos apresentam conceitos &amp;ldquo;√≥bvios&amp;rdquo;, mas que acabamos esquecendo.&lt;/p&gt;
&lt;p&gt;O 1¬∫ afirma que a vida n√£o √© t√£o breve quanto frequentemente se afirma que ela √©. N√≥s a percebemos como breve porque desperdi√ßamos muito tempo:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;√â assim que acontece: n√£o recebemos uma vida breve, mas a fazemos; dela n√£o somos carentes, mas pr√≥digos. Tal como amplos e magn√≠ficos recursos, quando v√™m para um mau detentor, s√£o dissipados num instante, ao passo que, por mais modestos que sejam, se entregues a um bom guardi√£o, crescem pelo uso que se faz deles, assim tamb√©m a nossa exist√™ncia √© bastante extensa para quem dela bem disp√µe.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Tamb√©m estimula a contempla√ß√£o e autoaperfei√ßoamento. Dedicar-se mais a si mesmo ao inv√©s de aos outros. O tempo que damos aos outros com muita liberalidade √© um assunto importante em v√°rios trechos.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Ousa queixar-se da soberba do outro algu√©m que para si mesmo nunca tem tempo? Aquele, por√©m, mesmo com express√£o insolente, olhou para ti, quem quer que sejas, ouviu tuas palavras, admitiu-te a seu lado: tu jamais te dignaste a te observar e a te ouvir. Assim, n√£o h√° raz√£o para que censures em algu√©m essas obriga√ß√µes, posto que, na verdade, sempre que tu a cumprias, n√£o √© que desejavas estar com a outra pessoa, mas n√£o podias estar contigo mesmo.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;N√£o se encontra ningu√©m que queria repartir seu dinheiro; j√° sua vida, quanto cada um a distribui entre muitos! S√£o mesquinhos na reten√ß√£o do patrim√¥nio; mas, t√£o logo se trate de gastar tempo, s√£o extremamente pr√≥digos com a √∫nica coisa em rela√ß√£o √† qual a avareza √© honrosa.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Acredita-me, √© pr√≥prio de um grande homem, daquele que est√° acima dos erros humanos, n√£o permitir que tomem nada de seu tempo, e √© por isso que a vida dele √© muito longa: porque todo o tempo que lhe esteve dispon√≠vel foi inteiramente reservado para si. Dele nada ficou sem uso e ocioso, nada esteve na depend√™ncia de outra pessoa, pois ele n√£o encontrou nada que fosse digno de permutar por seu tempo, sendo dele um guardi√£o bastante parcimonioso. Assim, o tempo foi para ele suficiente, mas √© for√ßoso que tenha faltado para aqueles de cuja vida muito foi levado por um multid√£o.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Alerta o leitor da armadilha de usar a maior parte da vida no trabalho e outras atividades de rotina e deixar de viver:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;N√£o te envergonha reservar para ti essas sobras de vida e destinar ao aprimoramento da alma apenas esse tempo que n√£o poderias empregar em mais nada? Quanto √© tardio come√ßar a viver s√≥ quando √© hora de terminar!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;At√© d√° alguns exemplos:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;O divino Augusto, que os deuses elevaram mais do que a nenhum outro, n√£o deixou de solicitar repouso para si e de pedir afastamento da administra√ß√£o p√∫blica. Toda conversa sua sempre esteve voltada para este ponto: que ele esperava retirar-se. Por√©m, ele se distra√≠a de suas fadigas com este doce consolo, mesmo que falso: o de que um dia haveria de viver para si. Em carta ao Senado [&amp;hellip;] encontrei as seguintes palavras: &amp;ldquo;Mas isso pode ser mais ilusoriamente prometido do que realizado. No entanto, posto que a alegria real ainda demora, o desejo de um momento por mim t√£o almejado levou-me a experimentar de antem√£o algo desse prazer pelo deleite de express√°-lo em palavras&amp;rdquo;. O √≥cio pareceu-lhe um bem t√£o grande que ele o tomou antecipadamente em pensamento, posto que pelo usufruto n√£o podia.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;O habitual &amp;ldquo;cair na rotina, manter-se nela mesmo que a odeie e s√≥ reclamar&amp;rdquo; tamb√©m aparece:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Seria sup√©rfluo mencionar muitas pessoas que, apesar de para os outros parecerem felic√≠ssimas, deram contra si testemunho exato ao odiar toda atividade que empreenderam em seus anos. Mas, com tais lamentos, n√£o modificaram nem os outros, nem a si pr√≥prias, pois seus sentimentos retornam ao padr√£o habitual logo depois de descarregados pelas palavras.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Estar atarefado n√£o quer dizer que voc√™ esteja fazendo coisas significativas:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Enfim, √© consenso que nenhuma atividade pode ser bem exercida por um homem ocupado, nem eloqu√™ncia, nem estudos liberais, dado que seu esp√≠rito sobrecarregado n√£o absorve nada de modo mais profundo, mas rejeita tudo como se lhe tivesse sido imposto. Nada √© menos peculiar do homem ocupado do que viver. N√£o h√° coisa mais dif√≠cil de saber do que viver.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Usa uma analogia sensacional para dizer que ser velho n√£o quer dizer que se viveu muito.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Ent√£o, n√£o h√° motivo para pensares que algu√©m viveu longamente s√≥ por causa dos cabelos brancos ou das rugas: ele n√£o viveu longo tempo, mas existiu longo tempo. √â como se pensasses que navegou muito quem um terr√≠vel tempestade surpreendera na sa√≠da do porto, impelindo-o para um lado e outro sob ventos furiosos de diversas dire√ß√µes, e fazendo-o deslocar-se em c√≠rculo pelos mesmos lugares. Ele n√£o navegou muito, mas foi muito fustigado.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Um trecho que foi como um tapa de luva de pelica foi o que reproduzo abaixo. Eu estou sempre adiando coisas por excesso de zelo&amp;hellip;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Pode haver algo mais insensato do que o pensamento de algumas pessoas? Digo aquelas que se jactam de sua prud√™ncia. Est√£o empenhadamente ocupadas para que possam viver melhor; planificam sua vida com disp√™ndio de vida. Disp√µem seus planos num longo prazo. Ora, mas a maior perda de vida √© a protela√ß√£o: esta nos arranca um dia ap√≥s o outro, rouba-nos o presente enquanto promete o futuro. O maior obst√°culo √† vida √© a expectativa, que fica na depend√™ncia do amanh√£ e perde o momento presente. Tu disp√µes o que est√° na m√£o da Fortuna, deixas de lado o que est√° nas tuas. Para onde olhas? Para onde te projetas? Tudo o que h√° de vir repousa na incerteza.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;Se o resumo do 1¬∫ texto √© &amp;ldquo;a vida n√£o √© curta, voc√™ que a desperdi√ßa&amp;rdquo;, o resumo deste &amp;ldquo;Sobre a Firmeza do S√°bio&amp;rdquo; seria &amp;ldquo;o que vem de baixo n√£o me atinge&amp;rdquo;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;E ent√£o? N√£o poder√° haver algu√©m que tente fazer inj√∫ria ao s√°bio?&amp;rdquo; Tentar√°, mas esta n√£o ir√° atingi-lo. Ele de fato se encontra afastado do contato com o que lhe √© inferior por uma dist√¢ncia grande demais para que alguma for√ßa negativa possa fazer chegar sua influ√™ncia at√© ele.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;A percep√ß√£o que temos das crian√ßas, o s√°bio a tem de todos os homens, que, mesmo depois da juventude e da velhice, permanecem na inf√¢ncia.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;S√™neca afirma que √© in√∫til desejar que o fa√ßam mal, voc√™ precisa aprender a lidar com isso.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;Mas seria melhor que n√£o houvesse ningu√©m que quisesse faz√™-lo.&amp;rdquo; Desejas coisa dif√≠cil para o g√™nero humano: a inofensividade. E o fato de n√£o se fazer tem import√¢ncia para os que t√™m inten√ß√£o de fazer, n√£o para aquele que n√£o pode sofrer tal a√ß√£o nem mesmo se lhe for feita.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;A ideia de que o s√°bio s√≥ possui a pr√≥pria virtude e de que as demais coisas s√£o passageiras tamb√©m √© bem presente no texto. Dentro dessa ideia, um s√°bio n√£o pode sofrer inj√∫ria.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Assim, n√£o perder√° nada do que ele ver√° como perec√≠vel. Est√° realmente de posse s√≥ da virtude, da qual n√£o pode nunca ser destitu√≠do, das demais coisas faz uso tempor√°rio. Ora, quem se abala pela perda de um bem alheio? E se a inj√∫ria nada pode lesar desses bens que s√£o pr√≥prios do s√°bio, porque, estando salva a virtude, salvos est√£o seus bens, ao s√°bio n√£o se pode fazer inj√∫ria.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;S√™neca conta que o fil√≥sofo Estilb√£o - que teve seu patrim√¥nio tomado como despojo de guerra - foi interrogado por Dem√©trio - o conquistador - se havia sofrido alguma perda. O fil√≥sofo responde: &amp;ldquo;Nenhuma, tudo o que √© meu tenho comigo&amp;rdquo;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Ele, no entanto, arrancou-lhe a vit√≥ria e atestou que estava n√£o s√≥ invicto, como indene, pois tinha consigo os verdadeiros bens, sobre os quais n√£o se pode lan√ßar as m√£os, e aqueles, dissipados e saqueados, que estavam sendo levados, n√£o os julgava seus, mas exteriores e resultantes do desejo da fortuna. Por isso, n√£o os apreciava como bens pr√≥prios. Realmente, √© inst√°vel e incerta a posse de tudo quanto nos vem de fora.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Resili√™ncia √© outro valor que aparece como cultivado pelo s√°bio:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;O s√°bio, por√©m, n√£o se sente menosprezado, por ningu√©m, conhece sua grandeza e afirma para si mesmo que ningu√©m tem poder sobre ele, e todos esses sentimentos que eu poderia chamar n√£o de males, e sim de contrariedades da alma, ele n√£o se empenha em vencer, pois nem sequer os sente.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;O cuidado com os conflitos em que voc√™ entra √© outra quest√£o de &amp;ldquo;bom senso&amp;rdquo; abordada mas que merece sempre ser relembrada.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;√â de √¢nimo mesquinho quem se compraz em ter respondido com franqueza ao porteiro e quebrado o seu bast√£o, ter ido ao seu senhor e t√™-lo feito a√ßoitar. Quem entra numa contenda converte-se em advers√°rio e, mesmo que ven√ßa, fica igualado ao oponente.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Consci√™ncia tranquila √© outra caracter√≠stica que ajuda o s√°bio a enfrentar adversidades.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Essas coisas me acontecem merecida ou imerecidamente? Se merecidamente, n√£o √© contum√©lia, √© uma senten√ßa; se imerecidamente, aquele que pratica essa injusti√ßa deveria enrubescer&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;O final do texto lembra que todos esses conselhos n√£o podem ser confundidos com um conselho de n√£o sentir, de supress√£o dos sentimentos:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Mas tamb√©m n√£o √© liberdade nada sentir, enganamo-nos: liberdade √© situar o √¢nimo acima das inj√∫rias e constituir-se como um ser cuja felicidade lhe venha unicamente de si; √© separar de si os eventos exteriores para n√£o ter de levar uma vida atormentada, a temer o riso de todos, a l√≠ngua de todos.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Os imperfeitos, que se pautam ainda pela opini√£o comum, devem imaginar o seguinte: que eles ter√£o de viver em meio a inj√∫rias e contum√©lias; tudo lhes chegar√° mais leve se j√° estiverem esperando.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;Encerro o coment√°rio sobre esse livro destacando o qu√£o boa √© a se√ß√£o de notas dessa edi√ß√£o da Penguin e Companhia das Letras. V√°rias observa√ß√µes sobre tradu√ß√£o e eventos hist√≥ricos ajudam bastante na compreens√£o dos textos. √â perfeitamente poss√≠vel entender as ideias principais sem as notas, mas fica faltando um contexto bem interessante.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>As Doencas do Brasil</title>
      <link>https://gmgall.net/books/as-doencas-do-brasil/</link>
      <pubDate>Tue, 08 Feb 2022 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/as-doencas-do-brasil/</guid>
      <description>&lt;p&gt;Uma hist√≥ria da √©poca da coloniza√ß√£o contada sob o ponto de vista dos nativos do Brasil e, em menor medida, dos povos escravizados aqui. O personagem principal √© Honra, um ind√≠gena gerado a partir do estupro de sua m√£e por um branco. Uma hist√≥ria de viol√™ncia, mas narrada com muito lirismo atrav√©s da &amp;ldquo;prosa po√©tica&amp;rdquo; do autor.&lt;/p&gt;
&lt;p&gt;Precisei ler uns 20% do livro at√© me acostumar com a linguagem. Inicialmente houve estranhamento. Uma vez acostumado, achei muito bela. Lamentei quando cheguei ao fim da hist√≥ria.&lt;/p&gt;
&lt;p&gt;√â um autor que definitivamente preciso conhecer mais.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Eu Odeio os Homens</title>
      <link>https://gmgall.net/books/eu-odeio-os-homens/</link>
      <pubDate>Sat, 05 Feb 2022 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/eu-odeio-os-homens/</guid>
      <description>&lt;p&gt;Um ensaio de uma feminista que, em s√≠ntese, defende o direito das mulheres de sentirem raiva dos homens. E isso n√£o √© uma coisa indesej√°vel, n√£o √© sin√¥nimo de viol√™ncia.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Muitas vezes confundimos raiva e viol√™ncia, contudo essas duas palavras n√£o aparecem sempre em par. A raiva de sermos tratadas como inferiores n√£o √© compar√°vel com a viol√™ncia que os homens nos humilham, nos violam e nos matam, nem mesmo com a a viol√™ncia dos homens que nos ignoram, nos viram as costas e riem da nossa cara.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;O t√≠tulo chamativo pode suscitar o pensamento de que √© um texto extremista, mas logo fica claro que a autora exprime frustra√ß√µes e preocupa√ß√µes justificadas com o patriarcado.&lt;/p&gt;
&lt;p&gt;√â uma leitura b√°sica sobre feminismo. Apresenta as frustra√ß√µes que motiva o movimento. Se voc√™ deseja genuinamente entender essas frustra√ß√µes, √© uma leitura r√°pida e vale a pena. Se voc√™ j√° conhece um pouco sobre o assunto, n√£o sei se ser√° de grande proveito.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>C√£es Negros</title>
      <link>https://gmgall.net/books/caes-negros/</link>
      <pubDate>Sat, 29 Jan 2022 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/caes-negros/</guid>
      <description>&lt;p&gt;A hist√≥ria de um casal bastante apaixonado que acaba se separando por diferen√ßas de vis√£o de mundo irreconcili√°veis.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A verdade √© que n√≥s nos amamos, nunca deixamos de nos amar, somos obcecados. E fracassamos em fazer algo com isso. [&amp;hellip;] N√£o conseguimos desistir do amor, mas n√£o nos curvamos ao seu poder. [&amp;hellip;] Se sou amarga √© porque nunca me perdoei.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Ambos iniciam o relacionamento alinhados, inclusive politicamente. Tornam-se membros do partido comunista brit√¢nico. H√° muitos planos para o casal e para o mundo (a hist√≥ria se passa na otimista Europa p√≥s 2¬™ Guerra); mas Bernard √© materialista e permanece assim ao longo da vida, j√° June torna-se m√≠stica e espiritualista ap√≥s uma experi√™ncia traum√°tica.&lt;/p&gt;
&lt;p&gt;O narrador √© o genro que n√£o possui uma posi√ß√£o bem definida. No pref√°cio ele afirma:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Em conversas com eles ao longo de muitos anos, descobri que o vazio emocional, a sensa√ß√£o de n√£o pertencer a lugar nenhum e a ningu√©m que me afligiu entre os oito e trinta e sete anos, teve uma importante consequ√™ncia intelectual: eu n√£o tinha apegos, n√£o acreditava em nada.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;√â a escolha ideal de narrador por conseguir ficar &amp;ldquo;neutro&amp;rdquo;.  Nem sobre sua pr√≥pria falta de paix√£o por uma posi√ß√£o o narrador tem convic√ß√£o:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A meu ver, acreditar em tudo, n√£o fazer escolhas, d√° no mesmo que n√£o acreditar em coisa alguma. N√£o sei ao certo se nossa civiliza√ß√£o, nesta virada de mil√™nio, sofre de um excesso ou de uma falta de cren√ßa, se s√£o pessoas como Bernard ou June que causam problemas, ou pessoas como eu.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Atrito com pessoas queridas por diverg√™ncias ideol√≥gicas se tornou uma experi√™ncia bem comum nos √∫ltimos anos. Muita gente vai se identificar com esse livro. Gostei bastante.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>A Barata</title>
      <link>https://gmgall.net/books/a-barata/</link>
      <pubDate>Thu, 20 Jan 2022 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/a-barata/</guid>
      <description>&lt;p&gt;Uma vers√£o &amp;ldquo;reversa&amp;rdquo; de &lt;em&gt;A Metamorfose&lt;/em&gt; de Kafka em que ao inv√©s de um Gregor Samsa transformado em inseto temos um inseto que certo dia se v√™ transformado em humano. Um humano que por um acaso √© primeiro ministro brit√¢nico e est√° tentando implementar uma mudan√ßa econ√¥mica absurda.&lt;/p&gt;
&lt;p&gt;Foi escrito como uma s√°tira ao processo que culminou no Brexit e recebeu algumas cr√≠ticas negativas pela falta de sutileza ao expor a opini√£o pol√≠tica do autor. A analogia pol√≠ticos = baratas √© bastante √≥bvia e o livro at√© inclui um posf√°cio s√≥ para falar sobre a situa√ß√£o pol√≠tica da Gr√£-Bretanha.&lt;/p&gt;
&lt;p&gt;N√£o √© a obra prima do autor, mas √© divertido e r√°pido de ler.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Enclausurado</title>
      <link>https://gmgall.net/books/enclausurado/</link>
      <pubDate>Sun, 16 Jan 2022 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/enclausurado/</guid>
      <description>&lt;p&gt;O narrador desse livro √© um feto que acompanha o planejamento e execu√ß√£o de um crime pela m√£e de dentro dela. S√≥ essa frase acho que j√° motiva o suficiente a leitura. Tem uma pegada de &lt;em&gt;thriller&lt;/em&gt;, livro dif√≠cil de largar depois de iniciada a leitura.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Aten√ß√£o</title>
      <link>https://gmgall.net/books/atencao/</link>
      <pubDate>Tue, 11 Jan 2022 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/books/atencao/</guid>
      <description>&lt;p&gt;O autor √© um zen-budista que prop√µe o que chama de pr√°ticas de aten√ß√£o para tentar aplacar o autocentramento, superficialidade e falta de zelo com que fazemos as coisas hoje em dia.&lt;/p&gt;
&lt;p&gt;N√£o √© um livro de autoajuda. Mais do que autoaprimoramento, √© sugerido prestar aten√ß√£o no outro como ve√≠culo de a√ß√£o pol√≠tica, de mudan√ßa material no mundo.&lt;/p&gt;
&lt;p&gt;Cada cap√≠tulo trata de uma pr√°tica. √â tanta coisa interessante que tenho dificuldade de resumir. Vou apenas destacar alguns trechos abaixo:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;De um modo ou de outro, julgamos as outras pessoas por suas a√ß√µes, mas queremos ser julgadas por nossas inten√ß√µes.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;N√£o h√° nada no mundo mais bem distribu√≠do do que o bom senso&amp;rdquo;, escreveu Descartes, com um toque de ironia, na primeira frase do &lt;em&gt;Discurso do m√©todo&lt;/em&gt;: &amp;ldquo;Mesmo aquelas pessoas que acham que poderiam ser mais ricas, ou mais cultas, ou mais bonitas, ou mais instru√≠das, consideram que possuem bom senso na medida certa.&amp;rdquo; Mas o que pode ser mais egoc√™ntrico do que a pr√≥pria &lt;em&gt;ideia&lt;/em&gt; de bom senso, esse crit√©rio autocentrado de medi√ß√£o do mundo?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Afinal, apesar da irresist√≠vel for√ßa de nossas autoevidentes certezas, se nossa amiga e n√≥s temos opini√µes diferentes sobre a vida &lt;em&gt;dela&lt;/em&gt;, por que a &lt;em&gt;nossa&lt;/em&gt; opini√£o estaria automaticamente certa?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Somos p√©ssimas ju√≠zas de n√≥s mesmas: al√©m de autoindulgentes, levamos excessivamente em conta nossas inten√ß√µes. J√° as outras pessoas t√™m a enorme vantagem de nos analisar somente por nossas a√ß√µes.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Reconhecer o direito das outras pessoas de viverem livres da opress√£o de nossas opini√µes invasivas tamb√©m √© uma maneira de agir politicamente no mundo.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;N√£o √© verdade que devemos tratar as pessoas como gostar√≠amos de ser tratadas. Porque a outra pessoa √© uma outra pessoa. Porque ela tem outros traumas, outras necessidades. Basicamente, porque ela n√£o sou eu. Porque eu n√£o sou, nem nunca vou ser, nem devo ser, a medida de como as outras pessoas devem ser tratadas. Utilizar a mim mesma, minhas vontades e necessidades, como par√¢metro para todas as outras pessoas √© a ess√™ncia do autocentramento e do egocentrismo. √â o exato oposto da empatia, da aten√ß√£o, do cuidado. A outra pessoa deve ser tratada n√£o como &lt;em&gt;eu&lt;/em&gt; gostaria de ser tratada, mas como ela merece, precisa, deseja ser tratada.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Considerando o curt√≠ssimo tempo que passamos existindo e a quase eternidade que passamos n√£o existindo, nosso estado natural √© a n√£o exist√™ncia. Existir seria apenas um breve solu√ßo, um &lt;em&gt;glitch&lt;/em&gt;, um &lt;em&gt;bug&lt;/em&gt;, dentro de uma perfeita, plena e eterna condi√ß√£o de n√£o existir. Somos todos seres inexistentes que, por um acaso, existem. Mas n√£o por muito tempo.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;O nosso Eu apenas busca t√£o desesperadamente pertencer porque ele mesmo se posiciona (eu aqui, o universo ali) como uma entidade apartada da totalidade √† qual pertence. Por defini√ß√£o, para um Eu apartado, n√£o existe pertencimento poss√≠vel: sua car√™ncia ser√° insaci√°vel.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;[&amp;hellip;] poucos conselhos s√£o mais canalhas do que &amp;ldquo;seja voc√™ mesma&amp;rdquo;. A maioria dos problemas do mundo veio de pessoas que estavam simplesmente &amp;ldquo;sendo elas mesmas&amp;rdquo;. Mais importante do que sermos n√≥s mesmas √© sermos quem queremos ser.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Como fica claro pela quantidade de trechos que marquei, achei a leitura instigante.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>The Awful German Language</title>
      <link>https://gmgall.net/books/the-awful-german-language/</link>
      <pubDate>Sun, 02 Jan 2022 23:36:46 -0300</pubDate>
      
      <guid>https://gmgall.net/books/the-awful-german-language/</guid>
      <description>&lt;p&gt;Um ensaio humor√≠stico sobre as frustra√ß√µes de um nativo do ingl√™s ao tentar aprender alem√£o.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;My philological studies have satisfied me that a gifted person ought to learn English (barring spelling and pronouncing) in thirty hours, French in thirty days, and German in thirty years. It seems manifest, then, that the latter tongue ought to be trimmed down and repaired. If it is to remain as it is, it ought to be gently and reverently set aside among the dead languages, for only the dead have time to learn it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;O texto traz v√°rias das reclama√ß√µes dos iniciantes contempor√¢neos em alem√£o  (como a diferen√ßa entre os casos, posicionamento dos verbos e verbos separ√°veis), mas tem algumas coloca√ß√µes surpreendentes para um leitor de 2022.&lt;/p&gt;
&lt;p&gt;Chamou muito a minha aten√ß√£o como a l√≠ngua alem√£ √© descrita como fr√≠vola, mansa, pouco impressionante. O Twain sugere a importa√ß√£o de palavras &amp;ldquo;fortes&amp;rdquo; do ingl√™s para xingar e &amp;ldquo;descrever coisas vigorosas de maneiras vigorosas&amp;rdquo;. Um contraste brutal com a forma como v√≠deos de &lt;a href=&#34;https://youtu.be/NcxvQI88JRY&#34;&gt;YouTube&lt;/a&gt; e &lt;a href=&#34;https://www.tiktok.com/@ifluent/video/6985297060715040006&#34;&gt;TikTok&lt;/a&gt; percebem a l√≠ngua, onde ela √© descrita como r√≠spida e meio assustadora, &amp;ldquo;forte&amp;rdquo; at√© demais. Fiquei me perguntando o quanto o governo de um certo chanceler de bigode engra√ßado influenciou nessa mudan√ßa de percep√ß√£o.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Criando Suas Pr√≥prias A√ß√µes no fail2ban - Parte 3</title>
      <link>https://gmgall.net/blog/criando-suas-proprias-acoes-no-fail2ban-parte-3/</link>
      <pubDate>Thu, 04 Aug 2011 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/blog/criando-suas-proprias-acoes-no-fail2ban-parte-3/</guid>
      <description>&lt;h2 id=&#34;estrutura-de-uma-a√ß√£o&#34;&gt;Estrutura de uma a√ß√£o&lt;/h2&gt;
&lt;p&gt;Cada a√ß√£o √© um arquivo no diret√≥rio &lt;code&gt;action.d&lt;/code&gt;. Esses arquivos seguem a seguinte estrutura:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[Definition]

# Option:  actionstart
# Notes.:  comando executado ao iniciar o Fail2Ban.
# Values:  CMD
#
actionstart =


# Option:  actionstop
# Notes.:  comando executado ao encerrar o Fail2Ban
# Values:  CMD
#
actionstop =


# Option:  actioncheck
# Notes.:  comando executado antes de cada comando actionban
# Values:  CMD
#
actioncheck =


# Option:  actionban
# Notes.:  comando executado ao banir um IP. Observe que o comando
#          √© executado com as permiss√µes do usu√°rio executando o Fail2Ban.
# Tags:    &amp;lt;ip&amp;gt;  IP address
#          &amp;lt;failures&amp;gt;  number of failures
#          &amp;lt;time&amp;gt;  unix timestamp of the ban time
# Values:  CMD
#
actionban = ipfw add deny tcp from &amp;lt;ip&amp;gt; to &amp;lt;localhost&amp;gt; &amp;lt;port&amp;gt;


# Option:  actionunban
# Notes.:  comando executado ao &amp;#34;desbanir&amp;#34; um IP. Observe que o comando
#          √© executado com as permiss√µes do usu√°rio executando o Fail2Ban.
# Tags:    &amp;lt;ip&amp;gt;  IP address
#          &amp;lt;failures&amp;gt;  number of failures
#          &amp;lt;time&amp;gt;  unix timestamp of the ban time
# Values:  CMD
#
actionunban = ipfw delete `ipfw list | grep -i &amp;lt;ip&amp;gt; | awk &amp;#39;{print $1;}&amp;#39;`

[Init]

# Option:  port
# Notes.:  specifies port to monitor
# Values:  [ NUM | STRING ]
#
port = ssh

# Option:  localhost
# Notes.:  the local IP address of the network interface
# Values:  IP
#
localhost = 127.0.0.1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;O arquivo que usei de exemplo acima j√° vem com o pacote e configura uma a√ß√£o que usa o ipfw para bloquear os IPs. Traduzi os coment√°rios da se√ß√£o &lt;code&gt;[Definition]&lt;/code&gt; para explicar o que cada entrada define.&lt;/p&gt;
&lt;p&gt;A se√ß√£o &lt;code&gt;[Init]&lt;/code&gt; define &amp;ldquo;vari√°veis&amp;rdquo; que podem ser usadas ao longo do arquivo. Nesse exemplo, &lt;code&gt;port&lt;/code&gt; e &lt;code&gt;localhost&lt;/code&gt;, mas que vari√°veis definir √© por conta do usu√°rio. &lt;strong&gt;Lembrando que&lt;/strong&gt; &lt;code&gt;&amp;lt;ip&amp;gt;&lt;/code&gt; &lt;strong&gt;vira o IP/hostname casado no grupo&lt;/strong&gt; &lt;code&gt;&amp;lt;host&amp;gt;&lt;/code&gt; &lt;strong&gt;dos filtros&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id=&#34;definindo-uma-a√ß√£o&#34;&gt;Definindo uma a√ß√£o&lt;/h2&gt;
&lt;p&gt;Existem a√ß√µes predefinidas que bloqueiam por &lt;code&gt;iptables&lt;/code&gt;, &lt;code&gt;ipfw&lt;/code&gt;, &lt;code&gt;shorewall&lt;/code&gt;, TCP wrappers, que avisam por e-mail a cada bloqueio&amp;hellip; Mas n√£o existe nenhuma que avise via Gtalk. Vamos criar uma a√ß√£o que faz isso.&lt;/p&gt;
&lt;p&gt;Usarei o programa &lt;a href=&#34;https://web.archive.org/web/20110827104139/http://sendxmpp.platon.sk/&#34;&gt;sendxmpp&lt;/a&gt; para definir uma a√ß√£o que enviar√° uma mensagem para mim no Gtalk a cada evento. Como configurar o sendxmpp para o Gtalk &lt;a href=&#34;http://ubuntuforums.org/showpost.php?s=0ecf5b2a9c9a97fbfa5438c354dcfc2c&amp;amp;p=8876182&amp;amp;postcount=3&#34;&gt;pode ser visto aqui&lt;/a&gt;. Conheci o sendxmpp num &lt;a href=&#34;http://eriberto.pro.br/blog/2011/03/02/mensagens-jabber-via-linha-de-comando-ideal-para-servidores-de-rede/&#34;&gt;post&lt;/a&gt; do &lt;a href=&#34;http://eriberto.pro.br/blog/&#34;&gt;blog&lt;/a&gt; do &lt;a href=&#34;http://eriberto.pro.br/site/&#34;&gt;Jo√£o Eriberto Mota Filho&lt;/a&gt; (&lt;a href=&#34;https://twitter.com/eribertomota&#34;&gt;@eribertomota&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Vamos √† listagem do arquivo &lt;code&gt;action.d/gtalk.local&lt;/code&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[Definition]

actionstart = printf %%b &amp;#34;Hi,\n
              The jail &amp;lt;name&amp;gt; has been started successfully.\n
              Regards,\n
              Fail2Ban&amp;#34;|sendxmpp -t -u &amp;lt;from&amp;gt; -o gmail.com 

actionstop = printf %%b &amp;#34;Hi,\n
             The jail &amp;lt;name&amp;gt; has been stopped.\n
             Regards,\n
             Fail2Ban&amp;#34;|sendxmpp -t -u &amp;lt;from&amp;gt; -o gmail.com 

actioncheck =

actionban = printf %%b &amp;#34;Hi,\n
            The IP &amp;lt;ip&amp;gt; has just been banned by Fail2Ban after
            &amp;lt;failures&amp;gt; attempts against &amp;lt;name&amp;gt;.\n
            Regards,\n
            Fail2Ban&amp;#34;|sendxmpp -t -u &amp;lt;from&amp;gt; -o gmail.com &amp;lt;to&amp;gt;

actionunban =

[Init]

name = default

from =

to =
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Essa a√ß√£o enviar√° uma mensagem para o usu√°rio definido em &lt;code&gt;to&lt;/code&gt; tendo como remetente o usu√°rio definido em &lt;code&gt;from&lt;/code&gt; ao iniciar, parar e ao bloquear um IP.&lt;/p&gt;
&lt;h2 id=&#34;ativando-sua-a√ß√£o&#34;&gt;Ativando sua a√ß√£o&lt;/h2&gt;
&lt;p&gt;As a√ß√µes s√£o definidas por &lt;em&gt;jail&lt;/em&gt; ou globalmente na se√ß√£o &lt;code&gt;[DEFAULT]&lt;/code&gt; de &lt;code&gt;jail.local&lt;/code&gt;. A√ß√µes definidas nas &lt;em&gt;jails&lt;/em&gt; tem prioridade sobre as definidas globalmente.&lt;/p&gt;
&lt;p&gt;Observe o seguinte trecho de &lt;code&gt;jail.local&lt;/code&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#
# ACTIONS
#

# Default banning action (e.g. iptables, iptables-new,
# iptables-multiport, shorewall, etc) It is used to define
# action_* variables. Can be overriden globally or per
# section within jail.local file
banaction = iptables-multiport

# email action. Since 0.8.1 upstream fail2ban uses sendmail
# MTA for the mailing. Change mta configuration parameter to mail
# if you want to revert to conventional &amp;#39;mail&amp;#39;.
mta = sendmail

# Default protocol
protocol = tcp

#
# Action shortcuts. To be used to define action parameter

# The simplest action to take: ban only
action_ = %(banaction)s[name=%(__name__)s, port=&amp;#34;%(port)s&amp;#34;, protocol=&amp;#34;%(protocol)s]

# ban &amp;amp; send an e-mail with whois report to the destemail.
action_mw = %(banaction)s[name=%(__name__)s, port=&amp;#34;%(port)s&amp;#34;, protocol=&amp;#34;%(protocol)s]
%(mta)s-whois[name=%(__name__)s, dest=&amp;#34;%(destemail)s&amp;#34;, protocol=&amp;#34;%(protocol)s]

# ban &amp;amp; send an e-mail with whois report and relevant log lines
# to the destemail.
action_mwl = %(banaction)s[name=%(__name__)s, port=&amp;#34;%(port)s&amp;#34;, protocol=&amp;#34;%(protocol)s]
%(mta)s-whois-lines[name=%(__name__)s, dest=&amp;#34;%(destemail)s&amp;#34;, logpath=%(logpath)s]

# Choose default action. To change, just override value of &amp;#39;action&amp;#39; with the
# interpolation to the chosen action shortcut (e.g. action_mw, action_mwl, etc) in jail.local
# globally (section [DEFAULT]) or per specific section
action = %(action_)s
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;A vari√°vel &lt;code&gt;action&lt;/code&gt; define a a√ß√£o globalmente. As outras vari√°veis definidas antes (&lt;code&gt;action_mvl&lt;/code&gt;, &lt;code&gt;action_mw&lt;/code&gt; e &lt;code&gt;action_&lt;/code&gt;) s√£o atalhos √∫teis. Leia os coment√°rios com aten√ß√£o para entender como essas vari√°veis interagem.&lt;/p&gt;
&lt;p&gt;Repare que mais de uma a√ß√£o pode ser setada por linha e que cada a√ß√£o pode receber par√¢metros entre colchetes. Esses par√¢metros definem os valores das vari√°veis declaradas na se√ß√£o &lt;code&gt;[Init]&lt;/code&gt;. Os atalhos &lt;code&gt;action_mvl&lt;/code&gt;, &lt;code&gt;action_mw&lt;/code&gt; e &lt;code&gt;action_&lt;/code&gt; s√£o √∫teis por j√° ativarem a√ß√µes e passarem par√¢metros funcionais para tarefas rotineiras como banir e enviar um e-mail com informa√ß√µes √∫teis.&lt;/p&gt;
&lt;p&gt;Para definir nossa a√ß√£o gtalk globalmente, basta fazer&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;action = %(action_)s
        gtalk[name=%(__name__)s, from=gmgall, to=gmgall]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;e recarregar as configura√ß√µes do servi√ßo:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# /etc/init.d/fail2ban reload
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Funciona!&lt;/p&gt;
&lt;figure&gt;&lt;img src=&#34;screenshot.png&#34;
         alt=&#34;Janela de chat do mensageiro instant√¢neo Pidgin, mostrando mensagens enviadas pelo fail2ban.&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;Janela de chat do mensageiro instant√¢neo Pidgin, mostrando mensagens enviadas pelo fail2ban.&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

</description>
    </item>
    
    <item>
      <title>Criando Seus Pr√≥prios Filtros no fail2ban - Parte 2</title>
      <link>https://gmgall.net/blog/criando-seus-proprios-filtros-no-fail2ban-parte-2/</link>
      <pubDate>Mon, 01 Aug 2011 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/blog/criando-seus-proprios-filtros-no-fail2ban-parte-2/</guid>
      <description>&lt;p&gt;Se n√£o existe um filtro pronto para o log que voc√™ deseja monitorar em &lt;code&gt;filter.d&lt;/code&gt;, ser√° necess√°rio criar seu pr√≥prio filtro. Mostrarei como fazer isso atrav√©s do exemplo que descrevo abaixo:&lt;/p&gt;
&lt;h2 id=&#34;cen√°rio-do-exemplo&#34;&gt;Cen√°rio do exemplo&lt;/h2&gt;
&lt;p&gt;Mantenho um wiki &lt;a href=&#34;http://moinmo.in/&#34;&gt;moinmoin&lt;/a&gt; e desejo bloquear o acesso √† ele pelos hosts que tentarem login por mais de 3 vezes sem sucesso. Vamos fazer um filtro para fazer esse bloqueio. O log do wiki √© escrito em &lt;code&gt;/var/log/moinmoin.log&lt;/code&gt;. Segue trecho desse log:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;2011-07-12 15:45:40,447 MoinMoin.Page WARNING The page &amp;#34;MissingPage&amp;#34; could not be found. Check your underlay directory setting.
2011-07-12 15:45:44,002 MoinMoin.auth WARNING moin: performing login action | request from 192.168.0.10
2011-07-12 15:45:44,003 MoinMoin.auth WARNING moin: could not authenticate user u&amp;#39;GuilhermeGall&amp;#39; (not valid) | request from 192.168.0.10
2011-07-12 15:45:44,030 MoinMoin.Page WARNING The page &amp;#34;MissingPage&amp;#34; could not be found. Check your underlay directory setting.
2011-07-12 15:45:47,705 MoinMoin.auth WARNING moin: performing login action | request from 192.168.0.10
2011-07-12 15:45:47,706 MoinMoin.auth WARNING moin: could not authenticate user u&amp;#39;GuilhermeGall&amp;#39; (not valid) | request from 192.168.0.10
2011-07-12 15:45:47,732 MoinMoin.Page WARNING The page &amp;#34;MissingPage&amp;#34; could not be found. Check your underlay directory setting.
2011-07-12 15:55:59,473 MoinMoin.Page WARNING The page &amp;#34;MissingPage&amp;#34; could not be found. Check your underlay directory setting.
2011-07-12 16:08:51,543 MoinMoin.Page WARNING The page &amp;#34;MissingPage&amp;#34; could not be found. Check your underlay directory setting.
2011-07-13 09:09:01,908 MoinMoin.auth WARNING moin: performing login action | request from 192.168.0.7
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;N√£o √© dif√≠cil perceber que as linhas com &lt;code&gt;could not authenticate user u&#39;GuilhermeGall&#39; (not valid)&lt;/code&gt; representam as tentativas de login malsucedidas. Se desejamos bloquear os hosts de origem dessas tentativas temos que fazer a regex do filtro casar essas linhas e usar o IP que aparece nelas para executar nossa a√ß√£o (por &lt;em&gt;default&lt;/em&gt;, bloquear via &lt;code&gt;iptables&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Antes de criar nosso filtro, vamos entender a estrutura de um filtro e como desenvolver nossas pr√≥prias regexes.&lt;/p&gt;
&lt;h2 id=&#34;estrutura-de-um-filtro&#34;&gt;Estrutura de um filtro&lt;/h2&gt;
&lt;p&gt;Um filtro √© simplesmente um arquivo com uma entrada &lt;code&gt;failregex&lt;/code&gt;, que define as regexes que casam as linhas que representam as tentativas de login malsucedidas, e uma entrada &lt;code&gt;ignoreregex&lt;/code&gt;, que define regexes que casam com linhas que devem ser ignoradas. Outras entradas podem existir, como &lt;code&gt;before&lt;/code&gt; que faz um ‚Äúimport‚Äù de outro arquivo, mas &lt;code&gt;failregex&lt;/code&gt; e &lt;code&gt;ignoreregex&lt;/code&gt; s√£o as essenciais e usadas na maioria dos casos.&lt;/p&gt;
&lt;p&gt;Se for definir mais de uma regex para &lt;code&gt;failregex&lt;/code&gt; ou &lt;code&gt;ignoreregex&lt;/code&gt;, coloque uma por linha. Exemplo do arquivo &lt;code&gt;filter.d/apache-auth.conf&lt;/code&gt; que j√° vem no pacote &lt;code&gt;fail2ban&lt;/code&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[Definition]

# Option:  failregex
# Notes.:  regex to match the password failure messages in the logfile. The
#          host must be matched by a group named &amp;#34;host&amp;#34;. The tag &amp;#34;&amp;lt;HOST&amp;gt;&amp;#34; can
#          be used for standard IP/hostname matching and is only an alias for
#          (?:::f{4,6}:)?(?P&amp;lt;host&amp;gt;[\w\-.^_]+)
# Values:  TEXT
#
failregex = [[]client &amp;lt;HOST&amp;gt;[]] user .* authentication failure
            [[]client &amp;lt;HOST&amp;gt;[]] user .* not found
            [[]client &amp;lt;HOST&amp;gt;[]] user .* password mismatch

# Option:  ignoreregex
# Notes.:  regex to ignore. If this regex matches, the line is ignored.
# Values:  TEXT
#
ignoreregex =
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Conforme pode ser lido nos coment√°rios do arquivo acima, a tag &lt;code&gt;&amp;lt;HOST&amp;gt;&lt;/code&gt; deve aparecer dentro da regex na posi√ß√£o onde aparece o IP/hostname do host ofensor. Repare que mais de uma regex foi definida para &lt;code&gt;failregex&lt;/code&gt; ‚Äì uma em cada linha ‚Äì e que &lt;code&gt;ignoreregex&lt;/code&gt; pode ser vazio.&lt;/p&gt;
&lt;h2 id=&#34;desenvolvendo-suas-pr√≥prias-regexes&#34;&gt;Desenvolvendo suas pr√≥prias regexes&lt;/h2&gt;
&lt;p&gt;Para escrever suas pr√≥prias regexes para o &lt;code&gt;fail2ban&lt;/code&gt; √© preciso ter em mente o seguinte:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Em toda linha de uma &lt;code&gt;failregex&lt;/code&gt;, a parte que casa com o IP/hostname deve estar envolta pela estrutura &lt;code&gt;(?P&amp;lt;host&amp;gt; ... )&lt;/code&gt;. Essa estrutura √© uma extens√£o espec√≠fica do Python que atribui o nome &lt;code&gt;&amp;lt;host&amp;gt;&lt;/code&gt; ao que foi casado pelo grupo. A tag &lt;code&gt;&amp;lt;host&amp;gt;&lt;/code&gt; √© como voc√™ informa ao &lt;code&gt;fail2ban&lt;/code&gt; qual host estava tentando logar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Como conveni√™ncia, √© poss√≠vel usar &lt;code&gt;&amp;lt;HOST&amp;gt;&lt;/code&gt; nas suas regexes, conforme citei no t√≥pico anterior. &lt;code&gt;&amp;lt;HOST&amp;gt;&lt;/code&gt; √© um alias para &lt;code&gt;(?:::f{4,6}:)?(?P&amp;lt;host&amp;gt;\S+)&lt;/code&gt; que casa um IP/hostname dentro de um grupo chamado &lt;code&gt;&amp;lt;host&amp;gt;&lt;/code&gt;. Vide item anterior.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Nas a√ß√µes, a tag &lt;code&gt;&amp;lt;ip&amp;gt;&lt;/code&gt; ser√° substitu√≠da pelo IP do host casado pela tag &lt;code&gt;&amp;lt;host&amp;gt;&lt;/code&gt;, por isso sempre deve existir um grupo nomeado &lt;code&gt;&amp;lt;host&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Para que uma linha de um log case com sua &lt;code&gt;failregex&lt;/code&gt;, ela deve casar em duas partes: o in√≠cio da linha tem que casar com um padr√£o de &lt;em&gt;timestamp&lt;/em&gt; e o restante da linha deve casar com a regex definida em &lt;code&gt;failregex&lt;/code&gt;. Se sua &lt;code&gt;failregex&lt;/code&gt; possui a √¢ncora &lt;code&gt;^&lt;/code&gt;, ent√£o a √¢ncora refere-se ao in√≠cio do restante da linha, ap√≥s o &lt;em&gt;timestamp&lt;/em&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Por √∫ltimo, mas n√£o menos importante, o comando &lt;code&gt;fail2ban-regex&lt;/code&gt; permite testar suas regexes antes de criar o filtro. Na realidade, como escrever suas pr√≥prias regexes pode envolver alguma ‚Äì muita! ‚Äì tentativa e erro no come√ßo, eu diria que esse √© o item mais importante. üôÇ Ele pode ser usado de duas maneiras:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;fail2ban-regex /path/para/arquivo.log &amp;#39;^regex a ser testada$&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ou&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;fail2ban-regex &amp;#39;linha exemplo de log&amp;#39; &amp;#39;^regex a ser testada$&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;definindo-o-filtro&#34;&gt;Definindo o filtro&lt;/h2&gt;
&lt;p&gt;A regex que casa com as linhas que representam as tentativas de login malsucedidas √©:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;MoinMoin\.auth (DEBUG|INFO|WARNING|ERROR|CRITICAL) moin: could not authenticate user .* \(not valid\) \| request from &amp;lt;HOST&amp;gt;$
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;N√£o √© do escopo desse artigo ensinar express√µes regulares. Tem muito &lt;a href=&#34;https://aurelio.net/regex/&#34;&gt;material bom sobre isso&lt;/a&gt; por a√≠, mas resumindo a express√£o acima:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;MoinMoin\.auth&lt;/code&gt; casa &lt;code&gt;MoinMoin.auth&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;DEBUG|INFO|WARNING|ERROR|CRITICAL)&lt;/code&gt; casa &lt;code&gt;DEBUG&lt;/code&gt;, &lt;code&gt;INFO&lt;/code&gt;, &lt;code&gt;WARNING&lt;/code&gt;, &lt;code&gt;ERROR&lt;/code&gt; ou &lt;code&gt;CRITICAL&lt;/code&gt;. Eu poderia ter casado apenas um dos n√≠veis de severidade, mas ainda estou decidindo em qual n√≠vel reportarei as mensagens referentes √† tentativas de login.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;moin: could not authenticate user&lt;/code&gt; casa &lt;code&gt;moin: could not authenticate user&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.*&lt;/code&gt; casa &lt;em&gt;qualquer caractere em qualquer quantidade&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;not valid\) \| request from&lt;/code&gt; casa &lt;code&gt;(not valid) | request from&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;HOST&amp;gt;&lt;/code&gt; casa o &lt;em&gt;IP/hostname&lt;/em&gt;. √â a tal tag indicativa de onde est√° o IP/hostname que √© substitu√≠da por &lt;code&gt;(?:::f{4,6}:)?(?P&amp;lt;host&amp;gt;\S+)&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;$&lt;/code&gt; casa o &lt;em&gt;fim da linha&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Testando uma linha de exemplo do log com o &lt;code&gt;fail2ban-regex&lt;/code&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ fail2ban-regex &amp;#39;2011-07-18 14:24:42,687 MoinMoin.auth WARNING moin: could not authenticate user u&amp;#39;UserName&amp;#39; (not valid) | request from 192.168.0.27&amp;#39; &amp;#39;MoinMoin\.auth (DEBUG|INFO|WARNING|ERROR|CRITICAL) moin: could not authenticate user .* \(not valid\) \| request from &amp;lt;HOST&amp;gt;$&amp;#39;

Running tests
=============

Use regex line : MoinMoin\.auth (DEBUG|INFO|WARNING|ERROR|CRITICAL)...
Use single line: 2011-07-18 14:24:42,687 MoinMoin.auth WARNING moin...

Results
=======

Failregex
|- Regular expressions:
|  [1] MoinMoin\.auth (DEBUG|INFO|WARNING|ERROR|CRITICAL) moin: could not authenticate user .* \(not valid\) \| request from &amp;lt;HOST&amp;gt;$
|
`- Number of matches:
   [1] 1 match(es)

Ignoreregex
|- Regular expressions:
|
`- Number of matches:

Summary
=======

Addresses found:
[1]
    192.168.0.27 (Mon Jul 18 14:24:42 2011)

Date template hits:
0 hit(s): MONTH Day Hour:Minute:Second
0 hit(s): WEEKDAY MONTH Day Hour:Minute:Second Year
0 hit(s): WEEKDAY MONTH Day Hour:Minute:Second
0 hit(s): Year/Month/Day Hour:Minute:Second
0 hit(s): Day/Month/Year Hour:Minute:Second
0 hit(s): Day/Month/Year Hour:Minute:Second
0 hit(s): Day/MONTH/Year:Hour:Minute:Second
0 hit(s): Month/Day/Year:Hour:Minute:Second
2 hit(s): Year-Month-Day Hour:Minute:Second
0 hit(s): Day-MONTH-Year Hour:Minute:Second[.Millisecond]
0 hit(s): Day-Month-Year Hour:Minute:Second
0 hit(s): TAI64N
0 hit(s): Epoch
0 hit(s): ISO 8601
0 hit(s): Hour:Minute:Second
0 hit(s): 

Success, the total number of match is 1

However, look at the above section &amp;#39;Running tests&amp;#39; which could contain important
information.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Perceba que o comando mostrou a regex e o n√∫mero de casamentos, al√©m do IP encontrado abaixo de &amp;ldquo;Addresses found&amp;rdquo;, indicando que a regex est√° correta. O n√∫mero de casamentos presumivelmente seria maior que 1, se o comando fosse executado contra um arquivo de log ao inv√©s de apenas contra uma linha de exemplo.&lt;/p&gt;
&lt;p&gt;Vamos supor voc√™ tenha cometido um erro, como por exemplo n√£o especificar um grupo chamado &lt;code&gt;host&lt;/code&gt; na sua regex:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ fail2ban-regex &amp;#39;2011-07-18 14:24:42,687 MoinMoin.auth WARNING moin: could not authenticate user u&amp;#39;UserName&amp;#39; (not valid) | request from 192.168.0.27&amp;#39; &amp;#39;MoinMoin\.auth (DEBUG|INFO|WARNING|ERROR|CRITICAL) moin: could not authenticate user .* \(not valid\) \| request from$&amp;#39;

Running tests
=============

Use regex line : MoinMoin\.auth (DEBUG|INFO|WARNING|ERROR|CRITICAL)...
Use single line: 2011-07-18 14:24:42,687 MoinMoin.auth WARNING moin...

No &amp;#39;host&amp;#39; group in &amp;#39;MoinMoin\.auth (DEBUG|INFO|WARNING|ERROR|CRITICAL) moin: could not authenticate user .* \(not valid\) \| request from$&amp;#39;
Cannot remove regular expression. Index 0 is not valid

Results
=======

Failregex
|- Regular expressions:
|  [1] MoinMoin\.auth (DEBUG|INFO|WARNING|ERROR|CRITICAL) moin: could not authenticate user .* \(not valid\) \| request from$
|
`- Number of matches:
   [1] 0 match(es)

Ignoreregex
|- Regular expressions:
|
`- Number of matches:

Summary
=======

Sorry, no match

Look at the above section &amp;#39;Running tests&amp;#39; which could contain important
information.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Perceba que o &lt;code&gt;fail2ban-regex&lt;/code&gt; informa o erro &lt;code&gt;No &#39;host&#39; group in...&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Como j√° temos a regex funcional, crie um arquivo com o nome do filtro em &lt;code&gt;filter.d&lt;/code&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# cd /etc/fail2ban/
# cat filter.d/moinmoin.conf
[Definition]

# Option:  failregex
# Notes.:  regex to match the password failures messages in the logfile. The
#          host must be matched by a group named &amp;#34;host&amp;#34;. The tag &amp;#34;&amp;lt;HOST&amp;gt;&amp;#34; can
#          be used for standard IP/hostname matching and is only an alias for
#          (?:::f{4,6}:)?(?P&amp;lt;host&amp;gt;[\w\-.^_]+)
# Values:  TEXT
#
failregex = MoinMoin.auth (DEBUG|INFO|WARNING|ERROR|CRITICAL) moin: could not authenticate user .* \(not valid\) \| request from &amp;lt;HOST&amp;gt;$

# Option:  ignoreregex
# Notes.:  regex to ignore. If this regex matches, the line is ignored.
# Values:  TEXT
#
ignoreregex =
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Crie uma &lt;em&gt;jail&lt;/em&gt; que usa o filtro rec√©m-criado em &lt;code&gt;jail.local&lt;/code&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[moinmoin]

enabled = true
port = 80
filter = moinmoin
logpath = /var/log/moinmoin.log
maxretry = 3
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;A vari√°vel &lt;code&gt;filter&lt;/code&gt; define o nome do filtro, que √© o nome do arquivo criado em &lt;code&gt;filter.d&lt;/code&gt; sem a extens√£o &lt;code&gt;.conf&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Reinicie o &lt;code&gt;fail2ban&lt;/code&gt; para ativar a nova &lt;em&gt;jail&lt;/em&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# /etc/init.d/fail2ban restart
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;√â interessante monitorar o log do pr√≥prio &lt;code&gt;fail2ban&lt;/code&gt;, que por padr√£o fica em &lt;code&gt;/var/log/fail2ban.log&lt;/code&gt;, para verificar se suas altera√ß√µes foram aplicadas com sucesso:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# tail -f /var/log/fail2ban.log
2011-08-01 09:52:04,994 fail2ban.filter : INFO   Set findtime = 600
2011-08-01 09:52:04,994 fail2ban.actions: INFO   Set banTime = 600
2011-08-01 09:52:04,999 fail2ban.jail   : INFO   Creating new jail &amp;#39;ssh&amp;#39;
2011-08-01 09:52:04,999 fail2ban.jail   : INFO   Jail &amp;#39;ssh&amp;#39; uses poller
2011-08-01 09:52:05,000 fail2ban.filter : INFO   Added logfile = /var/log/auth.log
2011-08-01 09:52:05,001 fail2ban.filter : INFO   Set maxRetry = 3
2011-08-01 09:52:05,002 fail2ban.filter : INFO   Set findtime = 600
2011-08-01 09:52:05,002 fail2ban.actions: INFO   Set banTime = 600
2011-08-01 09:52:05,035 fail2ban.jail   : INFO   Jail &amp;#39;moinmoin&amp;#39; started
2011-08-01 09:52:05,039 fail2ban.jail   : INFO   Jail &amp;#39;ssh&amp;#39; started
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;As duas √∫ltimas linhas nos mostra as &lt;em&gt;jails&lt;/em&gt; iniciadas. A &lt;code&gt;ssh&lt;/code&gt;, que j√° vem configurada, e a &lt;code&gt;moinmoin&lt;/code&gt;, que acabamos de configurar.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Introdu√ß√£o ao fail2ban - Parte 1</title>
      <link>https://gmgall.net/blog/introducao-ao-fail2ban-parte-1/</link>
      <pubDate>Fri, 29 Jul 2011 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/blog/introducao-ao-fail2ban-parte-1/</guid>
      <description>&lt;p&gt;O fail2ban √© um software que monitora os logs do sistema e em caso de X (sendo X configur√°vel) tentativas de autentica√ß√£o sem sucesso em diversos servi√ßos toma uma atitude, que pode ser colocar o host ofensor em &lt;code&gt;/etc/hosts.deny&lt;/code&gt;, &amp;ldquo;dropar&amp;rdquo; seus pacotes via &lt;code&gt;iptables&lt;/code&gt; ou qualquer outra a√ß√£o definida pelo usu√°rio.&lt;/p&gt;
&lt;h2 id=&#34;instala√ß√£o-do-fail2ban&#34;&gt;Instala√ß√£o do fail2ban&lt;/h2&gt;
&lt;p&gt;Em m√°quinas Debian, a melhor maneira de instalar o &lt;code&gt;fail2ban&lt;/code&gt; √© via &lt;code&gt;apt-get&lt;/code&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# apt-get update
# apt-get install fail2ban
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;As configura√ß√µes &lt;em&gt;default&lt;/em&gt; bloqueiam via &lt;code&gt;iptables&lt;/code&gt; por 10 minutos os hosts que tentarem sem sucesso login via ssh 6 vezes. O &lt;code&gt;fail2ban&lt;/code&gt; cria uma &lt;em&gt;chain&lt;/em&gt; com nome no padr√£o &lt;code&gt;fail2ban-servi√ßo&lt;/code&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# iptables -L
Chain INPUT (policy ACCEPT)
target prot opt source destination
fail2ban-ssh tcp -- anywhere anywhere multiport dports ssh

Chain FORWARD (policy ACCEPT)
target prot opt source destination

Chain OUTPUT (policy ACCEPT)
target prot opt source destination

Chain fail2ban-ssh (1 references)
target prot opt source destination
RETURN all -- anywhere anywhere
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Lembrando que todo esse comportamento √© configur√°vel. O bloqueio pode ser feito via TCP-wrappers (&lt;code&gt;/etc/hosts.{allow,deny}&lt;/code&gt;), e muitos outros servi√ßos s√£o suportados.&lt;/p&gt;
&lt;h2 id=&#34;entendendo-os-arquivos-de-configura√ß√£o&#34;&gt;Entendendo os arquivos de configura√ß√£o&lt;/h2&gt;
&lt;p&gt;Alguns termos usados pelo &lt;code&gt;fail2ban&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;filter&lt;/strong&gt;: um filtro define uma regex que casa um padr√£o correspondente a uma tentativa de login mal sucedido nos arquivos de log;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;action&lt;/strong&gt;: uma a√ß√£o define os comandos que s√£o executados nos mais diversos eventos, como bloquear um host (ex: bloquear via TCP-wrappers ou &lt;code&gt;iptables&lt;/code&gt;), iniciar o &lt;code&gt;fail2ban&lt;/code&gt; (ex: criar as chains no firewall) e parar o &lt;code&gt;fail2ban&lt;/code&gt; (ex: remover as &lt;em&gt;chains&lt;/em&gt; criadas ao iniciar);&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;jail&lt;/strong&gt;: uma &lt;em&gt;jail&lt;/em&gt; √© uma combina√ß√£o de um filtro com uma ou v√°rias &lt;em&gt;actions&lt;/em&gt;. O &lt;code&gt;fail2ban&lt;/code&gt; pode lidar com diversas &lt;em&gt;jails&lt;/em&gt; ao mesmo tempo.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Uma &lt;em&gt;jail&lt;/em&gt; √© como dar a seguinte ordem ao &lt;code&gt;fail2ban&lt;/code&gt;: &amp;ldquo;bloqueie via &lt;code&gt;iptables&lt;/code&gt; por 10 minutos os hosts que aparecerem 3 vezes em &lt;code&gt;/var/log/auth.log&lt;/code&gt; com falha de autentica√ß√£o&amp;rdquo;. Nesse exemplo, bloquear via &lt;code&gt;iptables&lt;/code&gt; √© uma a√ß√£o e a regex que casa a falha de autentica√ß√£o √© o filtro.&lt;/p&gt;
&lt;p&gt;Os arquivos de configura√ß√£o ficam em &lt;code&gt;/etc/fail2ban&lt;/code&gt;.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# cd /etc/fail2ban
# ls -l
total 17
drwxr-xr-x 2 root root 1024 Jun 28 14:30 action.d
-rw-r--r-- 1 root root 859 Feb 27 2008 fail2ban.conf
drwxr-xr-x 2 root root 1024 Jun 28 14:30 filter.d
-rw-r--r-- 1 root root 6683 Jun 28 2010 jail.conf
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Os diret√≥rios &lt;code&gt;action.d&lt;/code&gt; e &lt;code&gt;filter.d&lt;/code&gt; mant√™m as configura√ß√µes de a√ß√µes e filtros, respectivamente. Os que v√™m com o pacote j√° devem atender √† maior parte das necessidades. O arquivo &lt;code&gt;fail2ban.conf&lt;/code&gt; cont√©m configura√ß√µes gerais do &lt;em&gt;daemon&lt;/em&gt; &lt;code&gt;fail2ban-server&lt;/code&gt;, como &lt;em&gt;path&lt;/em&gt; do arquivo de &lt;em&gt;log&lt;/em&gt; do &lt;code&gt;fail2ban&lt;/code&gt;, &lt;em&gt;path&lt;/em&gt; do arquivo socket usado para o cliente de linha de comando se comunicar com o &lt;em&gt;daemon&lt;/em&gt; etc.&lt;/p&gt;
&lt;p&gt;O arquivo &lt;code&gt;jail.conf&lt;/code&gt; √© o mais importante, j√° que configura as &lt;em&gt;jails&lt;/em&gt;. No t√≥pico abaixo ser√° explicado como modificar uma &lt;em&gt;jail&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id=&#34;mudando-as-configura√ß√µes-default&#34;&gt;Mudando as configura√ß√µes default&lt;/h2&gt;
&lt;p&gt;Na maior parte do tempo, os filtros e a√ß√µes que v√™m com o pacote atendem √†s necessidades, bastando us√°-los nas suas &lt;em&gt;jails&lt;/em&gt;. A √∫nica &lt;em&gt;jail&lt;/em&gt; que vem ativada por padr√£o √© a que bloqueia os hosts que tentarem logar mais de 6 vezes via SSH. Como exemplo, ser√° mostrado como alterar o n√∫mero de tentativas antes do bloqueio de 6 para 3.&lt;/p&gt;
&lt;p&gt;Primeiramente crie uma c√≥pia do arquivo &lt;code&gt;jail.conf&lt;/code&gt; chamada &lt;code&gt;jail.local&lt;/code&gt; e fa√ßa as suas modifica√ß√µes nesse arquivo:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# cp jail.conf jail.local
# vim jail.local
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;O trecho abaixo configura uma &lt;em&gt;jail&lt;/em&gt; chamada &lt;code&gt;ssh&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[ssh]

enabled = true
port = ssh
filter = sshd
logpath = /var/log/auth.log
maxretry = 6
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Mude para:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[ssh]

enabled = true
port = ssh
filter = sshd
logpath = /var/log/auth.log
maxretry = 3
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Fa√ßa o &lt;code&gt;fail2ban&lt;/code&gt; reler os arquivos de configura√ß√£o:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# /etc/init.d/fail2ban reload
Reloading authentication failure monitor: fail2ban.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;N√£o fa√ßa as altera√ß√µes diretamente em &lt;code&gt;jail.conf&lt;/code&gt;. Apesar de funcionar, o arquivo pode ser sobrescrito por atualiza√ß√µes no pacote &lt;code&gt;fail2ban&lt;/code&gt;. O &lt;code&gt;fail2ban&lt;/code&gt; aplica as regras primeiro do &lt;code&gt;jail.conf&lt;/code&gt; depois do &lt;code&gt;jail.local&lt;/code&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Daemon em Python</title>
      <link>https://gmgall.net/blog/daemon-em-python/</link>
      <pubDate>Sun, 24 May 2009 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/blog/daemon-em-python/</guid>
      <description>&lt;p&gt;J√° usei mais de uma vez o c√≥digo abaixo para criar pequenos &lt;a href=&#34;http://en.wikipedia.org/wiki/Daemon_(computer_software)&#34;&gt;daemons&lt;/a&gt; para Linux. Achei &lt;a href=&#34;https://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/&#34;&gt;aqui&lt;/a&gt; e como ele foi &lt;a href=&#34;https://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/#c6&#34;&gt;liberado em dom√≠nio p√∫blico&lt;/a&gt;, use como melhor convir.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#!/usr/bin/env python&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; sys&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; os&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; time&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; atexit
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; signal &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; SIGTERM 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Daemon&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    A generic daemon class.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    Usage: subclass the Daemon class and override the run() method
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; __init__(self, pidfile, stdin&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/dev/null&amp;#39;&lt;/span&gt;, stdout&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/dev/null&amp;#39;&lt;/span&gt;, stderr&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/dev/null&amp;#39;&lt;/span&gt;):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stdin &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; stdin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stdout &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; stdout
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stderr &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; stderr
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;pidfile &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pidfile
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;daemonize&lt;/span&gt;(self):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        do the UNIX double-fork magic, see Stevens&amp;#39; &amp;#34;Advanced
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        Programming in the UNIX Environment&amp;#34; for details (ISBN 0201563177)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        http://www.erlenstar.demon.co.uk/unix/faq_2.html#SEC16
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            pid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fork()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; pid &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#75715e&#34;&gt;# exit first parent&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;exit(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;except&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;OSError&lt;/span&gt;, e:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stderr&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;write(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fork #1 failed: &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;%d&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; (&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;%s&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt; (e&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;errno, e&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;strerror))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;exit(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;# decouple from parent environment&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;chdir(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;setsid()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;umask(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;) 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;# do second fork&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            pid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fork()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; pid &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#75715e&#34;&gt;# exit from second parent&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;exit(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;except&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;OSError&lt;/span&gt;, e:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stderr&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;write(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fork #2 failed: &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;%d&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; (&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;%s&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt; (e&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;errno, e&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;strerror))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;exit(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;# redirect standard file descriptors&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stdout&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;flush()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stderr&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;flush()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        si &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; file(self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stdin, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;r&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        so &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; file(self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stdout, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;a+&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        se &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; file(self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stderr, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;a+&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;dup2(si&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fileno(), sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stdin&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fileno())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;dup2(so&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fileno(), sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stdout&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fileno())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;dup2(se&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fileno(), sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stderr&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fileno())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;# write pidfile&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        atexit&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;register(self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;delpid)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        pid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; str(os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;getpid())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        file(self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;pidfile,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;w+&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;write(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;%s&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt; pid)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;delpid&lt;/span&gt;(self):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;remove(self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;pidfile)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt;(self):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        Start the daemon
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;# Check for a pidfile to see if the daemon already runs&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            pf &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; file(self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;pidfile,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;r&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            pid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; int(pf&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;read()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;strip())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            pf&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;close()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;except&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;IOError&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            pid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;None&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; pid:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            message &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pidfile &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;%s&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; already exist. Daemon already running?&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stderr&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;write(message &lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt; self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;pidfile)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;exit(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;# Start the daemon&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;daemonize()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;run()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;stop&lt;/span&gt;(self):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        Stop the daemon
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;# Get the pid from the pidfile&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            pf &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; file(self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;pidfile,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;r&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            pid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; int(pf&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;read()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;strip())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            pf&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;close()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;except&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;IOError&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            pid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;None&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;not&lt;/span&gt; pid:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            message &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pidfile &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;%s&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; does not exist. Daemon not running?&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stderr&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;write(message &lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt; self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;pidfile)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# not an error in a restart&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;# Try killing the daemon process&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;kill(pid, SIGTERM)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                time&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;sleep(&lt;span style=&#34;color:#ae81ff&#34;&gt;0.1&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;except&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;OSError&lt;/span&gt;, err:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            err &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; str(err)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; err&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;find(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;No such process&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;path&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;exists(self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;pidfile):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;remove(self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;pidfile)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                print str(err)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;exit(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;restart&lt;/span&gt;(self):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        Restart the daemon
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stop()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;start()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;run&lt;/span&gt;(self):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        You should override this method when you subclass Daemon. It will be called after the process has been
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        daemonized by start() or restart().
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Resolvi adicionar a funcionalidade de verificar o status do processo tamb√©m, da√≠ adicionei o seguinte m√©todo √† classe acima:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;status&lt;/span&gt;(self):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        pf &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; file(self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;pidfile, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;r&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        pid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; int(pf&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;read()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;strip())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        pf&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;close()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;except&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;IOError&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        pid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;None&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        procfile &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; file(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/proc/&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;%d&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;/status&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt; pid, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;r&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        procfile&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;close()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;except&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;IOError&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stdout&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;write(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;there is not a process with the PID specified in &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;%s&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt; self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;pidfile)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;exit(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;except&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;TypeError&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stdout&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;write(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pidfile &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;%s&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; does not exist&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt; self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;pidfile)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;exit(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stdout&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;write(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;the process with the PID &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;%d&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; is running&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt; pid)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;N√£o ficou muito bonito, mas funciona. Lembrando o que j√° est√° comentado no &lt;a href=&#34;http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python&#34;&gt;c√≥digo original&lt;/a&gt;: para usar a classe acima para &amp;ldquo;daemonizar&amp;rdquo; seu programa, crie uma classe filha de &lt;code&gt;Daemon&lt;/code&gt; e sobrescreva o m√©todo &lt;code&gt;run()&lt;/code&gt;. Ele ser√° chamado ap√≥s o processo de &amp;ldquo;daemoniza√ß√£o&amp;rdquo; por &lt;code&gt;start()&lt;/code&gt; e &lt;code&gt;restart()&lt;/code&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Sequ√™ncia Look and Say em Python</title>
      <link>https://gmgall.net/blog/sequencia-look-and-say-em-python/</link>
      <pubDate>Wed, 11 Mar 2009 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/blog/sequencia-look-and-say-em-python/</guid>
      <description>&lt;p&gt;Tenho brincado ultimamente com os desafios do &lt;a href=&#34;http://www.pythonchallenge.com/&#34;&gt;Python Challenge&lt;/a&gt;. S√£o bem interessantes para quem quer aprender Python na pr√°tica. Estou resolvendo o n√≠vel 11 e j√° precisei &lt;a href=&#34;https://web.archive.org/web/20090309064253/http://www.pythonware.com/products/pil/&#34;&gt;processar imagens&lt;/a&gt;, descompactar dados comprimidos com &lt;a href=&#34;https://docs.python.org/3/library/zipfile.html&#34;&gt;zip&lt;/a&gt; e &lt;a href=&#34;https://docs.python.org/3/library/bz2.html&#34;&gt;bz2&lt;/a&gt;, &lt;a href=&#34;https://docs.python.org/3/library/pickle.html&#34;&gt;serializar objetos&lt;/a&gt;, &lt;a href=&#34;https://docs.python.org/3/library/urllib.html&#34;&gt;acessar recursos via URL&lt;/a&gt;, &lt;a href=&#34;https://docs.python.org/3/library/re.html&#34;&gt;usar express√µes regulares&lt;/a&gt; e algumas tarefas que n√£o exigiam necessariamente um m√≥dulo.&lt;/p&gt;
&lt;p&gt;O √∫ltimo n√≠vel que resolvi tinha como resposta o &lt;a href=&#34;https://web.archive.org/web/20111111070626/http://oeis.org/A005341&#34;&gt;comprimento de um elemento espec√≠fico&lt;/a&gt; de uma &lt;a href=&#34;https://web.archive.org/web/20090303175131/http://www.research.att.com/~njas/sequences/&#34;&gt;sequ√™ncia de inteiros&lt;/a&gt; conhecida como &lt;a href=&#34;https://web.archive.org/web/20090304154846/http://www.research.att.com/~njas/sequences/A005150&#34;&gt;&lt;em&gt;look and say&lt;/em&gt;&lt;/a&gt; (olhe e descreva). Achei diversas implementa√ß√µes da gera√ß√£o da sequ√™ncia pela web, nenhuma delas me pareceu &lt;em&gt;pythonica&lt;/em&gt; ou leg√≠vel o suficiente. Resolvi juntar algumas das id√©ias que vi nessas implementa√ß√µes com os conhecimentos que obtive recentemente com a leitura de um material sobre &lt;a href=&#34;https://docs.python.org/dev/howto/functional.html&#34;&gt;programa√ß√£o funcional em Python&lt;/a&gt; e criei uma fun√ß√£o que retorna uma lista com os elementos da sequ√™ncia. A minha solu√ß√£o n√£o √© a mais eficiente poss√≠vel (&lt;a href=&#34;http://www.fantascienza.net/leonardo/so/briciole_python1/&#34;&gt;essa p√°gina&lt;/a&gt; cont√©m uma implementa√ß√£o alegadamente otimizada para velocidade), mas acho que √© elegante e mostra alguns aspectos interessantes da linguagem. Segue o c√≥digo:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;look_and_say&lt;/span&gt;(first, elements):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; itertools &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; groupby
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    seq &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [str(first)]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;say&lt;/span&gt;(number):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ret &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; []
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; k,g &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; groupby(number):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ret&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;append( str(len(list(g))) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; k )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;join(ret)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; xrange(elements):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        seq&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;append(say(seq[&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; seq
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;O argumento &lt;code&gt;first&lt;/code&gt; de &lt;code&gt;look_and_say&lt;/code&gt; recebe o primeiro elemento da lista e &lt;code&gt;elements&lt;/code&gt; quantos elementos depois do primeiro devem ser gerados. Exemplo de uso:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; look_and_say(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;1&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;11&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;21&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;1211&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;111221&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;312211&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;13112221&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;1113213211&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;31131211131221&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;13211311123113112211&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;11131221133112132113212221&amp;#39;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; look_and_say(&lt;span style=&#34;color:#ae81ff&#34;&gt;55&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;55&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;25&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;1215&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;11121115&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;31123115&amp;#39;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Dentre os aspectos que gostaria de destacar est√£o a possibilidade de importar partes de m√≥dulos e definir fun√ß√µes dentro de fun√ß√µes, o uso de listas para &lt;a href=&#34;https://web.archive.org/web/20090324052548/http://codare.net/2006/09/17/python-concatenacao-eficiente-de-strings/&#34;&gt;concatenar strings com efici√™ncia&lt;/a&gt; e o uso de &lt;a href=&#34;https://docs.python.org/dev/howto/functional.html#grouping-elements&#34;&gt;itertools.groupby&lt;/a&gt; que faz um agrupamento semelhante ao do comando &lt;code&gt;uniq&lt;/code&gt; do Unix, juntando elementos iguais consecutivos em um &lt;a href=&#34;https://docs.python.org/dev/howto/functional.html#iterators&#34;&gt;&lt;em&gt;iterator&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Para quem quiser uma abordagem matem√°tica da sequ√™ncia, o &lt;a href=&#34;https://mathworld.wolfram.com/&#34;&gt;Wolfram Mathworld&lt;/a&gt; tem uma &lt;a href=&#34;https://mathworld.wolfram.com/LookandSaySequence.html&#34;&gt;p√°gina sobre ela&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Metaclasses em Python</title>
      <link>https://gmgall.net/blog/metaclasses-em-python/</link>
      <pubDate>Sat, 21 Feb 2009 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/blog/metaclasses-em-python/</guid>
      <description>&lt;h2 id=&#34;introdu√ß√£o&#34;&gt;Introdu√ß√£o&lt;/h2&gt;
&lt;p&gt;Li dois textos interessantes no &lt;a href=&#34;http://kodumaro.blogspot.com/&#34;&gt;Kodumaro&lt;/a&gt; recentemente: um sobre &lt;a href=&#34;http://kodumaro.blogspot.com/2009/01/propriedades.html&#34;&gt;propriedades e acessores&lt;/a&gt; e outro sobre o &lt;a href=&#34;http://kodumaro.blogspot.com/2009/01/s-ingleton.html&#34;&gt;design pattern &lt;em&gt;singleton&lt;/em&gt;&lt;/a&gt;. Ambos citavam as metaclasses, um conceito novo para mim e, pelo que andei conversando, novo para muitos de meus colegas de faculdade e trabalho. O seguinte texto √© resultado de minha tentativa de explicar o que s√£o metaclasses de uma forma simples de ser assimilada por pessoas que come√ßaram a estudar Python h√° pouco tempo como eu e portanto n√£o pode ser considerado como um guia definitivo e sem erros sobre o assunto. Qualquer sugest√£o ou coment√°rio √© bem vindo.&lt;/p&gt;
&lt;h2 id=&#34;revisando-orienta√ß√£o-a-objetos-e-definindo-metaclasses&#34;&gt;Revisando Orienta√ß√£o a Objetos e definindo metaclasses&lt;/h2&gt;
&lt;p&gt;Em uma linguagem de programa√ß√£o orientada a objetos, voc√™ pode definir classes que combinam dados (atributos) e m√©todos (comportamentos) que atuam sobre esses dados. Pode-se afirmar que ao definir uma classe se est√° definindo um dom√≠nio.&lt;/p&gt;
&lt;p&gt;As classes geralmente atuam como modelos para a cria√ß√£o de inst√¢ncias de classe, que apesar de compartilharem uma mesma &amp;ldquo;forma&amp;rdquo;, possuem dados diferentes. Uma inst√¢ncia &lt;code&gt;real&lt;/code&gt; e outra &lt;code&gt;peso&lt;/code&gt; de uma mesma classe &lt;code&gt;Moeda&lt;/code&gt; podem possuir um atributo &lt;code&gt;cotacao&lt;/code&gt;, mas cada inst√¢ncia ter√° seu pr√≥prio valor para esse atributo.&lt;/p&gt;
&lt;p&gt;Em Python, tudo √© objeto e tudo tem um tipo. N√£o existe diferen√ßa real entre uma classe e um tipo, especialmente depois da unifica√ß√£o de classes e tipos iniciada no Python 2.2. Ao definir uma classe, portanto, o programador est√° criando um novo tipo de dados. Como tudo √© objeto, as classes tamb√©m o s√£o e possuem uma classe, um tipo. A classe de uma classe √© chamada de metaclasse. O tipo &lt;em&gt;default&lt;/em&gt; de uma classe √© &lt;code&gt;type&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Moeda&lt;/span&gt;(object):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;pass&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; type(Moeda)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;type &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;type&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; Moeda
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;__main__&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Moeda&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Ao chamar &lt;code&gt;type()&lt;/code&gt; com apenas um argumento, obt√©m-se o tipo do objeto. Observe que o tipo da &lt;strong&gt;classe&lt;/strong&gt; &lt;code&gt;Moeda&lt;/code&gt; √© &lt;code&gt;type&lt;/code&gt;. Afirmar que o tipo de uma classe √© &lt;code&gt;type&lt;/code&gt; √© o mesmo que afirmar que a sua metaclasse √© &lt;code&gt;type&lt;/code&gt;. O exemplo acima comprovou que as classes realmente s√£o um objeto com um tipo.&lt;/p&gt;
&lt;p&gt;Os conceitos apresentados at√© aqui s√£o um tanto abstratos para quem aprendeu orienta√ß√£o a objetos em linguagens como Java e C# e para os novatos em Python. No t√≥pico seguinte, apresento a implementa√ß√£o de uma classe e de uma metaclasse com dicion√°rios, como se Python n√£o tivesse suporte sint√°tico para OO. Apesar de ningu√©m querer programar assim na pr√°tica o exemplo √© extremamente √∫til para entender como os objetos funcionam em Python.&lt;/p&gt;
&lt;h2 id=&#34;implementando-classes-com-dicion√°rios&#34;&gt;Implementando classes com dicion√°rios&lt;/h2&gt;
&lt;p&gt;O c√≥digo abaixo foi originalmente postado no blog de Pedro Werneck em um post que explicava o &lt;a href=&#34;https://web.archive.org/web/20110812155307/http://diaspar.blogspot.com/2008/11/o-porqu-do-self-explcito-ser-que-agora.html&#34;&gt;porqu√™ do &lt;code&gt;self&lt;/code&gt; expl√≠cito&lt;/a&gt;. Apesar de explicar metaclasses n√£o ser o objetivo principal do texto, achei bastante √∫til para entender como o suporte a orienta√ß√£o a objetos foi implementado em Python. Isso acaba levando ao entendimento de v√°rios conceitos interessantes (entre eles metaclasses) da linguagem e a uma aprecia√ß√£o ainda maior de sua simplicidade e consist√™ncia.&lt;/p&gt;
&lt;p&gt;No post original, o c√≥digo evoluiu aos poucos at√© chegar ao ponto em que est√° aqui. Para um entendimento pleno, &lt;a href=&#34;https://web.archive.org/web/20110812155307/http://diaspar.blogspot.com/2008/11/o-porqu-do-self-explcito-ser-que-agora.html&#34;&gt;leia o post original&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;A primeira parte define uma fun√ß√£o &lt;code&gt;newClass&lt;/code&gt; que recebe um nome de classe e um dicion√°rio com seus atributos e retorna um dicion√°rio que faz o papel das &amp;ldquo;classes&amp;rdquo; desse programa.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# precisaremos usar isso logo adiante...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; functools &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; partial
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;### Agora j√° podemos pensar nela como a classe &amp;#39;Class&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;newClass&lt;/span&gt;(nome, atributos):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    cls &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;nome&amp;#39;&lt;/span&gt;:nome} &lt;span style=&#34;color:#75715e&#34;&gt;# cria o dicion√°rio para a classe somente com seu nome&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; k, v &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; atributos&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;items():
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;# aqui se um m√©todo for o newNome, ele tem de receber a mesma&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;# altera√ß√£o e passar a receber &amp;#39;cls&amp;#39; como primeiro argumento&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; k &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;new&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;nome:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            v &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; partial(v, cls)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;# e atribu√≠mos tudo normalmente&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        cls[k] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; v
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; cls
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Em seguida, √© definido uma &amp;ldquo;classe&amp;rdquo; &lt;code&gt;Pessoa&lt;/code&gt; com os atributos &lt;code&gt;nome&lt;/code&gt;, &lt;code&gt;nascimento&lt;/code&gt; e um m√©todo &lt;code&gt;idade&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;### Classe Pessoa&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# construtor, corresponde ao __new__ de Python&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;newPessoa&lt;/span&gt;(cls, nome, nascimento): &lt;span style=&#34;color:#75715e&#34;&gt;# agora a classe mesmo vem aqui&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    inst &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {} &lt;span style=&#34;color:#75715e&#34;&gt;# a nova inst√¢ncia&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    inst[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;classe&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; cls &lt;span style=&#34;color:#75715e&#34;&gt;# a inst√¢ncia tem de saber de que classe √©, e&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                         &lt;span style=&#34;color:#75715e&#34;&gt;# agora pode saber dinamicamente&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;# Agora a inst√¢ncia vai criar os m√©todos embrulhando as chamadas&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;# para as fun√ß√µes originais em uma nova, j√° se incluindo nela&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; k, v &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; cls&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;items():
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;# Se for fun√ß√£o...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; callable(v):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;# √©, ent√£o vamos embrulhar...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            metodo &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; partial(v, inst)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            inst[k] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; metodo
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    inst[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;init&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;cls[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;nome&amp;#39;&lt;/span&gt;]](nome, nascimento)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; inst
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# inicializador, corresponde ao __init__ de Python&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;initPessoa&lt;/span&gt;(inst, nome, nascimento):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    inst[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;nome&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; nome
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    inst[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;nascimento&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; nascimento
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;# assim como fazemos normalmente no __init__, aqui n√£o precisamos&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;# nos preocupar&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;idade&lt;/span&gt;(inst, hoje):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    hd, hm, ha &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; hoje
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    nd, nm, na &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; inst[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;nascimento&amp;#39;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    x &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ha &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; na
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; x
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Com as fun√ß√µes que se tornar√£o os m√©todos da classe &lt;code&gt;Pessoa&lt;/code&gt; definidos, falta a √∫ltima parte da defini√ß√£o da classe que √© criar o objeto que representa a classe. Esse objeto √© retornado pela fun√ß√£o &lt;code&gt;newClass&lt;/code&gt; definida no in√≠cio do c√≥digo.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# e agora initPessoa() tem de entrar aqui tamb√©m&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Pessoa &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; newClass(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Pessoa&amp;#39;&lt;/span&gt;, {&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;newPessoa&amp;#39;&lt;/span&gt;:newPessoa,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                             &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;initPessoa&amp;#39;&lt;/span&gt;:initPessoa,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                             &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;idade&amp;#39;&lt;/span&gt;:idade})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;### Fim da defini√ß√£o de classe&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;A seguir, cria-se duas inst√¢ncias de &lt;code&gt;Pessoa&lt;/code&gt; para testar a implementa√ß√£o.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;hank &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Pessoa[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;newPessoa&amp;#39;&lt;/span&gt;](&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Hank Moody&amp;#39;&lt;/span&gt;, (&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1967&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;print hank[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;idade&amp;#39;&lt;/span&gt;]((&lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2008&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;fante &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Pessoa[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;newPessoa&amp;#39;&lt;/span&gt;](&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;John Fante&amp;#39;&lt;/span&gt;, (&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1909&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;print fante[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;idade&amp;#39;&lt;/span&gt;]((&lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2008&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Nesse exemplo, a fun√ß√£o &lt;code&gt;newClass&lt;/code&gt; faz o papel de uma metaclasse, pois √© ela que √© chamada para criar a classe. √â interessante notar que n√£o existe diferen√ßa real entre o funcionamento de &lt;code&gt;newClass&lt;/code&gt; e &lt;code&gt;newPessoa&lt;/code&gt;. Ambas s√£o fun√ß√µes que retornam inst√¢ncias, as inst√¢ncias retornadas por &lt;code&gt;newClass&lt;/code&gt; s√£o &amp;ldquo;classes&amp;rdquo; e as inst√¢ncias retornadas por &lt;code&gt;newPessoa&lt;/code&gt; s√£o objetos do tipo &lt;code&gt;Pessoa&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;O autor termina o texto usando as fun√ß√µes de inicializa√ß√£o e c√°lculo de idade com a metaclasse padr√£o de Python, &lt;code&gt;type&lt;/code&gt;. Ela recebe uma string que ser√° o nome da nova classe, uma tupla de classes base e um dicion√°rio representando o &lt;em&gt;namespace&lt;/em&gt; da classe. Esse dicion√°rio cont√©m o que voc√™ normalmente define como o corpo de uma instru√ß√£o &lt;code&gt;class&lt;/code&gt;. A √∫nica coisa que tem que mudar √© o acesso aos atributos, que antes estavam sendo feitos como chaves de dicion√°rios e agora devem usar a sintaxe de atributos normais.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#-*- coding: utf-8 -*-&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;initPessoa&lt;/span&gt;(inst, nome, nascimento):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        inst&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;nome &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; nome
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        inst&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;nascimento &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; nascimento
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;idade&lt;/span&gt;(inst, hoje):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        hd, hm, ha &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; hoje
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        nd, nm, na &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; inst&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;nascimento
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        x &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ha &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; na
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; x
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Pessoa &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; type(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Pessoa&amp;#39;&lt;/span&gt;, (), {&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;__init__&amp;#39;&lt;/span&gt;:initPessoa,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                              &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;idade&amp;#39;&lt;/span&gt;:idade})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;print &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Representa√ß√£o de Pessoa como string: &amp;#34;&lt;/span&gt;,Pessoa
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;print &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Tipo de Pessoa (sua metaclasse): &amp;#34;&lt;/span&gt;,type(Pessoa)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;print
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;print &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Imprimindo a idade de uma inst√¢ncia de Pessoa para teste: &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;hank &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Pessoa(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Hank Moody&amp;#39;&lt;/span&gt;, (&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1967&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;print hank&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;idade((&lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2008&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Resumindo:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Em Python tudo √© objeto, inclusive classes e inst√¢ncias. N√£o existe diferen√ßa real entre elas.&lt;/li&gt;
&lt;li&gt;Criar uma classe √© criar um novo tipo.&lt;/li&gt;
&lt;li&gt;A classe de uma classe √© chamada de metaclasse. As inst√¢ncias de metaclasses s√£o classes.&lt;/li&gt;
&lt;li&gt;A metaclasse &lt;em&gt;default&lt;/em&gt; √© &lt;code&gt;type&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;N√£o existe diferen√ßa real entre m√©todos e fun√ß√µes. Os m√©todos s√£o apenas fun√ß√µes com &lt;em&gt;namespaces&lt;/em&gt; espec√≠ficos (suas classes).&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;criando-e-definindo-metaclasses&#34;&gt;Criando e definindo metaclasses&lt;/h2&gt;
&lt;p&gt;Para definir sua pr√≥pria metaclasse, basta criar uma classe que herda da metaclasse &lt;code&gt;type&lt;/code&gt;. O m√©todo inicializador recebe os mesmos argumentos que o m√©todo inicializador de &lt;code&gt;type&lt;/code&gt;: uma string que ser√° o nome da classe, uma tupla de classes bases e um dicion√°rio representando o &lt;em&gt;namespace&lt;/em&gt; da classe.&lt;/p&gt;
&lt;p&gt;Segue um &lt;a href=&#34;https://web.archive.org/web/20090215011047/http://www.ibm.com/developerworks/linux/library/l-pymeta.html&#34;&gt;exemplo ligeiramente modificado&lt;/a&gt; de um artigo do &lt;a href=&#34;https://web.archive.org/web/20090221162632/http://www.ibm.com/developerworks/&#34;&gt;IBM developerWorks&lt;/a&gt;. Primeiramente, vamos definir uma nova metaclasse:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ChattyType&lt;/span&gt;(type):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; __new__(cls, name, bases, dct):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;       print &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Alocando mem√≥ria para classe&amp;#34;&lt;/span&gt;, name
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;       dct[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;usa_metaclasse&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;True&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;       &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; type&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;__new__(cls, name, bases, dct)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; __init__(cls, name, bases, dct):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;       print &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Inicializando (configurando) classe&amp;#34;&lt;/span&gt;, name
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;       super(ChattyType, cls)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;__init__(name, bases, dct)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Essa metaclasse sobrescreve o m√©todo &lt;code&gt;__new__&lt;/code&gt; que efetivamente √© o construtor e retorna uma nova inst√¢ncia de classe (nesse exemplo espec√≠fico, a inst√¢ncia retornada ser√° uma classe por estarmos escrevendo uma &lt;strong&gt;meta&lt;/strong&gt;classe) e o m√©todo &lt;code&gt;__init__&lt;/code&gt; que √© o inicializador da inst√¢ncia e n√£o retorna nada. √â tentador chamar o &lt;code&gt;__init__&lt;/code&gt; de construtor, mas o trabalho de cria√ß√£o de inst√¢ncias √© do &lt;code&gt;__new__&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;O c√≥digo acima criou um novo tipo que imprime uma mensagem quando est√° sendo criado e outra quando est√° sendo inicializado. Definiu-se tamb√©m que todas as inst√¢ncias do novo tipo ter√£o um atributo &lt;code&gt;usa_metaclasse&lt;/code&gt; com o valor inicial &lt;code&gt;True&lt;/code&gt;. Essa mudan√ßa foi feita adicionando uma chave ao dicion√°rio que representa o &lt;em&gt;namespace&lt;/em&gt;  da classe (&lt;code&gt;dct&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Com a metaclasse definida, j√° √© poss√≠vel criar classes a partir dela chamando-a como chama-se &lt;code&gt;type&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; X&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;ChattyType(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;X&amp;#39;&lt;/span&gt;, (object,), {})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Alocando mem√≥ria para classe X
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Inicializando (configurando) classe X
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Instanciar classes manualmente como feito acima, n√£o √© um procedimento muito comum. Segue como Python &lt;a href=&#34;https://www.python.org/download/releases/2.2.3/descrintro/#metaclasses&#34;&gt;determina a metaclasse&lt;/a&gt; de uma determinada classe:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Se o dicion√°rio que representa o &lt;em&gt;namespace&lt;/em&gt; da classe contiver uma chave &lt;code&gt;__metaclass__&lt;/code&gt;, o seu valor √© usado.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sen√£o, se existe pelo menos uma classe base, sua metaclasse √© usada.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sen√£o, se existe uma vari√°vel global &lt;code&gt;__metaclass__&lt;/code&gt;, seu valor √© usado.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sen√£o, &lt;code&gt;types.ClassType&lt;/code&gt; √© usado.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;A cria√ß√£o da classe &lt;code&gt;X&lt;/code&gt; feita no exemplo acima comumente seria feita assim:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;X&lt;/span&gt;(object):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;    __metaclass__&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;ChattyType
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Alocando mem√≥ria para classe X
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Inicializando (configurando) classe X
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;A instancia√ß√£o de &lt;code&gt;ChattyType&lt;/code&gt;, feita explicitamente no primeiro exemplo, agora √© feita pelo interpretador Python no final da instru√ß√£o &lt;code&gt;class&lt;/code&gt;. Note que a instru√ß√£o &lt;code&gt;class&lt;/code&gt; √© simplesmente &lt;a href=&#34;https://en.wikipedia.org/wiki/Syntactic_sugar&#34;&gt;a√ß√∫car sint√°tico&lt;/a&gt; para a instancia√ß√£o de classes atrav√©s de suas metaclasses. Os programadores que n√£o fazem uso de metaclasses acabam n√£o percebendo isso, j√° que simplesmente criam suas classes usando &lt;code&gt;class&lt;/code&gt; e Python simplesmente as instancia chamando &lt;code&gt;type&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Continuando o exemplo, podemos confirmar que o tipo da classe √© a metaclasse:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; type(X)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;__main__&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;ChattyType&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;X()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; type(y)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;__main__&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;X&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; type(X) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; type(type(y))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;True&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Para concluir, segue algumas dicas na hora de usar metaclasses:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;A modifica√ß√£o do dicion√°rio que representa o &lt;em&gt;namespace&lt;/em&gt; da classe deve ser feita em &lt;code&gt;__new__&lt;/code&gt;, como no exemplo. Se na defini√ß√£o de &lt;code&gt;ChattyType&lt;/code&gt;, &lt;code&gt;dct[&#39;usa_metaclasse&#39;]=True&lt;/code&gt; fosse executado em &lt;code&gt;__init__&lt;/code&gt;, a altera√ß√£o n√£o teria efeito. Considere o uso de &lt;a href=&#34;https://docs.python.org/3/library/functions.html#setattr&#34;&gt;setattr&lt;/a&gt; nesses casos.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sempre herde de &lt;code&gt;type&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;__new__&lt;/code&gt; √© o construtor e deve retornar uma nova inst√¢ncia.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Erros em metaclasses costumam aparecer durante &lt;code&gt;import&lt;/code&gt;s e defini√ß√µes de classes que usem metaclasses diferentes de &lt;code&gt;type&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;alguns-exemplos&#34;&gt;Alguns exemplos&lt;/h2&gt;
&lt;p&gt;Metaclasses s√£o usadas na maior parte do tempo para alterar o comportamento de cria√ß√£o e inicializa√ß√£o de classes. Na maioria dos casos, os usu√°rios finais s√£o outros programadores. Frameworks e ferramentas de mapeamento objeto-relacional s√£o exemplos de softwares que usam metaclasses.&lt;/p&gt;
&lt;p&gt;Alguns usos para as metaclasses:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://web.archive.org/web/20101122212629/http://www.python.org.br/wiki/UnificandoTiposClasses&#34;&gt;Criar propriedades automaticamente&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://kodumaro.blogspot.com/2009/01/s-ingleton.html&#34;&gt;Usar o design pattern singleton de forma transparente&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://everything2.com/title/metaclass&#34;&gt;Monitorar todas as chamadas a m√©todos de uma classe&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://web.archive.org/web/20090405120043/http://effbot.org/zone/metaclass-plugins.htm&#34;&gt;Fazer plugins se registrarem automaticamente em um registro comum&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Verificar diversos aspectos de uma classe para garantir que a classe tenha os m√©todos e atributos necess√°rios para o correto funcionamento do sistema. Isso √© interessante se a aplica√ß√£o pode ser estendida por plugins desenvolvidos por terceiros.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;O importante √© que a classe s√≥ √© realmente criada na chamada final a &lt;code&gt;type&lt;/code&gt; na metaclasse. Voc√™ √© livre para modificar o dicion√°rio de atributos de acordo com as suas necessidades antes disso, portanto existem muito mais possibilidades de uso para as metaclasses do que as apresentadas aqui.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Here Strings, Redirecionamentos e o builtin time</title>
      <link>https://gmgall.net/blog/here-strings-redirecionamentos-e-o-builtin-time/</link>
      <pubDate>Wed, 28 Jan 2009 00:00:00 -0300</pubDate>
      
      <guid>https://gmgall.net/blog/here-strings-redirecionamentos-e-o-builtin-time/</guid>
      <description>&lt;p&gt;Estou fazendo um comparativo entre &lt;code&gt;gzip&lt;/code&gt; e &lt;code&gt;bzip2&lt;/code&gt; em seus diferentes modos de compress√£o (-1 a -9) e para automatizar o processo fiz um script bash que usa alguns recursos bastante interessantes, mas √†s vezes negligenciados, por isso vou falar sobre eles aqui.&lt;/p&gt;
&lt;p&gt;O script basicamente compacta um determinado arquivo com o &lt;code&gt;bzip2&lt;/code&gt; e o &lt;code&gt;gzip&lt;/code&gt;, cada um deles usando todos os modos de compress√£o, mede o tempo que o compactador ficou na CPU e escreve os resultados em um arquivo de sa√≠da. O comando para compactar o arquivo √© montado dinamicamente usando dois loops aninhados. Um deles, o mais externo, itera sobre a lista de modos de compress√£o (-1 a -9) e o outro, o mais interno, itera sobre os compactadores. No final, a linha que realmente faz a compacta√ß√£o e mede o tempo gasto √©&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;TIMEC&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;$(&lt;/span&gt;bc &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;$(&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt; time eval &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$CMDC&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;; &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; 2&amp;gt;&amp;amp;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Onde &lt;code&gt;TIMEC&lt;/code&gt; recebe o tempo de CPU gasto pelo comando de compacta√ß√£o e &lt;code&gt;$CMDC&lt;/code&gt; cont√©m o comando de compacta√ß√£o. Um valor que essa vari√°vel pode assumir durante a execu√ß√£o √© &lt;code&gt;gzip -c -2 arquivo&amp;gt;arquivo.gz&lt;/code&gt;, por exemplo.&lt;/p&gt;
&lt;p&gt;Feita essa introdu√ß√£o, o primeiro recurso interessante que eu gostaria de apresentar √© o &lt;em&gt;here strings&lt;/em&gt;. O funcionamento dele √© simples. Dado um comando como:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bc &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;1+1&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;a string &lt;code&gt;1+1&lt;/code&gt; ser√° usada para alimentar a entrada padr√£o de &lt;code&gt;bc&lt;/code&gt;. Isso substitui a forma tradicional&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;1+1&amp;#39;&lt;/span&gt; | bc
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;que faz a mesma coisa, mas for√ßa um &lt;a href=&#34;https://en.wikipedia.org/wiki/Fork_(system_call)&#34;&gt;fork&lt;/a&gt; para isso, sendo mais ineficiente.&lt;/p&gt;
&lt;p&gt;Na linha do script que citei no in√≠cio do post, o &lt;code&gt;bc&lt;/code&gt; vai receber o tempo gasto em modo usu√°rio e o tempo gasto em modo kernel separados por um sinal de adi√ß√£o, fazendo portanto &lt;code&gt;TIMEC&lt;/code&gt; receber a soma desses valores. Aqui chegamos no segundo recurso que gostaria de citar nesse post. O builtin &lt;code&gt;time&lt;/code&gt; do bash (n√£o confundir com o comando externo &lt;code&gt;time&lt;/code&gt;), pode ter sua sa√≠da formatada atrav√©s do conte√∫do da vari√°vel &lt;code&gt;TIMEFORMAT&lt;/code&gt;. Para fazer a sa√≠da do &lt;code&gt;time&lt;/code&gt; ficar no formato de uma soma, simplesmente atribu√≠ o valor &lt;code&gt;%U+%S&lt;/code&gt; √† &lt;code&gt;TIMEFORMAT&lt;/code&gt;. O &lt;code&gt;%U&lt;/code&gt; representa o tempo gasto em modo de usu√°rio e o &lt;code&gt;%S&lt;/code&gt; o tempo gasto em modo kernel.&lt;/p&gt;
&lt;p&gt;Exemplo:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ time df
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Sist. Arq.           1K-blocos      Usad Dispon.   Uso% Montado em
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/dev/hdc3             &lt;span style=&#34;color:#ae81ff&#34;&gt;37491624&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;32393072&lt;/span&gt;   &lt;span style=&#34;color:#ae81ff&#34;&gt;3194048&lt;/span&gt;  92% /
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tmpfs                   &lt;span style=&#34;color:#ae81ff&#34;&gt;255180&lt;/span&gt;         &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;    &lt;span style=&#34;color:#ae81ff&#34;&gt;255180&lt;/span&gt;   0% /dev/shm
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;real    0m0.061s
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;user    0m0.020s
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sys     0m0.016s
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ TIMEFORMAT&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;%U+%S &lt;span style=&#34;color:#75715e&#34;&gt;# Formatando a sa√≠da de time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ time df
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Sist. Arq.           1K-blocos      Usad Dispon.   Uso% Montado em
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/dev/hdc3             &lt;span style=&#34;color:#ae81ff&#34;&gt;37491624&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;32393072&lt;/span&gt;   &lt;span style=&#34;color:#ae81ff&#34;&gt;3194048&lt;/span&gt;  92% /
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tmpfs                   &lt;span style=&#34;color:#ae81ff&#34;&gt;255180&lt;/span&gt;         &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;    &lt;span style=&#34;color:#ae81ff&#34;&gt;255180&lt;/span&gt;   0% /dev/shm
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;0.020+0.008
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Com isso, s√≥ fica faltando uma √∫ltima coisa para mostrar: como redirecionar a sa√≠da do builtin &lt;code&gt;time&lt;/code&gt;. A primeira coisa importante a ter em mente, √© que os tempos medidos em si s√£o jogados na &lt;code&gt;stderr&lt;/code&gt;, enquanto que a &lt;code&gt;stdout&lt;/code&gt; √© usada para a sa√≠da do comando cujo tempo de execu√ß√£o √© medido. Dito isso uma primeira tentativa de redirecionar a sa√≠da do &lt;code&gt;time&lt;/code&gt; para um arquivo por exemplo, seria fazer simplesmente fazer algo como &lt;code&gt;time comando 2&amp;gt; arquivo&lt;/code&gt;, mas isso n√£o funciona. O que √© redirecionado para arquivo nesse caso √© a sa√≠da de erros de comando, n√£o a do time, que continua imprimindo na tela. Exemplo:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ time ls naoexiste 2&amp;gt;saida_erros
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;real    0m0.041s
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;user    0m0.036s
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sys     0m0.004s
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cat saida_erros
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ls: imposs√≠vel acessar naoexiste: Arquivo ou diret√≥rio n√£o encontrado
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;A sa√≠da para isso √© executar o &lt;code&gt;time&lt;/code&gt; dentro de um bloco (em uma subshell tamb√©m funciona, mas √© ineficiente) e redirecionar a sa√≠da de erros desse bloco. Exemplo:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt; time ls naoexiste 2&amp;gt;/dev/null; &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; 2&amp;gt;saida_erros
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cat saida_erros
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;real    0m0.056s
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;user    0m0.028s
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sys     0m0.004s
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Perceba que dentro do bloco eu redirecionei a sa√≠da de erros de &lt;code&gt;ls naoexiste&lt;/code&gt; para &lt;code&gt;/dev/null&lt;/code&gt;, para que ela n√£o se misturasse com a sa√≠da do &lt;code&gt;time&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Com isso j√° temos toda a teoria para entender a linha que citei no in√≠cio do post. Vamos desmembr√°-la e revisar o que apresentei nesse post.&lt;/p&gt;
&lt;h2 id=&#34;revisando&#34;&gt;Revisando&lt;/h2&gt;
&lt;p&gt;Na linha&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;TIMEC&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;$(&lt;/span&gt;bc &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;$(&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt; time eval &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$CMDC&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;; &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; 2&amp;gt;&amp;amp;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;TIMEC&lt;/code&gt; vai receber a soma, feita pela calculadora &lt;code&gt;bc&lt;/code&gt;, dos tempos calculados pelo builtin &lt;code&gt;time&lt;/code&gt; do bash. A sa√≠da desse comando foi formatada de acordo com a vari√°vel &lt;code&gt;TIMEFORMAT&lt;/code&gt; para formar uma string com uma soma do tempo gasto em modo kernel com o tempo gasto em modo de usu√°rio (&lt;code&gt;%U+%S&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Dentro da subshell cujo resultado alimenta a entrada padr√£o do &lt;code&gt;bc&lt;/code&gt; o &lt;code&gt;time&lt;/code&gt; precisou ser executado dentro de um bloco, para ser poss√≠vel capturar o seu resultado, que vai para &lt;code&gt;stderr&lt;/code&gt;. A &lt;code&gt;stdout&lt;/code&gt; √© usada para a sa√≠da do comando cujo tempo de execu√ß√£o √© medido pelo &lt;code&gt;time&lt;/code&gt;. A &lt;code&gt;stderr&lt;/code&gt; do bloco inteiro foi conectado a &lt;code&gt;stdout&lt;/code&gt;, sendo assim devidamente retornada pela subshell e usada para alimentar a entrada padr√£o da &lt;code&gt;bc&lt;/code&gt; via &lt;em&gt;here strings&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;√â isso. Quaisquer coment√°rios s√£o bem vindos.&lt;/p&gt;
&lt;h2 id=&#34;refer√™ncias&#34;&gt;Refer√™ncias&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://mywiki.wooledge.org/BashFAQ/032&#34;&gt;BashFaq: How can I redirect the output of &amp;rsquo;time&amp;rsquo; to a variable or file?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tldp.org/LDP/abs/html/io-redirection.html&#34;&gt;Advanced Bash-Scripting Guide: I/O Redirection&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://jneves.wordpress.com/2008/03/05/hello-world/&#34;&gt;Papo de Botequim: Tira Gosto&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://linux.die.net/man/1/bash&#34;&gt;Manpage do Bash&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>
