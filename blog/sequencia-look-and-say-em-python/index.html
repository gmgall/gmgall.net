<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<style type=text/css>body{font-family:monospace;}</style>
	<title>Sequ√™ncia Look and Say em Python</title>
	<meta name="description" content="O site pessoal de Guilherme Magalh√£es Gall, um trabalhador da √°rea de TI. Cont√©m textos t√©cnicos sobre programa√ß√£o e os demais assuntos que interessam ao autor.">
	<meta name="author" content="Guilherme Magalh√£es Gall">
	<meta name="generator" content="Hugo 0.109.0">
	<meta name="keywords" content="python, functional, challenges">
	<link rel="me" href="https://bolha.us/@gmgall">
	<link rel="me" href="https://ursal.zone/@gmgall">
	<meta name="fediverse:creator" content="@gmgall@ursal.zone" />
	<link rel="stylesheet" href="/css/style.css">
	<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üë®‚Äçüíª</text></svg>">
	<link rel="stylesheet" href="/css/custom.css?rnd=1744426226">
	
</head>
<body>
	<header>
	================
	<div style="border-style: dotted; border-width: 2px; float: right">
	<label for="toggle-switch"><small>inverter tema</small></label>
	<input type="checkbox" id="toggle-switch">
	</div><br>
	== <a href="https://gmgall.net/">gmgall.net</a> ==<br>
	================
	<div style="float: right;">√â de compreender que sobretudo nos cansamos. Viver √© n√£o pensar.</div><br>
	<p>
	<nav>
			<a href="/"><b>In√≠cio</b></a>.
			
			
			<a href="/blog/"><b>Blog</b></a>.
			
			<a href="/categories/"><b>Categorias</b></a>.
			
			<a href="/tags/"><b>Tags</b></a>.
			
			<a href="/books/"><b>Livros lidos</b></a>.
			
			<a href="/feeds/"><b>Feeds üì°</b></a>.
			
			<a href="/blogroll/"><b>Blogroll</b></a>.
			
			<a href="/contact/"><b><span class="highlighted-entry">Contato</span></b></a>.
			
	</nav>
	</p>
			
</header>

	
	<main>
		<article>
			<h1>Sequ√™ncia Look and Say em Python</h1>
			<b><time>11.03.2009 00:00</time></b>
				
					<a class="category-link" href="/categories/tech">tech</a>
				
				
					<a href="/tags/python">python</a>
				
					<a href="/tags/functional">functional</a>
				
					<a href="/tags/challenges">challenges</a>
				

			<div>
				

<div class="old-content">Esse conte√∫do √© antigo e pode estar desatualizado ou n√£o representar mais a opini√£o do autor.</div>


				<p>Tenho brincado ultimamente com os desafios do <a href="http://www.pythonchallenge.com/">Python Challenge</a>. S√£o bem interessantes para quem quer aprender Python na pr√°tica. Estou resolvendo o n√≠vel 11 e j√° precisei <a href="https://web.archive.org/web/20090309064253/http://www.pythonware.com/products/pil/">processar imagens</a>, descompactar dados comprimidos com <a href="https://docs.python.org/3/library/zipfile.html">zip</a> e <a href="https://docs.python.org/3/library/bz2.html">bz2</a>, <a href="https://docs.python.org/3/library/pickle.html">serializar objetos</a>, <a href="https://docs.python.org/3/library/urllib.html">acessar recursos via URL</a>, <a href="https://docs.python.org/3/library/re.html">usar express√µes regulares</a> e algumas tarefas que n√£o exigiam necessariamente um m√≥dulo.</p>
<p>O √∫ltimo n√≠vel que resolvi tinha como resposta o <a href="https://web.archive.org/web/20111111070626/http://oeis.org/A005341">comprimento de um elemento espec√≠fico</a> de uma <a href="https://web.archive.org/web/20090303175131/http://www.research.att.com/~njas/sequences/">sequ√™ncia de inteiros</a> conhecida como <a href="https://web.archive.org/web/20090304154846/http://www.research.att.com/~njas/sequences/A005150"><em>look and say</em></a> (olhe e descreva). Achei diversas implementa√ß√µes da gera√ß√£o da sequ√™ncia pela web, nenhuma delas me pareceu <em>pythonica</em> ou leg√≠vel o suficiente. Resolvi juntar algumas das id√©ias que vi nessas implementa√ß√µes com os conhecimentos que obtive recentemente com a leitura de um material sobre <a href="https://docs.python.org/dev/howto/functional.html">programa√ß√£o funcional em Python</a> e criei uma fun√ß√£o que retorna uma lista com os elementos da sequ√™ncia. A minha solu√ß√£o n√£o √© a mais eficiente poss√≠vel (<a href="http://www.fantascienza.net/leonardo/so/briciole_python1/">essa p√°gina</a> cont√©m uma implementa√ß√£o alegadamente otimizada para velocidade), mas acho que √© elegante e mostra alguns aspectos interessantes da linguagem. Segue o c√≥digo:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">look_and_say</span>(first, elements):
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">from</span> itertools <span style="color:#f92672">import</span> groupby
</span></span><span style="display:flex;"><span>    seq <span style="color:#f92672">=</span> [str(first)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">say</span>(number):
</span></span><span style="display:flex;"><span>        ret <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k,g <span style="color:#f92672">in</span> groupby(number):
</span></span><span style="display:flex;"><span>            ret<span style="color:#f92672">.</span>append( str(len(list(g))) <span style="color:#f92672">+</span> k )
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;&#39;</span><span style="color:#f92672">.</span>join(ret)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> xrange(elements):
</span></span><span style="display:flex;"><span>        seq<span style="color:#f92672">.</span>append(say(seq[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> seq
</span></span></code></pre></div><p>O argumento <code>first</code> de <code>look_and_say</code> recebe o primeiro elemento da lista e <code>elements</code> quantos elementos depois do primeiro devem ser gerados. Exemplo de uso:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span> look_and_say(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>[<span style="color:#e6db74">&#39;1&#39;</span>, <span style="color:#e6db74">&#39;11&#39;</span>, <span style="color:#e6db74">&#39;21&#39;</span>, <span style="color:#e6db74">&#39;1211&#39;</span>, <span style="color:#e6db74">&#39;111221&#39;</span>, <span style="color:#e6db74">&#39;312211&#39;</span>, <span style="color:#e6db74">&#39;13112221&#39;</span>, <span style="color:#e6db74">&#39;1113213211&#39;</span>, <span style="color:#e6db74">&#39;31131211131221&#39;</span>, <span style="color:#e6db74">&#39;13211311123113112211&#39;</span>, <span style="color:#e6db74">&#39;11131221133112132113212221&#39;</span>]
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span> look_and_say(<span style="color:#ae81ff">55</span>,<span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>[<span style="color:#e6db74">&#39;55&#39;</span>, <span style="color:#e6db74">&#39;25&#39;</span>, <span style="color:#e6db74">&#39;1215&#39;</span>, <span style="color:#e6db74">&#39;11121115&#39;</span>, <span style="color:#e6db74">&#39;31123115&#39;</span>]
</span></span></code></pre></div><p>Dentre os aspectos que gostaria de destacar est√£o a possibilidade de importar partes de m√≥dulos e definir fun√ß√µes dentro de fun√ß√µes, o uso de listas para <a href="https://web.archive.org/web/20090324052548/http://codare.net/2006/09/17/python-concatenacao-eficiente-de-strings/">concatenar strings com efici√™ncia</a> e o uso de <a href="https://docs.python.org/dev/howto/functional.html#grouping-elements">itertools.groupby</a> que faz um agrupamento semelhante ao do comando <code>uniq</code> do Unix, juntando elementos iguais consecutivos em um <a href="https://docs.python.org/dev/howto/functional.html#iterators"><em>iterator</em></a>.</p>
<p>Para quem quiser uma abordagem matem√°tica da sequ√™ncia, o <a href="https://mathworld.wolfram.com/">Wolfram Mathworld</a> tem uma <a href="https://mathworld.wolfram.com/LookandSaySequence.html">p√°gina sobre ela</a>.</p>

			</div>
		</article>
	</main>





<aside>
	<div>
		<div>
			<h3>LATEST POSTS</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/books/realismo-capitalista/">Realismo Capitalista</a></li>
				
				<li><a href="/blog/papagaios-estocasticos-e-o-futebol/">Papagaios Estoc√°sticos e o Futebol</a></li>
				
				<li><a href="/blog/tedio-e-compulsao/">T√©dio e Compuls√£o</a></li>
				
				<li><a href="/blog/70-dias-de-trump/">70 Dias de Trump</a></li>
				
				<li><a href="/blog/arquivos-de-video-enviaveis-pelo-whatsapp-web/">Tornando Arquivos de V√≠deo Envi√°veis Pelo WhatsApp Web</a></li>
				
			</ul>
		</div>
	</div>
</aside>


	<footer>
	<p><a href="/license">CC</a> 2025 <a href="https://gmgall.net/"><b>gmgall.net</b></a>.
	</p>
</footer>

</body>
<script src="/js/theme.js"></script>
</html>
