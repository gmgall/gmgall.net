<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<style type=text/css>body{font-family:monospace;}</style>
	<title>Sequência Look and Say em Python</title>
	<meta name="description" content="O site pessoal de Guilherme Magalhães Gall, um trabalhador da área de TI. Contém textos técnicos sobre programação e os demais assuntos que interessam ao autor.">
	<meta name="author" content="Guilherme Magalhães Gall">
	<link rel="stylesheet" href="/css/style.css">
	
	
</head>
<body>
	<header>
	================<br>
	== <a href="https://gmgall.net/">gmgall.net</a> ==<br>
	================
	<div style="float: right;">É de compreender que sobretudo nos cansamos. Viver é não pensar.</div><br>
	<p>
	<nav>
			<a href="/"><b>Início</b></a>.
			
			
			<a href="/blog/"><b>Blog</b></a>.
			
			<a href="/categories/"><b>Categorias</b></a>.
			
			<a href="/tags/"><b>Tags</b></a>.
			
			<a href="/books/"><b>Livros lidos</b></a>.
			
	</nav>
	</p>
	
</header>

	
	<main>
		<article>
			<h1>Sequência Look and Say em Python</h1>
			<b><time>11.03.2009 00:00</time></b>
		       
		           <a href="/tags/python">python</a>
        	       
		           <a href="/tags/functional">functional</a>
        	       
		           <a href="/tags/challenges">challenges</a>
        	       

			<div>
				<p>Tenho brincado ultimamente com os desafios do <a href="http://www.pythonchallenge.com/">Python Challenge</a>. São bem interessantes para quem quer aprender Python na prática. Estou resolvendo o nível 11 e já precisei <a href="https://web.archive.org/web/20090309064253/http://www.pythonware.com/products/pil/">processar imagens</a>, descompactar dados comprimidos com <a href="https://docs.python.org/3/library/zipfile.html">zip</a> e <a href="https://docs.python.org/3/library/bz2.html">bz2</a>, <a href="https://docs.python.org/3/library/pickle.html">serializar objetos</a>, <a href="https://docs.python.org/3/library/urllib.html">acessar recursos via URL</a>, <a href="https://docs.python.org/3/library/re.html">usar expressões regulares</a> e algumas tarefas que não exigiam necessariamente um módulo.</p>
<p>O último nível que resolvi tinha como resposta o <a href="https://web.archive.org/web/20111111070626/http://oeis.org/A005341">comprimento de um elemento específico</a> de uma <a href="https://web.archive.org/web/20090303175131/http://www.research.att.com/~njas/sequences/">sequência de inteiros</a> conhecida como <a href="https://web.archive.org/web/20090304154846/http://www.research.att.com/~njas/sequences/A005150"><em>look and say</em></a> (olhe e descreva). Achei diversas implementações da geração da sequência pela web, nenhuma delas me pareceu <em>pythonica</em> ou legível o suficiente. Resolvi juntar algumas das idéias que vi nessas implementações com os conhecimentos que obtive recentemente com a leitura de um material sobre <a href="https://docs.python.org/dev/howto/functional.html">programação funcional em Python</a> e criei uma função que retorna uma lista com os elementos da sequência. A minha solução não é a mais eficiente possível (<a href="http://www.fantascienza.net/leonardo/so/briciole_python1/">essa página</a> contém uma implementação alegadamente otimizada para velocidade), mas acho que é elegante e mostra alguns aspectos interessantes da linguagem. Segue o código:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">look_and_say</span>(first, elements):
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">from</span> itertools <span style="color:#f92672">import</span> groupby
</span></span><span style="display:flex;"><span>    seq <span style="color:#f92672">=</span> [str(first)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">say</span>(number):
</span></span><span style="display:flex;"><span>        ret <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k,g <span style="color:#f92672">in</span> groupby(number):
</span></span><span style="display:flex;"><span>            ret<span style="color:#f92672">.</span>append( str(len(list(g))) <span style="color:#f92672">+</span> k )
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;&#39;</span><span style="color:#f92672">.</span>join(ret)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> xrange(elements):
</span></span><span style="display:flex;"><span>        seq<span style="color:#f92672">.</span>append(say(seq[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> seq
</span></span></code></pre></div><p>O argumento <code>first</code> de <code>look_and_say</code> recebe o primeiro elemento da lista e <code>elements</code> quantos elementos depois do primeiro devem ser gerados. Exemplo de uso:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span> look_and_say(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>[<span style="color:#e6db74">&#39;1&#39;</span>, <span style="color:#e6db74">&#39;11&#39;</span>, <span style="color:#e6db74">&#39;21&#39;</span>, <span style="color:#e6db74">&#39;1211&#39;</span>, <span style="color:#e6db74">&#39;111221&#39;</span>, <span style="color:#e6db74">&#39;312211&#39;</span>, <span style="color:#e6db74">&#39;13112221&#39;</span>, <span style="color:#e6db74">&#39;1113213211&#39;</span>, <span style="color:#e6db74">&#39;31131211131221&#39;</span>, <span style="color:#e6db74">&#39;13211311123113112211&#39;</span>, <span style="color:#e6db74">&#39;11131221133112132113212221&#39;</span>]
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span> look_and_say(<span style="color:#ae81ff">55</span>,<span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>[<span style="color:#e6db74">&#39;55&#39;</span>, <span style="color:#e6db74">&#39;25&#39;</span>, <span style="color:#e6db74">&#39;1215&#39;</span>, <span style="color:#e6db74">&#39;11121115&#39;</span>, <span style="color:#e6db74">&#39;31123115&#39;</span>]
</span></span></code></pre></div><p>Dentre os aspectos que gostaria de destacar estão a possibilidade de importar partes de módulos e definir funções dentro de funções, o uso de listas para <a href="https://web.archive.org/web/20090324052548/http://codare.net/2006/09/17/python-concatenacao-eficiente-de-strings/">concatenar strings com eficiência</a> e o uso de <a href="https://docs.python.org/dev/howto/functional.html#grouping-elements">itertools.groupby</a> que faz um agrupamento semelhante ao do comando <code>uniq</code> do Unix, juntando elementos iguais consecutivos em um <a href="https://docs.python.org/dev/howto/functional.html#iterators"><em>iterator</em></a>.</p>
<p>Para quem quiser uma abordagem matemática da sequência, o <a href="https://mathworld.wolfram.com/">Wolfram Mathworld</a> tem uma <a href="https://mathworld.wolfram.com/LookandSaySequence.html">página sobre ela</a>.</p>

			</div>
		</article>
	</main>
<aside>
	<div>
		<div>
			<h3>LATEST POSTS</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/blog/hello-world/">Hello World</a></li>
				
				<li><a href="/books/the-awful-german-language/">The Awful German Language</a></li>
				
				<li><a href="/blog/criando-suas-proprias-acoes-no-fail2ban-parte-3/">Criando Suas Próprias Ações no fail2ban - Parte 3</a></li>
				
				<li><a href="/blog/criando-seus-proprios-filtros-no-fail2ban-parte-2/">Criando Seus Próprios Filtros no fail2ban - Parte 2</a></li>
				
				<li><a href="/blog/introducao-ao-fail2ban-parte-1/">Introdução ao fail2ban - Parte 1</a></li>
				
			</ul>
		</div>
	</div>
</aside>


	<footer>
	<p>&copy; 2023 <a href="https://gmgall.net/"><b>gmgall.net</b></a>.
	</p>
</footer>

</body>
</html>
