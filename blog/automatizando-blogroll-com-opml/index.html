<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<style type=text/css>body{font-family:monospace;}</style>
	<title>Automatizando Blogroll Com OPML</title>
	<meta name="description" content="O site pessoal de Guilherme Magalh√£es Gall, um trabalhador da √°rea de TI. Cont√©m textos t√©cnicos sobre programa√ß√£o e os demais assuntos que interessam ao autor.">
	<meta name="author" content="Guilherme Magalh√£es Gall">
	<meta name="generator" content="Hugo 0.109.0">
	<meta name="keywords" content="web, html, rss, hugo, python, opml, github-actions">
	<link rel="me" href="https://bolha.us/@gmgall">
	<link rel="me" href="https://ursal.zone/@gmgall">
	<meta name="fediverse:creator" content="@gmgall@ursal.zone" />
	<link rel="stylesheet" href="/css/style.css">
	<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üë®‚Äçüíª</text></svg>">
	<link rel="stylesheet" href="/css/custom.css?rnd=1754017162">
	
</head>
<body>
	<header>
	================
	<div style="border-style: dotted; border-width: 2px; float: right">
	<label for="toggle-switch"><small>inverter tema</small></label>
	<input type="checkbox" id="toggle-switch">
	</div><br>
	== <a href="https://gmgall.net/">gmgall.net</a> ==<br>
	================
	<div style="float: right;">√â de compreender que sobretudo nos cansamos. Viver √© n√£o pensar.</div><br>
	<p>
	<nav>
			<a href="/"><b>In√≠cio</b></a>.
			
			
			<a href="/blog/"><b>Blog</b></a>.
			
			<a href="/categories/"><b>Categorias</b></a>.
			
			<a href="/tags/"><b>Tags</b></a>.
			
			<a href="/books/"><b>Livros lidos</b></a>.
			
			<a href="/feeds/"><b>Feeds üì°</b></a>.
			
			<a href="/blogroll/"><b>Blogroll</b></a>.
			
			<a href="/contact/"><b><span class="highlighted-entry">Contato</span></b></a>.
			
	</nav>
	</p>
			
</header>

	
	<main>
		<article>
			<h1>Automatizando Blogroll Com OPML</h1>
			<b><time>24.01.2024 20:51</time></b>
				
					<a class="category-link" href="/categories/tech">tech</a>
				
				
					<a href="/tags/web">web</a>
				
					<a href="/tags/html">html</a>
				
					<a href="/tags/rss">rss</a>
				
					<a href="/tags/hugo">hugo</a>
				
					<a href="/tags/python">python</a>
				
					<a href="/tags/opml">opml</a>
				
					<a href="/tags/github-actions">github-actions</a>
				

			<div>
				


				<p>TL;DR</p>
<p>Gero o meu <a href="/blogroll/">blogroll</a> a partir de um OPML gerado pelo meu agregador RSS. S√£o 4 etapas:</p>
<ol>
<li>Gerar o OPML no agregador.</li>
<li>Filtrar para manter apenas as categorias desejadas no OPML.</li>
<li>Escrever um <em>shortcode</em> do Hugo que renderiza o <em>blogroll</em> a partir do OPML.</li>
<li>Baixar o arquivo OPML para os diret√≥rios corretos do Hugo antes de gerar o site.</li>
</ol>
<p>Mais detalhes abaixo.</p>
<hr>
<p>H√° uma <a href="https://liaamancio.com.br/2024/01/07/blogroll-como-no-tempo-da-internet-arte-internet-moleque/">tend√™ncia</a> <a href="https://www.lireo.com/bringing-back-the-blogroll/">recente</a> <a href="https://blog.cadusilva.com/blogroll">interessante</a> em sites pessoais e blogs: o ressurgimento dos <em>blogrolls</em>.</p>
<p>Acho uma ideia excelente, uma forma de <a href="https://tomcritchlow.com/2022/04/21/new-rss/">aumentar a √°rea de superf√≠cie do <em>blogging</em></a>, de fazer as pessoas descobrirem mais conte√∫do em sites pessoais.</p>
<p>Fiz um <a href="/blogroll/">blogroll para chamar de meu tamb√©m</a>, mas a forma como gero o meu n√£o √© manual. Como leio a Indie Web principalmente por <a href="/tags/rss/">RSS</a>, pensei em oferecer tamb√©m um link para um arquivo <a href="http://opml.org/">OPML</a> com os <em>feeds</em> dos sites no <em>blogroll</em> para que fosse poss√≠vel subscri√ß√£o em todos os sites de uma vez s√≥.</p>
<p>Penso que essa possibilidade √© uma boa para quem est√° conhecendo RSS s√≥ agora ou perdeu o h√°bito de acompanhar as atualiza√ß√µes dos sites por um agregador (ol√°, vi√∫vas do Google Reader, tudo bem por a√≠? üëã).</p>
<p>O <strong>1¬∫ passo</strong> para gerar o <em>blogroll</em> seria exportar meus <em>feeds</em> num arquivo OPML. Uso o <a href="https://freshrss.org/">FreshRSS</a>, que tem uma <a href="https://github.com/FreshRSS/FreshRSS/tree/edge/cli">ferramenta de linha de comando</a> chamada <code>export-opml-for-user.php</code> para isso.</p>
<p>Eu poderia usar o arquivo OPML que ela gera diretamente, mas preciso dar uma limpada legal nos <em>feeds</em> em que estou inscrito. Tem muitos sites sem atualiza√ß√£o h√° anos e <em>feeds</em> quebrados ali. Pensei em s√≥ manter no OPML algumas categorias e fazer uma curadoria mais cuidadosa dessas que vou manter. Ent√£o o <strong>2¬∫ passo</strong> √© filtrar esse arquivo OPML que o FreshRSS gera.</p>
<p>Isso √© relativamente f√°cil com de fazer em <a href="https://docs.python.org/3/library/xml.etree.elementtree.html">Python</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#!/usr/bin/python3</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> xml.etree.ElementTree <span style="color:#66d9ef">as</span> ET
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>tree <span style="color:#f92672">=</span> ET<span style="color:#f92672">.</span>parse(sys<span style="color:#f92672">.</span>stdin)
</span></span><span style="display:flex;"><span>root <span style="color:#f92672">=</span> tree<span style="color:#f92672">.</span>getroot()
</span></span><span style="display:flex;"><span>body <span style="color:#f92672">=</span> root<span style="color:#f92672">.</span>find(<span style="color:#e6db74">&#39;body&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>categories <span style="color:#f92672">=</span> sys<span style="color:#f92672">.</span>argv[<span style="color:#ae81ff">1</span>:]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> category <span style="color:#f92672">in</span> body<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#39;outline&#39;</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> category<span style="color:#f92672">.</span>attrib<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;text&#39;</span>) <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> categories:
</span></span><span style="display:flex;"><span>        body<span style="color:#f92672">.</span>remove(category)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>tree<span style="color:#f92672">.</span>write(sys<span style="color:#f92672">.</span>stdout<span style="color:#f92672">.</span>buffer, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;utf-8&#39;</span>, xml_declaration<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span></code></pre></div><p>O script acima l√™ OPML da <code>stdin</code> e escreve na <code>stdout</code> o mesmo OPML com apenas as categorias passadas como argumentos.</p>
<p>Ent√£o, supondo que o script acima esteja num arquivo chamado <code>filter_opml.py</code>, o comando abaixo grava em <code>blogroll.xml</code> um arquivo OPML s√≥ com as categorias <code>Fediverso lus√≥fono</code> e <code>ctrl-c.club</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>./export-opml-for-user.php --user gmgall | python filter_opml.py <span style="color:#e6db74">&#39;Fediverso lus√≥fono&#39;</span> <span style="color:#e6db74">&#39;ctrl-c.club&#39;</span> &gt; blogroll.xml
</span></span></code></pre></div><p>Tendo esse arquivo dispon√≠vel, √© &ldquo;f√°cil&rdquo; consumi-lo no <a href="https://gohugo.io/">Hugo</a>. Ele permite guardar arquivos no diret√≥rio <code>data</code> que ter√£o seus dados expostos nos templates, ent√£o √© &ldquo;s√≥&rdquo; quest√£o de copiar meu arquivo OPML para <code>data</code> e consumi-los com algo como <code>{{ $body := .Site.Data.blogroll.body }}</code>, certo?</p>
<p>Sim, mas n√£o achei intuitivo fazer isso. Saiu, mas teve alguma tentativa e erro envolvidas. A <a href="https://github.com/gohugoio/hugo/commit/0eaaa8fee37068bfc8ecfb760f770ecc9a7af22a">mensagem de commit</a> na implementa√ß√£o dessa funcionalidade cita casos simples, em que se recupera o <strong>conte√∫do</strong> de tags XML. O padr√£o OPML traz as informa√ß√µes quase todas como <strong>atributos</strong>. Voc√™ precisa usar a <a href="https://gohugo.io/functions/index-function/">fun√ß√£o <code>index</code> do Hugo</a> para acessar os atributos e eles viram chaves com nomes iniciados por <code>-</code> nos templates. Recomendo ler o que o <a href="https://brainbaking.com/post/2022/01/generating-a-blogroll-with-opml-in-hugo/#hugo-and-xml-parsing">Wouter Groeneveld escreveu sobre</a>. Ap√≥s brigar um pouco com isso, saiu o <a href="https://gohugo.io/content-management/shortcodes/"><em>shortcode</em></a> abaixo, o <strong>3¬∫ passo</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>{{ <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">body</span> <span style="color:#f92672">:=</span> .<span style="color:#a6e22e">Site</span>.<span style="color:#a6e22e">Data</span>.<span style="color:#a6e22e">blogroll</span>.<span style="color:#a6e22e">body</span> }}
</span></span><span style="display:flex;"><span>{{ <span style="color:#66d9ef">range</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">outline</span> }}
</span></span><span style="display:flex;"><span>  {{<span style="color:#f92672">-</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">text</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">index</span> . <span style="color:#e6db74">&#34;-text&#34;</span> }}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#a6e22e">h2</span>&gt;{{ <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">text</span> }}&lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">h2</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#a6e22e">ul</span>&gt;
</span></span><span style="display:flex;"><span>    {{<span style="color:#f92672">-</span> <span style="color:#66d9ef">range</span> .<span style="color:#a6e22e">outline</span> }}
</span></span><span style="display:flex;"><span>      {{<span style="color:#f92672">-</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">feed_text</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">index</span> . <span style="color:#e6db74">&#34;-text&#34;</span> }}
</span></span><span style="display:flex;"><span>      {{<span style="color:#f92672">-</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">feed_description</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">index</span> . <span style="color:#e6db74">&#34;-description&#34;</span> }}
</span></span><span style="display:flex;"><span>      {{<span style="color:#f92672">-</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">feed_htmlUrl</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">index</span> . <span style="color:#e6db74">&#34;-htmlUrl&#34;</span> }}
</span></span><span style="display:flex;"><span>      {{<span style="color:#f92672">-</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">feed_xmlUrl</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">index</span> . <span style="color:#e6db74">&#34;-xmlUrl&#34;</span> }}
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#a6e22e">li</span>&gt;&lt;<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">href</span>=<span style="color:#e6db74">&#34;{{ $feed_htmlUrl }}&#34;</span>&gt;{{ <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">feed_text</span> }}&lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">a</span>&gt; &lt;<span style="color:#a6e22e">a</span> <span style="color:#a6e22e">href</span>=<span style="color:#e6db74">&#34;{{ $feed_xmlUrl }}&#34;</span>&gt;&lt;<span style="color:#a6e22e">img</span> <span style="color:#a6e22e">alt</span>=<span style="color:#e6db74">&#34;O logo do RSS.&#34;</span> <span style="color:#a6e22e">src</span>=<span style="color:#e6db74">&#34;/img/rss.svg&#34;</span> <span style="color:#a6e22e">height</span>=<span style="color:#e6db74">&#34;12&#34;</span>  <span style="color:#a6e22e">width</span>=<span style="color:#e6db74">&#34;12&#34;</span> <span style="color:#a6e22e">style</span>=<span style="color:#e6db74">&#34;display: inline&#34;</span>&gt;&lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">a</span>&gt; {{ <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">feed_description</span> }}&lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">li</span>&gt;
</span></span><span style="display:flex;"><span>    {{ <span style="color:#a6e22e">end</span> }}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">ul</span>&gt;
</span></span><span style="display:flex;"><span>{{ <span style="color:#a6e22e">end</span> }}
</span></span></code></pre></div><p>Esse <em>shortcode</em> quebra nos casos em que uma categoria tem um √∫nico <em>feed</em> ou caso <code>body</code> possua uma √∫nica categoria. Vi quem preferisse <a href="https://nikdoof.com/posts/2022/automating-a-blogroll-in-hugo/#the-script">transformar o OPML em JSON antes de process√°-lo</a> com o Hugo. Tendo enfrentado esses probleminhas, entendo a motiva√ß√£o.</p>
<p>Chamei esse <em>shortcode</em> de <code>blogroll</code> e isso me permite renderiz√°-lo em qualquer arquivo de conte√∫do desse site com <code>{{&lt; blogroll &gt;}}</code>. Vou renderiz√°-lo entre 2 linhas horizontais abaixo:</p>
<hr>


  <h2>ctrl-c.club</h2>
  <ul>
      <li><a href="https://ctrl-c.club/~chiptune/blog/">~chiptune posts on ctrl-c.club</a> <a href="https://ctrl-c.club/~gmgall/feeds/chiptune.xml"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> chiptune&#39;s blog</li>
    
      <li><a href="https://ctrl-c.club/~FikaMedHasse/blog.html">~FikaMedHasse posts on ctrl-c.club</a> <a href="https://ctrl-c.club/~gmgall/feeds/FikaMedHasse.xml"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> Blog!</li>
    
      <li><a href="https://ctrl-c.club/~gome/journal/">~gome posts on ctrl-c.club</a> <a href="https://ctrl-c.club/~gmgall/feeds/gome.xml"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> gome ‚Äî journal</li>
    
      <li><a href="https://ctrl-c.club/~lettuce/">~lettuce posts on ctrl-c.club</a> <a href="https://ctrl-c.club/~gmgall/feeds/lettuce.xml"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> /home/lettuce/public_html/index.html</li>
    
  </ul>

  <h2>Fediverso lus√≥fono</h2>
  <ul>
      <li><a href="https://lori.bearblog.dev/">blog da Lori</a> <a href="https://lori.bearblog.dev/feed/"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> √†s vezes eu empolgo e saio despejando palavras....</li>
    
      <li><a href="https://blog.cadusilva.com/">Blog do Cadu Silva</a> <a href="https://blog.cadu.cc/feed"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> Site pessoal de Cadu Silva. Aqui voc√™ encontra especialmente textos sobre tecnologia.</li>
    
      <li><a href="https://blog.dunossauro.com/">Blog do Dunossauro</a> <a href="https://blog.dunossauro.com/feed.xml"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> Blog do Dunossauro</li>
    
      <li><a href="https://www.brunoarine.com/posts/">Blog on Bruno Arine</a> <a href="https://brunoarine.com/blog/index.xml"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> Recent content in Blog on Bruno Arine</li>
    
      <li><a href="https://crieaporradeum.blog/">Crie a Porra de um Blog</a> <a href="https://crieaporradeum.blog/index.xml"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> Recent content on Crie a Porra de um Blog</li>
    
      <li><a href="https://escrevescreve.wordpress.com/">escrevescreve ‚Äì cecilia giannetti</a> <a href="https://gmgall.github.io/feeds/escrevescreve.xml"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> cecilia giannetti</li>
    
      <li><a href="https://blog.ayom.media/felipe-siles/">Felipe Siles</a> <a href="https://blog.ayom.media/felipe-siles/feed/"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> Espero que seja √∫til</li>
    
      <li><a href="http://helio.loureiro.eng.br/index.php">Home - helio.loureiro.eng.br</a> <a href="http://helio.loureiro.eng.br/index.php?format=feed&amp;type=rss"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> Helio Loureiro - site pessoal, blog, informa√ß√µes, scripts, unix, linux, receitas t√©cnicas, python, cyberativismo e outros</li>
    
      <li><a href="https://kiff.bearblog.dev/">Kiff</a> <a href="https://kiff.bearblog.dev/feed/"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> Sou designer e desenho, pinto e bordo (entre outras manualidades) nas horas vagas, mas nada escritora. 

Fotografia, ilustra√ß√£o, filmes, s√©ries, livros,...</li>
    
      <li><a href="https://kiff.blog/">Kiff</a> <a href="https://kiff.blog/rss"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> No more empty sketchbooks. Gallery of drawings and sketches produced during 2021, in an attempt to be daily studies.</li>
    
      <li><a href="https://liaamancio.com.br/">Lia Amancio</a> <a href="https://liaamancio.com.br/feed/"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> Desde 2001 servindo conte√∫do de qualidade na internet.</li>
    
      <li><a href="https://www.memedecarbono.com.br/">Meme de Carbono</a> <a href="https://www.memedecarbono.com.br/feed/"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> Os √°tomos e ideias que constroem a consci√™ncia</li>
    
      <li><a href="https://odd.bearblog.dev/">ODD BLOG</a> <a href="https://odd.bearblog.dev/feed/"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> Oi, eu sou o DD, e este √© o meu blog pessoal, onde pretendo expor algumas de minhas ideias e ideais. Para encontrar os meus textos, clique no bot√£o &#34;Blog&#34; al...</li>
    
      <li><a href="https://sol2070.in/">sol2070</a> <a href="https://sol2070.in/feed/notes.xml"><img alt="O logo do RSS." src="/img/rss.svg" height="12"  width="12" style="display: inline"></a> </li>
    
  </ul>


<hr>
<p>Falta s√≥ baixar o arquivo OPML para o diret√≥rio <code>data</code> (para que os dados fiquem dispon√≠veis para o <em>shortcode</em> <code>blogroll</code>) e para o diret√≥rio <code>static</code> (para que ele fique dispon√≠vel para download) a cada gera√ß√£o do site. Como uso <a href="https://docs.github.com/en/actions">GitHub Actions</a>, o <strong>4¬∫ passo</strong> √© adicionar uma etapa no <a href="https://github.com/gmgall/gmgall.net/blob/main/.github/workflows/gh-pages-deployment.yml">workflow de gera√ß√£o desse site</a> que coloca o arquivo nesses diret√≥rios.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>- <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Download OPML for blogroll</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">run</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    wget &#39;${{ secrets.OPML_URL }}&#39; -O data/blogroll.xml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    cp data/blogroll.xml static/blogroll.xml</span>    
</span></span></code></pre></div><p>Isso √© tudo.</p>
<p>E a√≠? Voc√™ tem um <em>blogroll</em>? J√° pensou em oferecer um OPML para facilitar a inscri√ß√£o em todos os <em>feeds</em> de uma vez s√≥?</p>

			</div>
		</article>
	</main>

<h3>Coment√°rios</h3>




<details>
  <summary>Responda pelo fediverso</summary>
  <p>Responda pelo fediverso colando a URL abaixo no seu cliente: <pre>https://ursal.zone/@gmgall/111819125801728163</pre></p>
  <button onclick="navigator.clipboard.writeText('https:\/\/ursal.zone\/@gmgall\/111819125801728163')">COPIAR URL</button>
</details>
<a id="load-comments">Carregar coment√°rios</a>

<div id="comments-list"></div>


<script src="/js/purify.min.js"></script>
<script>
  document.getElementById('load-comments').addEventListener('click', async () => {
    document.getElementById('load-comments').remove()
    const response = await fetch('https:\/\/ursal.zone/api/v1/statuses/111819125801728163/context')
    const data = await response.json()

    if (data.descendants && data.descendants.length > 0) {
      let descendants = data.descendants
      for (let descendant of descendants) {
        document.getElementById('comments-list').appendChild(DOMPurify.sanitize(createCommentEl(descendant), { 'RETURN_DOM_FRAGMENT': true }))
      }
    } else {
      document.getElementById('comments-list').innerHTML = '<p>‚ö†Ô∏è Sem coment√°rios no fediverso. ‚ö†Ô∏è</p>'
    }
  })

  function createCommentEl(d) {
    let comment = document.createElement('div')
    comment.classList.add('comment')

    let commentHeader = document.createElement('div')
    commentHeader.classList.add('comment-header')

    let userAvatar = document.createElement('img')
    userAvatar.classList.add('avatar')
    userAvatar.setAttribute('height', 60 )
    userAvatar.setAttribute('width', 60 )
    userAvatar.setAttribute('src', d.account.avatar_static)

    let userLink = document.createElement('a')
    userLink.classList.add('user-link')
    userLink.setAttribute('href', d.account.url)
    for (let emoji of d.account.emojis) {
      d.account.display_name = d.account.display_name.replace(
        `:${emoji.shortcode}:`,
        `<img src="${emoji.static_url}" alt="${emoji.shortcode}" height="14px" width="14px" />`
        )
    }
    let serverName = d.account.url.replace(/https?:\/\/(.+)\/@.+/, '$1')
    userLink.innerHTML = d.account.display_name + " (@" + d.account.username + "@" + serverName + ")"

    let commentDateTime = document.createElement('a')
    commentDateTime.classList.add('comment-date')
    commentDateTime.setAttribute('href', d.url)
    commentDateTime.innerHTML = d.created_at.substr(0, 10).replace(/([0-9]{4})-([0-9]{2})-([0-9]{2})/, '$3/$2/$1')

    commentHeader.appendChild(userAvatar)
    commentHeader.appendChild(userLink)
    commentHeader.appendChild(commentDateTime)

    let commentContent = document.createElement('p')
    commentContent.innerHTML = d.content

    comment.appendChild(commentHeader)
    comment.appendChild(commentContent)

    return comment
  }
</script>


<aside>
	<div>
		<div>
			<h3>LATEST POSTS</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/blog/a-ficha-esta-caindo/">A Ficha Est√° Caindo (na Europa)</a></li>
				
				<li><a href="/books/realismo-capitalista/">Realismo Capitalista</a></li>
				
				<li><a href="/blog/papagaios-estocasticos-e-o-futebol/">Papagaios Estoc√°sticos e o Futebol</a></li>
				
				<li><a href="/blog/tedio-e-compulsao/">T√©dio e Compuls√£o</a></li>
				
				<li><a href="/blog/70-dias-de-trump/">70 Dias de Trump</a></li>
				
			</ul>
		</div>
	</div>
</aside>


	<footer>
	<p><a href="/license">CC</a> 2025 <a href="https://gmgall.net/"><b>gmgall.net</b></a>.
	</p>
</footer>

</body>
<script src="/js/theme.js"></script>
</html>
