<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<style type=text/css>body{font-family:monospace;}</style>
	<title>Acompanhando Suas Inscri√ß√µes no YouTube por RSS</title>
	<meta name="description" content="O site pessoal de Guilherme Magalh√£es Gall, um trabalhador da √°rea de TI. Cont√©m textos t√©cnicos sobre programa√ß√£o e os demais assuntos que interessam ao autor.">
	<meta name="author" content="Guilherme Magalh√£es Gall">
	<meta name="generator" content="Hugo 0.109.0">
	<meta name="keywords" content="rss, youtube, opml">
	<link rel="me" href="https://bolha.us/@gmgall">
	<link rel="me" href="https://ursal.zone/@gmgall">
	<meta name="fediverse:creator" content="@gmgall@ursal.zone" />
	<link rel="stylesheet" href="/css/style.css">
	<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üë®‚Äçüíª</text></svg>">
	<link rel="stylesheet" href="/css/custom.css?rnd=1735784082">
	
</head>
<body>
	<header>
	================
	<div style="border-style: dotted; border-width: 2px; float: right">
	<label for="toggle-switch"><small>inverter tema</small></label>
	<input type="checkbox" id="toggle-switch">
	</div><br>
	== <a href="https://gmgall.net/">gmgall.net</a> ==<br>
	================
	<div style="float: right;">√â de compreender que sobretudo nos cansamos. Viver √© n√£o pensar.</div><br>
	<p>
	<nav>
			<a href="/"><b>In√≠cio</b></a>.
			
			
			<a href="/blog/"><b>Blog</b></a>.
			
			<a href="/categories/"><b>Categorias</b></a>.
			
			<a href="/tags/"><b>Tags</b></a>.
			
			<a href="/books/"><b>Livros lidos</b></a>.
			
			<a href="/feeds/"><b>Feeds üì°</b></a>.
			
			<a href="/blogroll/"><b>Blogroll</b></a>.
			
			<a href="/contact/"><b><span class="highlighted-entry">Contato</span></b></a>.
			
	</nav>
	</p>
			
</header>

	
	<main>
		<article>
			<h1>Acompanhando Suas Inscri√ß√µes no YouTube por RSS</h1>
			<b><time>23.02.2023 15:01</time></b>
				
					<a class="category-link" href="/categories/tech">tech</a>
				
				
					<a href="/tags/rss">rss</a>
				
					<a href="/tags/youtube">youtube</a>
				
					<a href="/tags/opml">opml</a>
				

			<div>
				


				<p>TL;DR. Escrevi uma ferramenta que converte um CSV com suas inscri√ß√µes no YouTube em um arquivo <a href="http://opml.org/">OPML</a> com os <em>feeds</em> RSS dos canais. Esse arquivo OPML √© import√°vel em quase todos os agregadores RSS. Use o conversor em <a href="https://yt2opml.gmgall.net/">https://yt2opml.gmgall.net/</a></p>
<p>Com FreshRSS + extens√µes, n√£o √© necess√°rio nem sair do agregador para assistir aos v√≠deos.</p>
<hr>
<p>Procurei colocar RSS de volta na minha vida desde a <a href="/blog/tchau-twitter">debacle do Twitter</a>.</p>
<p>Sempre fui f√£ do padr√£o RSS. Acho que √© a melhor forma de consumo de conte√∫do na <em>web</em>. Hoje, √© mais importante do que nunca, j√° que d√° liberdade ao usu√°rio de desviar das diversas formas pelas quais <a href="https://thewebisfucked.com/">a <em>web</em> se tornou uma merda</a>.</p>
<p>S√≥ que eu era uma das folcl√≥ricas vi√∫vas do <a href="https://pt.wikipedia.org/wiki/Google_Reader">Google Reader</a>. N√£o tinha me adaptado bem a nenhum outro agregador depois dele. Tentei usar v√°rios, mas nunca parava com nenhum. O que usei por mais tempo depois do Reader foi o <a href="https://feedly.com/">Feedly</a>, mas ele nunca virou meu &ldquo;ponto central&rdquo; de consumo da <em>web</em> como o Reader foi.</p>
<figure><img src="viuva_google_reader_23-02-2023.png"
         alt="Print de tweet com texto &#34;Eu trocaria f√°cil todas as minhas redes sociais pelo Google Reader&#34;."/><figcaption>
            <h4>Toda vi√∫va do Google Reader desde 2013.</h4>
        </figcaption>
</figure>

<p>Ent√£o fui mantendo o Twitter como &ldquo;agregador&rdquo;. Junta isso com o fato de estarem l√° v√°rias pessoas que eu gosto e a comodidade falou mais alto. Meu &ldquo;ponto central&rdquo; virou o Twitter.</p>
<p>O novo senhor feudal do Twitter ser um <a href="https://www.platformer.news/p/yes-elon-musk-created-a-special-system">d√©spota</a> <a href="https://arstechnica.com/tech-policy/2023/02/musk-fired-top-engineer-for-explaining-why-his-tweets-views-are-down/">mimado</a> me colocou para procurar, mais uma vez, um agregador que pudesse usar rotineiramente.</p>
<p>Estou feliz em dizer que parece que a busca terminou. Estou usando o <a href="https://freshrss.org/">FreshRSS</a> h√° uns 15 dias e estou bem satisfeito.</p>
<p>Minha &ldquo;dieta de informa√ß√µes&rdquo; melhorou demais. J√° n√£o fico t√£o ansioso com o <em>doomscrolling</em> na <em>timeline</em> do Twitter ou lendo a √∫ltima pol√™mica de pol√≠tica que chegou aos <em>trending topics</em>. Estou lendo textos mais longos, sem um algoritmo no caminho.</p>
<p>Foi apenas natural que eu quisesse consumir <strong>tudo</strong> via RSS, n√£o apenas texto. O pr√≥ximo candidato √≥bvio era o YouTube. Com frequ√™ncia eu abro o <em>app</em> e vejo alguma coisa indicada na <em>home</em> ou ent√£o entro numa sequ√™ncia de <em>Shorts</em> que me fazem gastar um temp√£o neles enquanto os v√≠deos dos canais em que sou inscrito mesmo v√£o ficando para depois.</p>
<p>Minha intui√ß√£o √© que a Google n√£o ia deixar os canais com <em>feeds</em> RSS, justamente para for√ßar a visita ao site. Fico feliz de estar errado. Todo canal tem um <em>feed</em> (por enquanto?), s√≥ √© uma funcionalidade um pouco &ldquo;escondida&rdquo;.</p>
<p>Os canais no YouTube t√™m um <em>Channel ID</em> √∫nico e a URL dos canais seguem o formato <code>https://www.youtube.com/channel/ID</code>.  O feed fica em <code>https://www.youtube.com/feeds/videos.xml?channel_id=ID</code>. Usando como exemplo o canal <a href="https://www.youtube.com/@TeseOnze">Tese Onze</a>, temos:</p>
<ul>
<li>URL do canal: <a href="http://www.youtube.com/channel/UC0fGGprihDIlQ3ykWvcb9hg">http://www.youtube.com/channel/UC0fGGprihDIlQ3ykWvcb9hg</a></li>
<li>URL do <em>feed</em> RSS: <a href="https://www.youtube.com/feeds/videos.xml?channel_id=UC0fGGprihDIlQ3ykWvcb9hg">https://www.youtube.com/feeds/videos.xml?channel_id=UC0fGGprihDIlQ3ykWvcb9hg</a></li>
</ul>
<p>O problema √© que ningu√©m divulga a URL do seu canal nesse formato. Em geral se usa o formato mais amig√°vel <a href="https://www.youtube.com/@TeseOnze">https://www.youtube.com/@TeseOnze</a>.</p>
<p>Ent√£o, quem quer acompanhar via RSS os v√≠deos de suas inscri√ß√µes no YouTube precisa:</p>
<ul>
<li>obter uma lista dos IDs de todos os canais em que √© inscrito;</li>
<li>gerar uma lista das URLs dos <em>feeds</em>;</li>
<li>importar todos os <em>feeds</em> da lista no agregador.</li>
</ul>
<p>O formato usado no mundo RSS para importar/exportar listas de <em>feeds</em> √© o <a href="http://opml.org/">OPML</a>, baseado em XML.</p>
<p>Segue um exemplo de OPML:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;ISO-8859-1&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;opml</span> <span style="color:#a6e22e">version=</span><span style="color:#e6db74">&#34;2.0&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&lt;head&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">&lt;title&gt;</span>mySubscriptions.opml<span style="color:#f92672">&lt;/title&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">&lt;dateCreated&gt;</span>Sat, 18 Jun 2005 12:11:52 GMT<span style="color:#f92672">&lt;/dateCreated&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">&lt;/head&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&lt;body&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">&lt;outline</span> <span style="color:#a6e22e">text=</span><span style="color:#e6db74">&#34;Yahoo! News: Technology&#34;</span> <span style="color:#a6e22e">description=</span><span style="color:#e6db74">&#34;Technology&#34;</span> <span style="color:#a6e22e">htmlUrl=</span><span style="color:#e6db74">&#34;http://news.yahoo.com/news?tmpl=index&amp;amp;cid=738&#34;</span> <span style="color:#a6e22e">language=</span><span style="color:#e6db74">&#34;unknown&#34;</span> <span style="color:#a6e22e">title=</span><span style="color:#e6db74">&#34;Yahoo! News: Technology&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;rss&#34;</span> <span style="color:#a6e22e">version=</span><span style="color:#e6db74">&#34;RSS2&#34;</span> <span style="color:#a6e22e">xmlUrl=</span><span style="color:#e6db74">&#34;http://rss.news.yahoo.com/rss/tech&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">&lt;/body&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/opml&gt;</span>
</span></span></code></pre></div><p>O padr√£o OPML √© quase autoexplicativo: √© simplesmente um elemento <code>&lt;opml&gt;</code> com 2 elementos obrigat√≥rios: <code>&lt;head&gt;</code> e <code>&lt;outline&gt;</code>.</p>
<p>Dentro do 1¬∫ v√£o metainforma√ß√µes do arquivo.</p>
<p>Dentro do 2¬∫ vai a lista dos <em>feeds</em> em si, cada um dentro de um <code>&lt;outline&gt;</code>. Os <code>&lt;outlines&gt;</code>s podem ser aninhados (caso se deseje colocar <em>feeds</em> dentro de uma categoria, por exemplo) e claro que uma lista t√≠pica vai trazer mais de um <em>feed</em>, mas a inten√ß√£o aqui √© s√≥ mostrar o formato. O atributo chave para a gente aqui √© o <code>xmlUrl</code>, que √© o endere√ßo do <em>feed</em>.</p>
<p>N√≥s j√° sabemos o formato usado para importa√ß√£o de <em>feeds</em> e como formar a URL de um <em>feed</em> de um canal no YouTube a partir do seu ID.</p>
<p>S√≥ precisamos obter a lista dos IDs dos canais agora.</p>
<p>O <a href="https://takeout.google.com/">Google Takeout</a> √© uma forma de fazer download de todos os registros que a Google possui de um usu√°rio. Basta n√£o esquecer de marcar o YouTube que o arquivo resultante vai conter uma lista de inscri√ß√µes em <code>Takeout/YouTube and YouTube Music/subscriptions/subscriptions.csv</code>.</p>
<p>O formato √© bem simples, √© um CSV de 3 colunas:</p>
<pre tabindex="0"><code>Channel ID,Channel URL,Channel title
UC0fGGprihDIlQ3ykWvcb9hg,http://www.youtube.com/channel/UC0fGGprihDIlQ3ykWvcb9hg,Tese Onze
</code></pre><p>Se voc√™ √© como eu, pensou logo em fazer um <em>shell script</em> que para cada linha do CSV:</p>
<ul>
<li>
<p>concatena <code>https://www.youtube.com/feeds/videos.xml?channel_id=</code> com os valores da 1¬™ coluna;</p>
</li>
<li>
<p>joga o valor resultante dentro de um <code>&lt;outline&gt;</code>, numa propriedade <code>xmlURL</code>.</p>
</li>
</ul>
<p>Provavelmente funcionaria, mas decidi n√£o <a href="https://stackoverflow.com/questions/3034611/whats-so-bad-about-building-xml-with-string-concatenation">correr</a> com <a href="https://news.ycombinator.com/item?id=16915823">tesouras</a> dessa vez e usei pacotes JavaScript pr√≥prios para processar <a href="https://d3js.org/">CSV</a> e <a href="https://github.com/scripting/opmlPackage">OPML</a>.</p>
<p>Se quiser usar no seu navegador, acesse: <a href="https://yt2opml.gmgall.net/">https://yt2opml.gmgall.net/</a></p>
<p>Tudo √© 100% feito no lado do cliente. O <a href="https://github.com/gmgall/YTtoOPML">c√≥digo</a> √© de um <em>backender</em>, ent√£o as manipula√ß√µes do DOM provavelmente poderiam ser mais elegantes, mas funciona.</p>
<p>Com o arquivo OPML gerado, foi s√≥ import√°-lo no FreshRSS. Uma possibilidade <strong>muito interessante</strong> nele √© a instala√ß√£o de uma <a href="https://github.com/kevinpapst/freshrss-youtube">extens√£o</a> que incorpora os v√≠deos dentro. Assim, n√£o √© necess√°rio sair do agregador para assistir aos v√≠deos. Mostrei como fica no v√≠deo abaixo.</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/FwTSpqo4Ucw" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="FreshRSS com extens√£o pra embutir v√≠deos do YouTube ativada."></iframe>
</div>

<p>Bem pr√°tico, n√£o?</p>

			</div>
		</article>
	</main>

<h3>Coment√°rios</h3>




<details>
  <summary>Responda pelo fediverso</summary>
  <p>Responda pelo fediverso colando a URL abaixo no seu cliente: <pre>https://bolha.us/@gmgall/109915815936744454</pre></p>
  <button onclick="navigator.clipboard.writeText('https:\/\/bolha.us\/@gmgall\/109915815936744454')">COPIAR URL</button>
</details>
<a id="load-comments">Carregar coment√°rios</a>

<div id="comments-list"></div>


<script src="/js/purify.min.js"></script>
<script>
  document.getElementById('load-comments').addEventListener('click', async () => {
    document.getElementById('load-comments').remove()
    const response = await fetch('https:\/\/bolha.us/api/v1/statuses/109915815936744454/context')
    const data = await response.json()

    if (data.descendants && data.descendants.length > 0) {
      let descendants = data.descendants
      for (let descendant of descendants) {
        document.getElementById('comments-list').appendChild(DOMPurify.sanitize(createCommentEl(descendant), { 'RETURN_DOM_FRAGMENT': true }))
      }
    } else {
      document.getElementById('comments-list').innerHTML = '<p>‚ö†Ô∏è Sem coment√°rios no fediverso. ‚ö†Ô∏è</p>'
    }
  })

  function createCommentEl(d) {
    let comment = document.createElement('div')
    comment.classList.add('comment')

    let commentHeader = document.createElement('div')
    commentHeader.classList.add('comment-header')

    let userAvatar = document.createElement('img')
    userAvatar.classList.add('avatar')
    userAvatar.setAttribute('height', 60 )
    userAvatar.setAttribute('width', 60 )
    userAvatar.setAttribute('src', d.account.avatar_static)

    let userLink = document.createElement('a')
    userLink.classList.add('user-link')
    userLink.setAttribute('href', d.account.url)
    for (let emoji of d.account.emojis) {
      d.account.display_name = d.account.display_name.replace(
        `:${emoji.shortcode}:`,
        `<img src="${emoji.static_url}" alt="${emoji.shortcode}" height="14px" width="14px" />`
        )
    }
    let serverName = d.account.url.replace(/https?:\/\/(.+)\/@.+/, '$1')
    userLink.innerHTML = d.account.display_name + " (@" + d.account.username + "@" + serverName + ")"

    let commentDateTime = document.createElement('a')
    commentDateTime.classList.add('comment-date')
    commentDateTime.setAttribute('href', d.url)
    commentDateTime.innerHTML = d.created_at.substr(0, 10).replace(/([0-9]{4})-([0-9]{2})-([0-9]{2})/, '$3/$2/$1')

    commentHeader.appendChild(userAvatar)
    commentHeader.appendChild(userLink)
    commentHeader.appendChild(commentDateTime)

    let commentContent = document.createElement('p')
    commentContent.innerHTML = d.content

    comment.appendChild(commentHeader)
    comment.appendChild(commentContent)

    return comment
  }
</script>


<aside>
	<div>
		<div>
			<h3>LATEST POSTS</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/blog/free-software-advent-2024/">Free Software Advent 2024</a></li>
				
				<li><a href="/books/memorias-do-subsolo/">Mem√≥rias Do Subsolo</a></li>
				
				<li><a href="/blog/transcricao-thermidor/">Transcri√ß√£o dos Trechos em Letra Cursiva de &#39;Thermidor&#39;</a></li>
				
				<li><a href="/books/sandman-distant-mirrors/">Sandman - Distant Mirrors</a></li>
				
				<li><a href="/blog/windows-95-qemu/">Windows 95 no QEMU</a></li>
				
			</ul>
		</div>
	</div>
</aside>


	<footer>
	<p><a href="/license">CC</a> 2025 <a href="https://gmgall.net/"><b>gmgall.net</b></a>.
	</p>
</footer>

</body>
<script src="/js/theme.js"></script>
</html>
