<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<style type=text/css>body{font-family:monospace;}</style>
	<title>Gerando Feeds Com GitHub Actions e os Servindo Com GitHub Pages</title>
	<meta name="description" content="O site pessoal de Guilherme Magalh√£es Gall, um trabalhador da √°rea de TI. Cont√©m textos t√©cnicos sobre programa√ß√£o e os demais assuntos que interessam ao autor.">
	<meta name="author" content="Guilherme Magalh√£es Gall">
	<meta name="generator" content="Hugo 0.109.0">
	<meta name="keywords" content="rss, github-actions, github-pages">
	<link rel="me" href="https://bolha.us/@gmgall">
	<link rel="me" href="https://ursal.zone/@gmgall">
	<link rel="stylesheet" href="/css/style.css">
	<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üë®‚Äçüíª</text></svg>">
	<link rel="stylesheet" href="/css/custom.css?rnd=1697130682">
	
</head>
<body>
	<header>
	================
	<div style="border-style: dotted; border-width: 2px; float: right">
	<label for="toggle-switch"><small>inverter tema</small></label>
	<input type="checkbox" id="toggle-switch">
	</div><br>
	== <a href="https://gmgall.net/">gmgall.net</a> ==<br>
	================
	<div style="float: right;">√â de compreender que sobretudo nos cansamos. Viver √© n√£o pensar.</div><br>
	<p>
	<nav>
			<a href="/"><b>In√≠cio</b></a>.
			
			
			<a href="/blog/"><b>Blog</b></a>.
			
			<a href="/categories/"><b>Categorias</b></a>.
			
			<a href="/tags/"><b>Tags</b></a>.
			
			<a href="/books/"><b>Livros lidos</b></a>.
			
			<a href="/feeds/"><b>Feeds üì°</b></a>.
			
			<a href="/contact/"><b><span class="highlighted-entry">Contato</span></b></a>.
			
	</nav>
	</p>
			
</header>

	
	<main>
		<article>
			<h1>Gerando Feeds Com GitHub Actions e os Servindo Com GitHub Pages</h1>
			<b><time>16.04.2023 14:01</time></b>
				
					<a class="category-link" href="/categories/tech">tech</a>
				
				
					<a href="/tags/rss">rss</a>
				
					<a href="/tags/github-actions">github-actions</a>
				
					<a href="/tags/github-pages">github-pages</a>
				

			<div>
				


				<p>Terminei o <a href="/blog/criando-feeds-rss-com-newslinkrss/">post anterior</a> sobre o <a href="https://github.com/ittner/newslinkrss">newslinkrss</a> falando o seguinte:</p>
<blockquote>
<p>Com o comando que gera o <em>feed</em> pronto, podemos remover a op√ß√£o <code>--log</code>. Para assinarmos o <em>feed</em> criado podemos agendar a execu√ß√£o peri√≥dica do <code>newslinkrss</code> via <code>cron</code> e assinarmos o <em>feed</em> resultante ou ent√£o indicarmos no nosso agregador RSS que a origem √© um comando.</p>
</blockquote>
<p>Isso cobre 2 de 3 possibilidades de consumo dos <em>feeds</em> criados. S√£o elas:</p>
<ol>
<li>arquivo local;</li>
<li>comando e</li>
<li>URL.</li>
</ol>
<p>A 1¬™ possibilidade, a de agendar o <code>newslinkrss</code> para escrever periodicamente um <em>feed</em> em <code>/path/para/o/feed.xml</code> e depois informar ao agregador que a origem do <em>feed</em> √© um arquivo, n√£o √© vi√°vel caso o nosso agregador RSS seja um servi√ßo <em>web</em> como o <a href="https://feedly.com/">Feedly</a>. Ele naturalmente n√£o tem acesso ao nosso sistema de arquivos local.</p>
<p>A 2¬™ possibilidade, a de informar que a origem do <em>feed</em> √© um comando, √© interessante por n√£o nos obrigar a agendar a execu√ß√£o peri√≥dica do <code>newslinkrss</code>, mas n√£o s√£o todos os agregadores que possuem essa funcionalidade.</p>
<figure><img src="liferea.png"
         alt="Tela de cadastro do agregador RSS Liferea mostrando 3 fontes poss√≠veis para o feed: URL, comando e arquivo local."/><figcaption>
            <h4>Tela de cadastro de feed no agregador Liferea. N√£o s√£o todos que permitem usar um comando como fonte.</h4>
        </figcaption>
</figure>

<p>Resta a √∫ltima possibilidade: gerar os <em>feeds</em>, servi-los na <em>web</em> e informar no agregador que a origem √© a URL dos <em>feeds</em> gerados. Isso vai funcionar em agregadores <em>web</em>, <em>mobile</em> ou <em>desktop</em> e vai permitir que outras pessoas tamb√©m cadastrem o <em>feed</em> que voc√™ criou. √â a possibilidade mais vers√°til porque estaremos fazendo o trabalho que o dono do site <strong>deveria ter feito, mas n√£o fez</strong>: servir um <em>feed</em> para o site acess√≠vel a qualquer um na <em>web</em>.</p>
<p>A desvantagem dessa abordagem √© que nem todo mundo vai ter um servidor <em>web</em> acess√≠vel na internet e configurar um s√≥ para servir <em>feeds</em> de sites de terceiros pode ser trabalho demais. Seria √≥timo uma alternativa mais simples e sugiro uma que depende apenas de termos uma conta no <a href="https://github.com">GitHub</a>: gerar os <em>feeds</em> com <a href="https://docs.github.com/en/actions">GitHub Actions</a> e servi-los via <a href="https://pages.github.com/">GitHub Pages</a>.</p>
<p>O &ldquo;estalo&rdquo; veio ao pensar no <a href="https://github.com/gmgall/gmgall.net/blob/main/.github/workflows/gh-pages-deployment.yml"><em>workflow</em> que uso para publicar meu site</a>. Se tenho um <em>workflow</em> que executa o <a href="https://gohugo.io/">Hugo</a> e faz o <em>deploy</em> dos arquivos HTML/CSS/JS/etc. gerados por ele no GitHub Pages, seria quest√£o de pouca adapta√ß√£o ter um <em>workflow</em> que executa o <code>newslinkrss</code> e faz o <em>deploy</em> dos arquivos XML gerados.</p>
<p>Funcionou praticamente na 1¬™ tentativa. O <a href="https://github.com/gmgall/feeds">reposit√≥rio</a> com o <a href="https://github.com/gmgall/feeds/blob/main/generate_feeds.sh">script que gera os <em>feeds</em></a> e o <a href="https://github.com/gmgall/feeds/blob/main/.github/workflows/feeds.yml"><em>workflow</em> que executa o script e faz o <em>deploy</em></a> dos arquivos √© p√∫blico. O script <code>generate_feeds.sh</code> √© s√≥ um script Bash com uma sucess√£o de chamadas ao <code>newslinkrss</code>. Os arquivos gerados em s√£o escritos em <code>./feeds</code>.</p>
<p>O arquivo <code>.github/workflows/feeds.yml</code> descreve um <em>workflow</em> do GitHub Actions que prepara o ambiente, executa o script <code>generate_feeds.sh</code> e faz o <em>deploy</em> dos arquivos em <code>./feeds</code> no GitHub Pages. Vou descrever o que cada trecho do arquivo faz sem muito detalhamento porque acho que √© praticamente autoexplicativo. Vou me deter no processo de configura√ß√£o do Pages e das chaves no final, por ser as maiores &ldquo;pegadinhas&rdquo; do processo.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#f92672">name</span>: <span style="color:#ae81ff">Generate and deploy feeds</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">on</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">schedule</span>: <span style="color:#75715e"># Run workflow automatically</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">cron</span>: <span style="color:#e6db74">&#39;0 * * * *&#39;</span> <span style="color:#75715e"># Runs every hour, on the hour</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">workflow_dispatch</span>:
</span></span></code></pre></div><p>O trecho acima nomeia o <em>workflow</em> e define que ele ser√° executado em 2 situa√ß√µes:</p>
<ul>
<li>Periodicamente, a cada 1h. A sintaxe usada √© a do <code>cron</code>. Se precisar de ajuda com ela, veja o assistente <a href="https://crontab.guru/">crontab guru</a>.</li>
<li>Ao se clicar no bot√£o <strong>Run workflow</strong> na p√°gina das <em>Actions</em> do reposit√≥rio no GitHub. N√£o √© estritamente necess√°rio, mas √© interessante enquanto voc√™ estiver testando. Imagine precisar esperar uma hora pela pr√≥xima execu√ß√£o do <em>workflow</em> s√≥ para descobrir se alguma altera√ß√£o funcionou como previsto?</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#f92672">jobs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">build-deploy</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">runs-on</span>: <span style="color:#ae81ff">ubuntu-latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">steps</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/checkout@v1</span>
</span></span></code></pre></div><p>Aqui √© definido que a m√°quina virtual (o <em>runner</em>) em que os passos seguintes ser√£o executados usar√° a √∫ltima vers√£o dispon√≠vel do Ubuntu Linux.</p>
<p>Tamb√©m executa o primeiro passo: fazer <em>checkout</em> do reposit√≥rio. O <em>runner</em> vai precisar usar o script <code>generate_feeds.sh</code>. Essa <em>action</em> torna o script dispon√≠vel no <em>runner</em>. √â como se estiv√©ssemos fazendo <code>git clone</code> no <em>runner</em>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Instala Python 3</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/setup-python@v2</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">with</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">python-version</span>: <span style="color:#ae81ff">3.9</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Instala newslinkrss</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">run</span>: <span style="color:#ae81ff">pip3 install newslinkrss</span>
</span></span></code></pre></div><p>Acima instalamos o Python e o <code>newslinkrss</code> via <code>pip</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Cria diret√≥rio que receber√° os feeds</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">run</span>: <span style="color:#ae81ff">mkdir feeds</span>
</span></span></code></pre></div><p>Acima criamos o diret√≥rio <code>feeds</code>. Lembram que <code>generate_feeds.sh</code> escreve sempre no diret√≥rio <code>feeds</code>? Com esse passo, criamos esse diret√≥rio no <em>runner</em>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Executa newslinkrss</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">run</span>: <span style="color:#ae81ff">bash generate_feeds.sh</span>
</span></span></code></pre></div><p>Acima executamos o script <code>generate_feeds.sh</code>. O script est√° dispon√≠vel no <em>runner</em> porque o 1¬∫ passo que fizemos foi um <em>checkout</em>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Deploy</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">peaceiris/actions-gh-pages@v2</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">env</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">ACTIONS_DEPLOY_KEY</span>: <span style="color:#ae81ff">${{ secrets.ACTIONS_DEPLOY_KEY }}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">PUBLISH_BRANCH</span>: <span style="color:#ae81ff">gh-pages</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">PUBLISH_DIR</span>: <span style="color:#ae81ff">./feeds</span>
</span></span></code></pre></div><p>Acima √© feito o <em>deploy</em> com a <em>action</em> <a href="https://github.com/peaceiris/actions-gh-pages"><code>peaceiris/actions-gh-pages</code></a>. Essa √© a parte final do <em>workflow</em> e a que eu acho que merece um pouco mais de aten√ß√£o <strong>porque demanda configura√ß√µes em outros locais</strong>. Vou falar de cada vari√°vel abaixo de <code>env:</code>.</p>
<p><code>PUBLISH_DIR</code> define o diret√≥rio cujo conte√∫do ser√° servido via GitHub Pages. Os <em>feeds</em> s√£o escritos em <code>./feeds</code> no <em>runner</em> pelo script <code>generate_feeds.sh</code>.</p>
<p><code>PUBLISH_BRANCH</code> define o nome do <em>branch</em> no nosso reposit√≥rio que ter√° os arquivos servidos via GitHub Pages. Ele ser√° um branch √≥rf√£o do reposit√≥rio. N√£o ter√° o script <code>generate_feeds.sh</code>, o <code>README.md</code>, o arquivo YAML que descreve o <em>workflow</em> ou qualquer outra coisa que n√£o sejam os arquivos servidos via GitHub Pages. Aqui estamos definindo o <em>branch</em> <code>gh-pages</code>.</p>
<p>Certifique-se de que as configura√ß√µes do seu reposit√≥rio em <em>Settings</em> &gt; <em>Pages</em> estejam como na imagem abaixo: definindo que a origem √© um <em>branch</em> de nome <code>gh-pages</code>. No momento em que escrevo esse post, a URL para acessar essa configura√ß√£o √© <a href="https://github.com/USER/REPO/settings/pages">https://github.com/USER/REPO/settings/pages</a>.</p>
<figure><img src="pages_config.png"
         alt="Configura√ß√µes do GitHub Pages para um reposit√≥rio no GitHub. As configura√ß√µes mostram que o branch de origem √© gh-pages."/><figcaption>
            <h4>Configura√ß√µes do GitHub Pages.</h4>
        </figcaption>
</figure>

<p><code>ACTIONS_DEPLOY_KEY</code> define um <a href="https://docs.github.com/en/actions/security-guides/encrypted-secrets"><em>segredo criptografado</em></a> de mesmo nome com a <strong>parte privada</strong> de um par de chaves que ser√° usada para o <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/managing-deploy-keys"><em>deploy</em></a>. Os segredos s√£o configurados em <em>Settings</em> &gt; <em>Secrets and variables</em>. No momento em que escrevo esse post, a URL √© <a href="https://github.com/USER/REPO/settings/secrets/actions">https://github.com/USER/REPO/settings/secrets/actions</a>.</p>
<p>A <strong>parte p√∫blica</strong> deve ser configurada em <em>Settings</em> &gt; <em>Deploy keys</em>. No momento em que escrevo esse post, a URL para essa configura√ß√£o √© <a href="https://github.com/USER/REPO/settings/keys">https://github.com/USER/REPO/settings/keys</a>.</p>
<p>A l√≥gica √© an√°loga a configurar login numa m√°quina remota via SSH com um par de chaves. A sua m√°quina local fica com a parte privada. A m√°quina remota fica com a parte p√∫blica.</p>
<p>O reposit√≥rio tem uma chave p√∫blica configurada para que apenas <strong>as m√°quinas com a parte privada correspondente</strong> possam fazer <em>deploy</em> nele. Essa parte privada √© usada pelos <em>runners</em> do GitHub Actions. Eles nada mais s√£o que m√°quinas virtuais ef√™meras, ent√£o n√£o podemos logar nelas uma √∫nica vez e configurar a chave privada como far√≠amos em uma m√°quina qualquer que controlamos. A parte privada fica acess√≠vel aos <em>runners</em> por meio dos <a href="https://docs.github.com/en/actions/security-guides/encrypted-secrets">segredos</a>.</p>
<p>Como configuramos ambas as partes nas configura√ß√µes de um mesmo reposit√≥rio, pode ficar confuso o papel de cada parte. Espero as linhas acima tenham ajudado a elucidar o papel de cada uma. Mostro como fazer na pr√°tica abaixo.</p>
<h2 id="configurando-as-chaves">Configurando as chaves</h2>
<h3 id="criando-as-chaves">Criando as chaves</h3>
<p>A cria√ß√£o do par de chaves pode ser feita com um comando como o seguinte:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ssh-keygen -t rsa -b <span style="color:#ae81ff">4096</span> -C <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>git config user.email<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span> -f gh-pages -N <span style="color:#e6db74">&#34;&#34;</span>
</span></span></code></pre></div><p>2 arquivos ser√£o criados por esse comando: <code>gh-pages</code> e <code>gh-pages.pub</code>, as chaves privada e p√∫blica, respectivamente.</p>
<h3 id="adicionando-a-chave-p√∫blica-como-deploy-key">Adicionando a chave p√∫blica como <em>deploy key</em></h3>
<p>Acesse <a href="https://github.com/USER/REPO/settings/keys">https://github.com/USER/REPO/settings/keys</a>, clique em <em>Add deploy key</em> e cole a <strong>parte p√∫blica</strong>. Lembre-se de marcar a caixa <em>Allow write access</em> e clique em <em>Add key</em>.</p>
<p>As configura√ß√µes em <em>Settings</em> &gt; <em>Deploy keys</em> devem ficar parecidas √†s da figura abaixo.</p>
<figure><img src="deploy_keys.png"
         alt="Configura√ß√µes das deploy keys num reposit√≥rio do GitHub ap√≥s a configura√ß√£o de uma chave."/><figcaption>
            <h4>Configura√ß√µes das deploy keys.</h4>
        </figcaption>
</figure>

<h3 id="adicionando-a-chave-privada-como-segredo">Adicionando a chave privada como segredo</h3>
<p>Acesse <a href="https://github.com/USER/REPO/settings/secrets/actions">https://github.com/USER/REPO/settings/secrets/actions</a>, clique no bot√£o verde <em>New repository secret</em>, use <code>ACTIONS_DEPLOY_KEY</code> como nome, cole a <strong>parte privada</strong> no campo <em>Secret</em> e clique em <em>Add secret</em>.</p>
<p>As configura√ß√µes em <em>Settings</em> &gt; <em>Secrets and variables</em> &gt; <em>Actions</em> devem ficar parecidas √†s da figura abaixo.</p>
<figure><img src="secrets.png"
         alt="Configura√ß√µes dos segredos criptografados num reposit√≥rio do GitHub ap√≥s a inser√ß√£o de um segredo chamado &#34;ACTIONS_DEPLOY_KEY&#34;."/><figcaption>
            <h4>Configura√ß√µes dos segredos num reposit√≥rio ap√≥s a inser√ß√£o de um segredo chamado ACTIONS_DEPLOY_KEY.</h4>
        </figcaption>
</figure>

<p>Com o <em>workflow</em> funcionando, os <em>feeds</em> estar√£o dispon√≠veis numa URL como <a href="https://USER.github.io/REPO/FILE.xml">https://USER.github.io/REPO/FILE.xml</a>. No caso do <em>feed</em> de exemplo que fiz para o <a href="/blog/criando-feeds-rss-com-newslinkrss/">post anterior</a>, a URL √© <a href="https://gmgall.github.io/feeds/gmgall_untappd.xml">https://gmgall.github.io/feeds/gmgall_untappd.xml</a> (<code>feeds</code> √© o <a href="https://github.com/gmgall/feeds">nome do reposit√≥rio</a> e <code>gmgall_untappd.xml</code> √© o <a href="https://github.com/gmgall/feeds/blob/464ddf704a3ee2d46bbc40220331b0bb27d4e767/generate_feeds.sh#L20">nome do arquivo gerado pelo script</a> <code>generate_feeds.sh</code>).</p>
<hr>
<p>Usa o GitHub Actions para algo parecido? Pensou em outra forma de servir os <em>feeds</em>? Seria √≥timo conversar sobre isso. Entre com <a href="/contact/">contato</a> se quiser trocar ideia.</p>

			</div>
		</article>
	</main>

<h3>Coment√°rios</h3>
<details>
  <summary>Responda pelo fediverso</summary>
  <p>Responda pelo fediverso colando a URL abaixo no seu cliente: <pre>https://bolha.us/@gmgall/110210588620721950</pre></p>
  <button onclick="navigator.clipboard.writeText('https:\/\/bolha.us\/@gmgall\/110210588620721950')">COPIAR URL</button>
</details>
<a id="load-comments">Carregar coment√°rios</a>

<div id="comments-list"></div>


<script src="/js/purify.min.js"></script>
<script>
  document.getElementById('load-comments').addEventListener('click', async () => {
    document.getElementById('load-comments').remove()
    const response = await fetch('https:\/\/bolha.us/api/v1/statuses/110210588620721950/context')
    const data = await response.json()

    if (data.descendants && data.descendants.length > 0) {
      let descendants = data.descendants
      for (let descendant of descendants) {
        document.getElementById('comments-list').appendChild(DOMPurify.sanitize(createCommentEl(descendant), { 'RETURN_DOM_FRAGMENT': true }))
      }
    } else {
      document.getElementById('comments-list').innerHTML = '<p>‚ö†Ô∏è Sem coment√°rios no fediverso. ‚ö†Ô∏è</p>'
    }
  })

  function createCommentEl(d) {
    let comment = document.createElement('div')
    comment.classList.add('comment')

    let commentHeader = document.createElement('div')
    commentHeader.classList.add('comment-header')

    let userAvatar = document.createElement('img')
    userAvatar.classList.add('avatar')
    userAvatar.setAttribute('height', 60 )
    userAvatar.setAttribute('width', 60 )
    userAvatar.setAttribute('src', d.account.avatar_static)

    let userLink = document.createElement('a')
    userLink.classList.add('user-link')
    userLink.setAttribute('href', d.account.url)
    for (let emoji of d.account.emojis) {
      d.account.display_name = d.account.display_name.replace(
        `:${emoji.shortcode}:`,
        `<img src="${emoji.static_url}" alt="${emoji.shortcode}" height="14px" width="14px" />`
        )
    }
    let serverName = d.account.url.replace(/https?:\/\/(.+)\/@.+/, '$1')
    userLink.innerHTML = d.account.display_name + " (@" + d.account.username + "@" + serverName + ")"

    let commentDateTime = document.createElement('a')
    commentDateTime.classList.add('comment-date')
    commentDateTime.setAttribute('href', d.url)
    commentDateTime.innerHTML = d.created_at.substr(0, 10).replace(/([0-9]{4})-([0-9]{2})-([0-9]{2})/, '$3/$2/$1')

    commentHeader.appendChild(userAvatar)
    commentHeader.appendChild(userLink)
    commentHeader.appendChild(commentDateTime)

    let commentContent = document.createElement('p')
    commentContent.innerHTML = d.content

    comment.appendChild(commentHeader)
    comment.appendChild(commentContent)

    return comment
  }
</script>


<aside>
	<div>
		<div>
			<h3>LATEST POSTS</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/books/sandman-preludios-e-noturnos/">Sandman - Prel√∫dios &amp; Noturnos</a></li>
				
				<li><a href="/blog/consequencias-de-manter-comunidades-de-esquerda-na-web/">As Consequ√™ncias de Manter Comunidades de Esquerda na Web</a></li>
				
				<li><a href="/blog/migrando-para-uma-alternativa-gpl-ao-lastpass-authenticator/">Migrando Para Uma Alternativa GPL Ao LastPass Authenticator</a></li>
				
				<li><a href="/blog/github-pages-underline/">GitHub Pages e Nomes de Diret√≥rio Iniciados com Underline</a></li>
				
				<li><a href="/blog/unsubscribe/">Quais Empresas Respeitam o &#34;Unsubscribe&#34;?</a></li>
				
			</ul>
		</div>
	</div>
</aside>


	<footer>
	<p><a href="/license">CC</a> 2023 <a href="https://gmgall.net/"><b>gmgall.net</b></a>.
	</p>
</footer>

</body>
<script src="/js/theme.js"></script>
</html>
