<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<style type=text/css>body{font-family:monospace;}</style>
	<title>Erro &#34;Can Not Open External File&#34; ao Tentar Abrir Legendas Com mpv</title>
	<meta name="description" content="O site pessoal de Guilherme Magalh√£es Gall, um trabalhador da √°rea de TI. Cont√©m textos t√©cnicos sobre programa√ß√£o e os demais assuntos que interessam ao autor.">
	<meta name="author" content="Guilherme Magalh√£es Gall">
	<meta name="generator" content="Hugo 0.109.0">
	<meta name="keywords" content="ffmpeg">
	<link rel="me" href="https://bolha.us/@gmgall">
	<link rel="me" href="https://ursal.zone/@gmgall">
	<meta name="fediverse:creator" content="@gmgall@ursal.zone" />
	<link rel="stylesheet" href="/css/style.css">
	<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üë®‚Äçüíª</text></svg>">
	<link rel="stylesheet" href="/css/custom.css?rnd=1743441561">
	
</head>
<body>
	<header>
	================
	<div style="border-style: dotted; border-width: 2px; float: right">
	<label for="toggle-switch"><small>inverter tema</small></label>
	<input type="checkbox" id="toggle-switch">
	</div><br>
	== <a href="https://gmgall.net/">gmgall.net</a> ==<br>
	================
	<div style="float: right;">√â de compreender que sobretudo nos cansamos. Viver √© n√£o pensar.</div><br>
	<p>
	<nav>
			<a href="/"><b>In√≠cio</b></a>.
			
			
			<a href="/blog/"><b>Blog</b></a>.
			
			<a href="/categories/"><b>Categorias</b></a>.
			
			<a href="/tags/"><b>Tags</b></a>.
			
			<a href="/books/"><b>Livros lidos</b></a>.
			
			<a href="/feeds/"><b>Feeds üì°</b></a>.
			
			<a href="/blogroll/"><b>Blogroll</b></a>.
			
			<a href="/contact/"><b><span class="highlighted-entry">Contato</span></b></a>.
			
	</nav>
	</p>
			
</header>

	
	<main>
		<article>
			<h1>Erro &#34;Can Not Open External File&#34; ao Tentar Abrir Legendas Com mpv</h1>
			<b><time>23.03.2025 22:06</time></b>
				
					<a class="category-link" href="/categories/tech">tech</a>
				
				
					<a href="/tags/ffmpeg">ffmpeg</a>
				

			<div>
				


				<p>Hoje, ao tentar reproduzir um arquivo de v√≠deo com legendas externas no formato <a href="https://docs.fileformat.com/video/srt/">SRT</a> com o player <code>mpv</code>, recebi um erro como o que aparece abaixo:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mpv --sub-file<span style="color:#f92672">=</span>legenda.srt video.mp4 
</span></span><span style="display:flex;"><span>Can not open external file legenda.srt.
</span></span><span style="display:flex;"><span> <span style="color:#f92672">(</span>+<span style="color:#f92672">)</span> Video --vid<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">(</span>*<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>h264 1920x1036 24.000fps<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">(</span>+<span style="color:#f92672">)</span> Audio --aid<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> --alang<span style="color:#f92672">=</span>spa <span style="color:#f92672">(</span>*<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>ac3 6ch 48000Hz<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>     Audio --aid<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span> --alang<span style="color:#f92672">=</span>spa <span style="color:#f92672">(</span>*<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>aac 2ch 48000Hz<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>AO: <span style="color:#f92672">[</span>pipewire<span style="color:#f92672">]</span> 48000Hz 5.1<span style="color:#f92672">(</span>side<span style="color:#f92672">)</span> 6ch floatp
</span></span><span style="display:flex;"><span>VO: <span style="color:#f92672">[</span>gpu<span style="color:#f92672">]</span> 1920x1036 yuv420p
</span></span><span style="display:flex;"><span>AV: 00:00:06 / 02:00:10 <span style="color:#f92672">(</span>0%<span style="color:#f92672">)</span> A-V:  0.000 ct: -0.083
</span></span><span style="display:flex;"><span>Exiting... <span style="color:#f92672">(</span>Quit<span style="color:#f92672">)</span>
</span></span></code></pre></div><p>O arquivo estava no <em>path</em> certo, outras legendas funcionavam normalmente e eu tinha permiss√£o de leitura em <code>legenda.srt</code>. Ainda assim, o enigm√°tico <code>Can not open external file</code> seguia aparecendo.</p>
<p>Parando para comparar legendas que <strong>n√£o</strong> abriam no <code>mpv</code>&hellip;</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ head legenda1.srt <span style="color:#75715e"># N√£o abre no mpv</span>
</span></span><span style="display:flex;"><span>0:00.000 --&gt; 00:00:09.259
</span></span><span style="display:flex;"><span>blablabla
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ head legenda2.srt <span style="color:#75715e"># N√£o abre no mpv</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>00:00:05:150 --&gt; 00:00:10,050
</span></span><span style="display:flex;"><span>blablabla
</span></span></code></pre></div><p>&hellip;com legendas que abriam&hellip;</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ head legenda3.srt <span style="color:#75715e"># ABRE no mpv</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>00:00:42,058 --&gt; 00:00:46,277
</span></span><span style="display:flex;"><span>blablabla
</span></span></code></pre></div><p>ficou claro um padr√£o: sempre que a legenda <strong>n√£o</strong> come√ßava com um contador num√©rico de legendas iniciado por 1, o mpv reclamava <code>Can not open external file</code>.</p>
<p>Alterei manualmente o arquivo de legendas que eu estava tentando abrir originalmente para come√ßar por 1 e o <code>mpv</code> conseguiu abri-lo sem erros.</p>
<p>Outros players devem ser mais lenientes com o formato SRT do que o <code>mpv</code>, por isso existem tantos arquivos que n√£o seguem exatamente o <a href="https://en.wikipedia.org/wiki/SubRip#Format">formato</a> por a√≠.</p>
<p>Parece que esse √© um <a href="https://github.com/mpv-player/mpv/issues/3820">problema</a><sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> <a href="https://github.com/iina/iina/issues/3073">conhecido</a> h√° um tempinho, mas a mensagem de erro n√£o ajuda nem um pouco.</p>
<p>Vers√µes dos softwares envolvidos:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mpv --version
</span></span><span style="display:flex;"><span>mpv 0.38.0 Copyright ¬© 2000-2024 mpv/MPlayer/mplayer2 projects
</span></span><span style="display:flex;"><span> built on Jul <span style="color:#ae81ff">22</span> <span style="color:#ae81ff">2024</span> 20:52:23
</span></span><span style="display:flex;"><span>libplacebo version: v6.338.2
</span></span><span style="display:flex;"><span>FFmpeg version: 6.1.2
</span></span><span style="display:flex;"><span>FFmpeg library versions:
</span></span><span style="display:flex;"><span>   libavutil       58.2.100 <span style="color:#f92672">(</span>runtime 58.29.100<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>   libavcodec      60.3.100 <span style="color:#f92672">(</span>runtime 60.31.102<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>   libavformat     60.3.100 <span style="color:#f92672">(</span>runtime 60.16.100<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>   libswscale      7.1.100 <span style="color:#f92672">(</span>runtime 7.5.100<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>   libavfilter     9.3.100 <span style="color:#f92672">(</span>runtime 9.12.100<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>   libswresample   4.10.100 <span style="color:#f92672">(</span>runtime 4.12.100<span style="color:#f92672">)</span>
</span></span></code></pre></div><div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Quem exatamente tem um problema? O software que √© tolerante com pequenos desvios do formato ou o que segue o formato estritamente, mesmo que com isso deixe de abrir um monte de arquivos dispon√≠veis?&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

			</div>
		</article>
	</main>

<h3>Coment√°rios</h3>


<noscript>ATIVE JAVASCRIPT PARA ATIVAR O LINK A SEGUIR: </noscript><a id="email-link">üìß Responda por e-mail</a>
<script>
const email = 'dHp0bnl5QHR6bnZ5LnBieg=='

function decipher(email){
	const cipher = 'nopqrstuvwxyzabcdefghijklm'
	const alpha = 'abcdefghijklmnopqrstuvwxyz'
	return email.replace(/[a-z]/gi, letter => alpha[cipher.indexOf(letter)])
}

const el = document.getElementById('email-link')
el.setAttribute('href', 'mailto:'+decipher(atob(email))+'?subject=Erro \u0022Can Not Open External File\u0022 ao Tentar Abrir Legendas Com mpv')
</script>



<details>
  <summary>Responda pelo fediverso</summary>
  <p>Responda pelo fediverso colando a URL abaixo no seu cliente: <pre>https://ursal.zone/@gmgall/114214930029028962</pre></p>
  <button onclick="navigator.clipboard.writeText('https:\/\/ursal.zone\/@gmgall\/114214930029028962')">COPIAR URL</button>
</details>
<a id="load-comments">Carregar coment√°rios</a>

<div id="comments-list"></div>


<script src="/js/purify.min.js"></script>
<script>
  document.getElementById('load-comments').addEventListener('click', async () => {
    document.getElementById('load-comments').remove()
    const response = await fetch('https:\/\/ursal.zone/api/v1/statuses/114214930029028962/context')
    const data = await response.json()

    if (data.descendants && data.descendants.length > 0) {
      let descendants = data.descendants
      for (let descendant of descendants) {
        document.getElementById('comments-list').appendChild(DOMPurify.sanitize(createCommentEl(descendant), { 'RETURN_DOM_FRAGMENT': true }))
      }
    } else {
      document.getElementById('comments-list').innerHTML = '<p>‚ö†Ô∏è Sem coment√°rios no fediverso. ‚ö†Ô∏è</p>'
    }
  })

  function createCommentEl(d) {
    let comment = document.createElement('div')
    comment.classList.add('comment')

    let commentHeader = document.createElement('div')
    commentHeader.classList.add('comment-header')

    let userAvatar = document.createElement('img')
    userAvatar.classList.add('avatar')
    userAvatar.setAttribute('height', 60 )
    userAvatar.setAttribute('width', 60 )
    userAvatar.setAttribute('src', d.account.avatar_static)

    let userLink = document.createElement('a')
    userLink.classList.add('user-link')
    userLink.setAttribute('href', d.account.url)
    for (let emoji of d.account.emojis) {
      d.account.display_name = d.account.display_name.replace(
        `:${emoji.shortcode}:`,
        `<img src="${emoji.static_url}" alt="${emoji.shortcode}" height="14px" width="14px" />`
        )
    }
    let serverName = d.account.url.replace(/https?:\/\/(.+)\/@.+/, '$1')
    userLink.innerHTML = d.account.display_name + " (@" + d.account.username + "@" + serverName + ")"

    let commentDateTime = document.createElement('a')
    commentDateTime.classList.add('comment-date')
    commentDateTime.setAttribute('href', d.url)
    commentDateTime.innerHTML = d.created_at.substr(0, 10).replace(/([0-9]{4})-([0-9]{2})-([0-9]{2})/, '$3/$2/$1')

    commentHeader.appendChild(userAvatar)
    commentHeader.appendChild(userLink)
    commentHeader.appendChild(commentDateTime)

    let commentContent = document.createElement('p')
    commentContent.innerHTML = d.content

    comment.appendChild(commentHeader)
    comment.appendChild(commentContent)

    return comment
  }
</script>


<aside>
	<div>
		<div>
			<h3>LATEST POSTS</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/blog/70-dias-de-trump/">70 Dias de Trump</a></li>
				
				<li><a href="/blog/arquivos-de-video-enviaveis-pelo-whatsapp-web/">Tornando Arquivos de V√≠deo Envi√°veis Pelo WhatsApp Web</a></li>
				
				<li><a href="/blog/can-not-open-external-file-mpv/">Erro &#34;Can Not Open External File&#34; ao Tentar Abrir Legendas Com mpv</a></li>
				
				<li><a href="/blog/transporte-publico-falacias-logicas-direito-a-cidade/">Transporte P√∫blico, Fal√°cias L√≥gicas e o Direito √† Cidade</a></li>
				
				<li><a href="/blog/cultura-de-pedir-vs-cultura-de-adivinhar/">Cultura de Pedir VS Cultura de Adivinhar</a></li>
				
			</ul>
		</div>
	</div>
</aside>


	<footer>
	<p><a href="/license">CC</a> 2025 <a href="https://gmgall.net/"><b>gmgall.net</b></a>.
	</p>
</footer>

</body>
<script src="/js/theme.js"></script>
</html>
